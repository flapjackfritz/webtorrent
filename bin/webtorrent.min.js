/*! For license information please see webtorrent.min.js.LICENSE.txt */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=79)}([function(e,t){e.exports=require("events")},function(e,t,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(96):e.exports=n(98)},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t,n){var i=n(12);"disable"===process.env.READABLE_STREAM&&i?(e.exports=i.Readable,Object.assign(e.exports,i),e.exports.Stream=i):((t=e.exports=n(43)).Stream=i||t,t.Readable=t,t.Writable=n(47),t.Duplex=n(13),t.Transform=n(49),t.PassThrough=n(88),t.finished=n(29),t.pipeline=n(89))},function(e,t){e.exports=require("util")},function(e,t,n){try{var i=n(5);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(84)}},function(e,t,n){var i=n(51);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(r),e.exports.strict=i(s),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},function(e,t,n){e.exports=n(18).randomBytes},function(e,t,n){var i=e.exports;i.encode=n(81),i.decode=n(82),i.byteLength=i.encodingLength=function(e){return i.encode(e).length}},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";const i={};function r(e,t,n){n||(n=Error);class r extends n{constructor(e,n,i){super(function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(e,n,i))}}r.prototype.name=n.name,r.prototype.code=e,i[e]=r}function s(e,t){if(Array.isArray(e)){const n=e.length;return e=e.map(e=>String(e)),n>2?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,n){let i;var r,o;let a;if("string"==typeof t&&(r="not ",t.substr(!o||o<0?0:+o,r.length)===r)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a=`The ${e} ${i} ${s(t,"type")}`;else{a=`The "${e}" ${function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument"} ${i} ${s(t,"type")}`}return a+=". Received type "+typeof n,a}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var r=n(43),s=n(47);n(6)(h,r);for(var o=i(s.prototype),a=0;a<o.length;a++){var c=o[a];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);r.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},function(e,t){e.exports=function(e,t){var n,i,r,s=!0;Array.isArray(e)?(n=[],i=e.length):(r=Object.keys(e),n={},i=r.length);function o(e){function i(){t&&t(e,n),t=null}s?process.nextTick(i):i()}function a(e,t,r){n[e]=r,(0==--i||t)&&o(t)}i?r?r.forEach((function(t){e[t]((function(e,n){a(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){a(t,e,n)}))})):o(null);s=!1}},function(e,t,n){var i=n(18);function r(e){return i.createHash("sha1").update(e).digest("hex")}e.exports=function(e,t){var n=r(e);process.nextTick((function(){t(n)}))},e.exports.sync=r},function(e,t){e.exports=function(e,t){if(t>=e.length||t<0)return;var n=e.pop();if(t<e.length){var i=e[t];return e[t]=n,i}return n}},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("os")},function(e,t,n){e.exports=d;const i=n(41),r=n(108),s=n(22),o=n(57),a=n(7),c=n(58),h=n(59),l=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;function d(e,t){if(e=Object.assign({maxRedirects:10},"string"==typeof e?{url:e}:e),t=a(t),e.url){const{hostname:t,port:n,protocol:i,auth:r,path:s}=h.parse(e.url);delete e.url,t||n||i||r?Object.assign(e,{hostname:t,port:n,protocol:i,auth:r,path:s}):e.path=s}const n={"accept-encoding":"gzip, deflate"};let i;e.headers&&Object.keys(e.headers).forEach(t=>n[t.toLowerCase()]=e.headers[t]),e.headers=n,e.body?i=e.json&&!l(e.body)?JSON.stringify(e.body):e.body:e.form&&(i="string"==typeof e.form?e.form:c.stringify(e.form),e.headers["content-type"]="application/x-www-form-urlencoded"),i&&(e.method||(e.method="POST"),l(i)||(e.headers["content-length"]=Buffer.byteLength(i)),e.json&&!e.form&&(e.headers["content-type"]="application/json")),delete e.body,delete e.form,e.json&&(e.headers.accept="application/json"),e.method&&(e.method=e.method.toUpperCase());const u=("https:"===e.protocol?o:s).request(e,n=>{if(!1!==e.followRedirects&&n.statusCode>=300&&n.statusCode<400&&n.headers.location)return e.url=n.headers.location,delete e.headers.host,n.resume(),"POST"===e.method&&[301,302].includes(n.statusCode)&&(e.method="GET",delete e.headers["content-length"],delete e.headers["content-type"]),0==e.maxRedirects--?t(new Error("too many redirects")):d(e,t);const i="function"==typeof r&&"HEAD"!==e.method;t(null,i?r(n):n)});return u.on("timeout",()=>{u.abort(),t(new Error("Request timed out"))}),u.on("error",t),l(i)?i.on("error",t).pipe(u):u.end(i),u}d.concat=(e,t)=>d(e,(n,r)=>{if(n)return t(n);i(r,(n,i)=>{if(n)return t(n);if(e.json)try{i=JSON.parse(i.toString())}catch(n){return t(n,r,i)}t(null,r,i)})}),["get","post","put","patch","head","delete"].forEach(e=>{d[e]=(t,n)=>("string"==typeof t&&(t={url:t}),d(Object.assign({method:e.toUpperCase()},t),n))})},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("http")},function(e,t,n){function i(e){let t=e>>3;return e%8!=0&&t++,t}e.exports=class{constructor(e=0,t){const n=null!=t&&t.grow;this.grow=n&&isFinite(n)&&i(n)||n||0,this.buffer="number"==typeof e?new Uint8Array(i(e)):e}get(e){const t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)}set(e,t=!0){const n=e>>3;if(t){if(this.buffer.length<n+1){const e=Math.max(n+1,Math.min(2*this.buffer.length,this.grow));if(e<=this.grow){const t=new Uint8Array(e);t.set(this.buffer),this.buffer=t}}this.buffer[n]|=128>>e%8}else n<this.buffer.length&&(this.buffer[n]&=~(128>>e%8))}}},function(e,t,n){t.DEFAULT_ANNOUNCE_PEERS=50,t.MAX_ANNOUNCE_PEERS=82,t.binaryToHex=function(e){return"string"!=typeof e&&(e=String(e)),Buffer.from(e,"binary").toString("hex")},t.hexToBinary=function(e){return"string"!=typeof e&&(e=String(e)),Buffer.from(e,"hex").toString("binary")};var i=n(128);Object.assign(t,i)},function(e,t,n){"use strict";const i=n(30),r=n(26),s=n(138),{kStatusCode:o,NOOP:a}=n(17),c=Buffer.from([0,0,255,255]),h=Symbol("permessage-deflate"),l=Symbol("total-length"),d=Symbol("callback"),u=Symbol("buffers"),f=Symbol("error");let p;function m(e){this[u].push(e),this[l]+=e.length}function g(e){this[l]+=e.length,this[h]._maxPayload<1||this[l]<=this[h]._maxPayload?this[u].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f][o]=1009,this.removeListener("data",g),this.reset())}function _(e){this[h]._inflate=null,e[o]=1007,this[d](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){p.add(i=>{this._decompress(e,t,(e,t)=>{i(),n(e,t)})})}compress(e,t,n){p.add(i=>{this._compress(e,t,(e,t)=>{i(),n(e,t)})})}_decompress(e,t,n){const s=this._isServer?"client":"server";if(!this._inflate){const e=s+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[h]=this,this._inflate[l]=0,this._inflate[u]=[],this._inflate.on("error",_),this._inflate.on("data",g)}this._inflate[d]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=r.concat(this._inflate[u],this._inflate[l]);t&&this.params[s+"_no_context_takeover"]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[u]=[]),n(null,i)})}_compress(e,t,n){const s=this._isServer?"server":"client";if(!this._deflate){const e=s+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[u]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[d]=n,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=r.concat(this._deflate[u],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,t&&this.params[s+"_no_context_takeover"]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=0,this._deflate[u]=[]),n(null,e)})}}},function(e,t,n){"use strict";const{EMPTY_BUFFER:i}=n(17);function r(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return r<t?n.slice(0,r):n}function s(e,t,n,i,r){for(let s=0;s<r;s++)n[i+s]=e[s]^t[3&s]}function o(e,t){const n=e.length;for(let i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);if(e.byteLength!==e.buffer.byteLength)return t.slice(e.byteOffset,e.byteOffset+e.byteLength);return t}(e):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=n(136),i=t.BufferUtil||t;e.exports={concat:r,mask(e,t,n,r,o){o<48?s(e,t,n,r,o):i.mask(e,t,n,r,o)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?o(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:r,mask:s,toArrayBuffer:a,toBuffer:c,unmask:o}}},function(e,t,n){var i=n(78),r=n(181),s=t,o=t.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};s.encode=function(e,t,n){return s.encodingLength(e),n=n||0,t=t||Buffer.alloc(e.length),s._encode(e,t,n)},s._encode=function(e,t,n){var a=e.type,c=e.length;c>4294967295&&(c=1),t.writeUInt32BE(c,n),t.write(e.type,n+4,4,"ascii");var h=n+8;if(1===c&&(i.encode(e.length,t,h),h+=8),r.fullBoxes[a]&&(t.writeUInt32BE(e.flags||0,h),t.writeUInt8(e.version||0,h),h+=4),o[a])o[a].forEach((function(n){if(5===n.length){var i=e[n]||[];n=n.substr(0,4),i.forEach((function(e){s._encode(e,t,h),h+=s.encode.bytes}))}else e[n]&&(s._encode(e[n],t,h),h+=s.encode.bytes)})),e.otherBoxes&&e.otherBoxes.forEach((function(e){s._encode(e,t,h),h+=s.encode.bytes}));else if(r[a]){var l=r[a].encode;l(e,t,h),h+=l.bytes}else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+a+"') or `buffer` must be set");e.buffer.copy(t,h),h+=e.buffer.length}return s.encode.bytes=h-n,t},s.readHeaders=function(e,t,n){if(t=t||0,(n=n||e.length)-t<8)return 8;var s,o,a=e.readUInt32BE(t),c=e.toString("ascii",t+4,t+8),h=t+8;if(1===a){if(n-t<16)return 16;a=i.decode(e,h),h+=8}return r.fullBoxes[c]&&(s=e.readUInt8(h),o=16777215&e.readUInt32BE(h),h+=4),{length:a,headersLen:h-t,contentLen:a-(h-t),type:c,version:s,flags:o}},s.decode=function(e,t,n){t=t||0,n=n||e.length;var i=s.readHeaders(e,t,n);if(!i||i.length>n-t)throw new Error("Data too short");return s.decodeWithoutHeaders(i,e,t+i.headersLen,t+i.length)},s.decodeWithoutHeaders=function(e,t,n,i){n=n||0,i=i||t.length;var a=e.type,c={};if(o[a]){c.otherBoxes=[];for(var h=o[a],l=n;i-l>=8;){var d=s.decode(t,l,i);if(l+=d.length,h.indexOf(d.type)>=0)c[d.type]=d;else if(h.indexOf(d.type+"s")>=0){var u=d.type+"s";(c[u]=c[u]||[]).push(d)}else c.otherBoxes.push(d)}}else if(r[a]){c=(0,r[a].decode)(t,n,i)}else c.buffer=Buffer.from(t.slice(n,i));return c.length=e.length,c.contentLen=e.contentLen,c.type=e.type,c.version=e.version,c.flags=e.flags,c},s.encodingLength=function(e){var t=e.type,n=8;if(r.fullBoxes[t]&&(n+=4),o[t])o[t].forEach((function(t){if(5===t.length){var i=e[t]||[];t=t.substr(0,4),i.forEach((function(e){e.type=t,n+=s.encodingLength(e)}))}else if(e[t]){var r=e[t];r.type=t,n+=s.encodingLength(r)}})),e.otherBoxes&&e.otherBoxes.forEach((function(e){n+=s.encodingLength(e)}));else if(r[t])n+=r[t].encodingLength(e);else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");n+=e.buffer.length}return n>4294967295&&(n+=8),e.length=n,n}},function(e,t,n){var i=n(10),r=i.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),s(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";var i=n(11).codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(s||r);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},h=t._writableState&&t._writableState.finished,l=function(){a=!1,h=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,u=function(){o=!1,d=!0,a||s.call(t)},f=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):a&&!h?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",u),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",p)}}},function(e,t){e.exports=require("zlib")},function(e,t,n){var i=n(1)("simple-peer"),r=n(121),s=n(8),o=n(4),a=n(32);function c(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function h(e,t){var n=new Error(e);return n.code=t,n}class l extends o.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||l.channelConfig,this.config=Object.assign({},l.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:r(),!this._wrtc)throw"undefined"==typeof window?h("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):h("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void a(()=>this.destroy(h(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw h("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(h(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(h("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{var n;!t.address||t.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.destroy(h(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(h(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,i=n.get(t);if(i)throw i.removed?h("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):h("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){this._debug("replaceTrack()");var i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw h("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null!=r.replaceTrack?r.replaceTrack(t):this.destroy(h("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw h("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(i):this.destroy(h(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating||(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(h("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(h(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(h("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(h(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(h(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(h(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(h(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(h(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(h("Connection failed.","ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(h("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(h("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{var i=[];n.forEach(e=>{i.push(t(e))}),e(null,i)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(!this.destroyed){var i=[];n.result().forEach(e=>{var n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,i.push(t(n))}),e(null,i)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);var i={},r={},s={},o=!1;n.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(r[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)});const a=e=>{o=!0;var t=r[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var n=i[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),o||Object.keys(s).length&&!Object.keys(r).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(h(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var c=this._cb;this._cb=null,c(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=Buffer.from(t)),this.push(t)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}l.WEBRTC_SUPPORT=!!r(),l.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},l.channelConfig={},e.exports=l},function(e,t){let n;e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},function(e,t){var n,i=1,r=function(){i=i+1&65535};e.exports=function(e){n||(n=setInterval(r,250)).unref&&n.unref();var t=4*(e||5),s=[0],o=1,a=i-1&65535;return function(e){var n=i-a&65535;for(n>t&&(n=t),a=i;n--;)o===t&&(o=0),s[o]=s[0===o?t-1:o-1],o++;e&&(s[o-1]+=e);var r=s[o-1],c=s.length<t?0:s[o===t?0:o];return s.length<4?r:4*(r-c)/s.length}}},function(e){e.exports=JSON.parse('{"name":"webtorrent","description":"Streaming torrent client","version":"0.108.1","author":{"name":"WebTorrent, LLC","email":"feross@webtorrent.io","url":"https://webtorrent.io"},"browser":{"./lib/server.js":false,"./lib/tcp-pool.js":false,"bittorrent-dht/client":false,"fs-chunk-store":"memory-chunk-store","load-ip-set":false,"net":false,"os":false,"ut_pex":false},"browserify":{"transform":["package-json-versionify"]},"bugs":{"url":"https://github.com/webtorrent/webtorrent/issues"},"chromeapp":{"fs-chunk-store":"memory-chunk-store","http":"http-node","load-ip-set":false,"net":"chrome-net","os":false},"dependencies":{"addr-to-ip-port":"^1.4.2","bitfield":"^3.0.0","bittorrent-dht":"^9.0.0","bittorrent-protocol":"^3.0.0","chrome-net":"^3.3.2","chunk-store-stream":"^4.0.0","create-torrent":"^4.0.0","debug":"^4.1.0","end-of-stream":"1.4.1","escape-html":"^1.0.3","fs-chunk-store":"^2.0.0","http-node":"github:feross/http-node#webtorrent","immediate-chunk-store":"^2.0.0","load-ip-set":"^2.1.0","memory-chunk-store":"^1.2.0","mime":"^2.4.0","multistream":"^4.0.0","package-json-versionify":"^1.0.2","parse-numeric-range":"^0.0.2","parse-torrent":"^7.0.0","pump":"^3.0.0","random-iterate":"^1.0.1","randombytes":"^2.0.3","range-parser":"^1.2.0","readable-stream":"^3.0.6","render-media":"^3.0.0","run-parallel":"^1.1.6","run-parallel-limit":"^1.0.3","simple-concat":"^1.0.0","simple-get":"^3.0.1","simple-peer":"^9.0.0","simple-sha1":"^3.0.1","speedometer":"^1.0.0","stream-to-blob":"^2.0.0","stream-to-blob-url":"^3.0.0","stream-with-known-length-to-buffer":"^1.0.0","terser-webpack-plugin":"^2.3.5","torrent-discovery":"^9.1.1","torrent-piece":"^2.0.0","unordered-array-remove":"^1.0.2","ut_metadata":"^3.3.0","ut_pex":"^2.0.0"},"devDependencies":{"airtap":"^3.0.0","bittorrent-tracker":"^9.14.0","disc":"^1.3.3","electron":"^8.0.0","finalhandler":"^1.0.0","network-address":"^1.1.0","run-series":"^1.1.4","serve-static":"^1.11.1","standard":"*","tape":"^4.6.0","webpack":"^4.42.1","webpack-cli":"^3.3.11","webpack-merge":"^4.2.2","webtorrent-fixtures":"^1.5.0"},"engines":{"node":">=10"},"homepage":"https://webtorrent.io","keywords":["bittorrent","bittorrent client","download","mad science","p2p","peer-to-peer","peers","streaming","swarm","torrent","web torrent","webrtc","webrtc data","webtorrent"],"license":"MIT","main":"index.js","repository":{"type":"git","url":"git://github.com/webtorrent/webtorrent.git"},"bin":"bin/webtorrent.debug.js","scripts":{"build":"webpack --env production","start":"webpack --env development","test":"standard && npm run test-node && npm run test-browser","test-browser":"airtap -- test/*.js test/browser/*.js","test-browser-local":"airtap --local -- test/*.js test/browser/*.js","test-node":"tape test/*.js test/node/*.js","update-authors":"./scripts/update-authors.sh"}}')},function(e,t,n){var i=n(64),r=function(e){switch(e.length){case 6:return e[0]+"."+e[1]+"."+e[2]+"."+e[3]+":"+e.readUInt16BE(4);case 18:for(var t=[],n=0;n<8;n++)t.push(e.readUInt16BE(2*n).toString(16));return"["+i.parse(t.join(":")).toString()+"]:"+e.readUInt16BE(16);default:throw new Error("Invalid Compact IP/PORT, It should contain 6 or 18 bytes")}};r.multi=function(e){if(e.length%6!=0)throw new Error("buf length isn't multiple of compact IP/PORTs (6 bytes)");for(var t=[],n=0;n<=e.length-1;n+=6)t.push(r(e.slice(n,n+6)));return t},r.multi6=function(e){if(e.length%18!=0)throw new Error("buf length isn't multiple of compact IP6/PORTs (18 bytes)");for(var t=[],n=0;n<=e.length-1;n+=18)t.push(r(e.slice(n,n+18)));return t},e.exports=r},function(e,t,n){const i=n(0);e.exports=class extends i{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){null==e&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}}},function(e,t){e.exports=require("assert")},function(e,t,n){e.exports=l,l.Minimatch=d;var i={sep:"/"};try{i=n(2)}catch(e){}var r=l.GLOBSTAR=d.GLOBSTAR={},s=n(151),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function h(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function l(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new d(t,n).match(e))}function d(e,t){if(!(this instanceof d))return new d(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function u(e,t){if(t||(t=this instanceof d?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:s(e)}l.filter=function(e,t){return t=t||{},function(n,i,r){return l(n,e,t)}},l.defaults=function(e){if(!e||!Object.keys(e).length)return l;var t=l,n=function(n,i,r){return t.minimatch(n,i,h(e,r))};return n.Minimatch=function(n,i){return new t.Minimatch(n,h(e,i))},n},d.defaults=function(e){return e&&Object.keys(e).length?l.defaults(e).Minimatch:d},d.prototype.debug=function(){},d.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(c)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},d.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,i=0;if(n.nonegate)return;for(var r=0,s=e.length;r<s&&"!"===e.charAt(r);r++)t=!t,i++;i&&(this.pattern=e.substr(i));this.negate=t},l.braceExpand=function(e,t){return u(e,t)},d.prototype.braceExpand=u,d.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return r;if(""===e)return"";var i,s="",c=!!n.nocase,h=!1,l=[],d=[],u=!1,p=-1,m=-1,g="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",_=this;function v(){if(i){switch(i){case"*":s+="[^/]*?",c=!0;break;case"?":s+="[^/]",c=!0;break;default:s+="\\"+i}_.debug("clearStateChar %j %j",i,s),i=!1}}for(var y,b=0,w=e.length;b<w&&(y=e.charAt(b));b++)if(this.debug("%s\t%s %s %j",e,b,s,y),h&&a[y])s+="\\"+y,h=!1;else switch(y){case"/":return!1;case"\\":v(),h=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,b,s,y),u){this.debug("  in class"),"!"===y&&b===m+1&&(y="^"),s+=y;continue}_.debug("call clearStateChar %j",i),v(),i=y,n.noext&&v();continue;case"(":if(u){s+="(";continue}if(!i){s+="\\(";continue}l.push({type:i,start:b-1,reStart:s.length,open:o[i].open,close:o[i].close}),s+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,s),i=!1;continue;case")":if(u||!l.length){s+="\\)";continue}v(),c=!0;var x=l.pop();s+=x.close,"!"===x.type&&d.push(x),x.reEnd=s.length;continue;case"|":if(u||!l.length||h){s+="\\|",h=!1;continue}v(),s+="|";continue;case"[":if(v(),u){s+="\\"+y;continue}u=!0,m=b,p=s.length,s+=y;continue;case"]":if(b===m+1||!u){s+="\\"+y,h=!1;continue}if(u){var k=e.substring(m+1,b);try{RegExp("["+k+"]")}catch(e){var E=this.parse(k,f);s=s.substr(0,p)+"\\["+E[0]+"\\]",c=c||E[1],u=!1;continue}}c=!0,u=!1,s+=y;continue;default:v(),h?h=!1:!a[y]||"^"===y&&u||(s+="\\"),s+=y}u&&(k=e.substr(m+1),E=this.parse(k,f),s=s.substr(0,p)+"\\["+E[0],c=c||E[1]);for(x=l.pop();x;x=l.pop()){var S=s.slice(x.reStart+x.open.length);this.debug("setting tail",s,x),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",S,S,x,s);var M="*"===x.type?"[^/]*?":"?"===x.type?"[^/]":"\\"+x.type;c=!0,s=s.slice(0,x.reStart)+M+"\\("+S}v(),h&&(s+="\\\\");var I=!1;switch(s.charAt(0)){case".":case"[":case"(":I=!0}for(var C=d.length-1;C>-1;C--){var B=d[C],T=s.slice(0,B.reStart),A=s.slice(B.reStart,B.reEnd-8),O=s.slice(B.reEnd-8,B.reEnd),L=s.slice(B.reEnd);O+=L;var R=T.split("(").length-1,N=L;for(b=0;b<R;b++)N=N.replace(/\)[+*?]?/,"");var P="";""===(L=N)&&t!==f&&(P="$"),s=T+A+L+P+O}""!==s&&c&&(s="(?=.)"+s);I&&(s=g+s);if(t===f)return[s,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var U=n.nocase?"i":"";try{var j=new RegExp("^"+s+"$",U)}catch(e){return new RegExp("$.")}return j._glob=e,j._src=s,j};var f={};l.makeRe=function(e,t){return new d(e,t||{}).makeRe()},d.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",s=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(e){this.regexp=!1}return this.regexp},l.match=function(e,t,n){var i=new d(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},d.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var r,s,o=this.set;for(this.debug(this.pattern,"set",o),s=e.length-1;s>=0&&!(r=e[s]);s--);for(s=0;s<o.length;s++){var a=o[s],h=e;if(n.matchBase&&1===a.length&&(h=[r]),this.matchOne(h,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},d.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,c=t.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var h,l=t[o],d=e[s];if(this.debug(t,l,d),!1===l)return!1;if(l===r){this.debug("GLOBSTAR",[t,l,d]);var u=s,f=o+1;if(f===c){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!i.dot&&"."===e[s].charAt(0))return!1;return!0}for(;u<a;){var p=e[u];if(this.debug("\nglobstar while",e,u,t,f,p),this.matchOne(e.slice(u),t.slice(f),n))return this.debug("globstar found match!",u,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,u,t,f);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!n||(this.debug("\n>>> no match, partial?",e,u,t,f),u!==a))}if("string"==typeof l?(h=i.nocase?d.toLowerCase()===l.toLowerCase():d===l,this.debug("string match",l,d,h)):(h=d.match(l),this.debug("pattern match",l,d,h)),!h)return!1}if(s===a&&o===c)return!0;if(s===a)return n;if(o===c)return s===a-1&&""===e[s];throw new Error("wtf?")}},function(e,t,n){"use strict";function i(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?r:i,e.exports.posix=i,e.exports.win32=r},function(e,t,n){var i=n(7),r=n(160),s=n(3),o=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},h=function(e,t,n,h){h=i(h);var l=!1;e.on("close",(function(){l=!0})),r(e,{readable:t,writable:n},(function(e){if(e)return h(e);l=!0,h()}));var d=!1;return function(t){if(!l&&!d)return d=!0,function(e){return!!a&&(!!s&&((e instanceof(s.ReadStream||o)||e instanceof(s.WriteStream||o))&&c(e.close)))}(e)?e.close(o):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void h(t||new Error("stream was destroyed"))}},l=function(e){e()},d=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=c(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var i=t.map((function(r,s){var o=s<t.length-1;return h(r,o,s>0,(function(t){e||(e=t),t&&i.forEach(l),o||(i.forEach(l),n(e))}))}));return t.reduce(d)}},function(e,t){e.exports=function(e,t){var n=[];e.on("data",(function(e){n.push(e)})),e.once("end",(function(){t&&t(null,Buffer.concat(n)),t=null})),e.once("error",(function(e){t&&t(e),t=null}))}},function(e,t,n){const{Transform:i}=n(4);e.exports=class extends i{constructor(e,t={}){super(t),"object"==typeof e&&(e=(t=e).size),this.size=e||512;const{nopad:n,zeroPadding:i=!0}=t;this._zeroPadding=!n&&!!i,this._buffered=[],this._bufferedBytes=0}_transform(e,t,n){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){const e=Buffer.concat(this._buffered);this._bufferedBytes-=this.size,this.push(e.slice(0,this.size)),this._buffered=[e.slice(this.size,e.length)]}n()}_flush(){if(this._bufferedBytes&&this._zeroPadding){const e=Buffer.alloc(this.size-this._bufferedBytes);this._buffered.push(e),this.push(Buffer.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(Buffer.concat(this._buffered)),this._buffered=null);this.push(null)}}},function(e,t,n){"use strict";var i;e.exports=E,E.ReadableState=k;n(0).EventEmitter;var r=function(e,t){return e.listeners(t).length},s=n(44),o=n(10).Buffer,a=global.Uint8Array||function(){};var c,h=n(5);c=h&&h.debuglog?h.debuglog("stream"):function(){};var l,d,u,f=n(83),p=n(45),m=n(46).getHighWaterMark,g=n(11).codes,_=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6)(E,s);var w=p.errorOrDestroy,x=["error","close","destroy","pause","resume"];function k(e,t,r){i=i||n(13),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=n(48).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function E(e){if(i=i||n(13),!(this instanceof E))return new E(e);var t=this instanceof i;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function S(e,t,n,i,r){c("readableAddChunk",t);var s,h=e._readableState;if(null===t)h.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,B(e)))}(e,h);else if(r||(s=function(e,t){var n;i=t,o.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],t));var i;return n}(h,t)),s)w(e,s);else if(h.objectMode||t&&t.length>0)if("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),i)h.endEmitted?w(e,new b):M(e,h,t,!0);else if(h.ended)w(e,new v);else{if(h.destroyed)return!1;h.reading=!1,h.decoder&&!n?(t=h.decoder.write(t),h.objectMode||0!==t.length?M(e,h,t,!1):T(e,h)):M(e,h,t,!1)}else i||(h.reading=!1,T(e,h));return!h.ended&&(h.length<h.highWaterMark||0===h.length)}function M(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),T(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=o.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},E.prototype.unshift=function(e){return S(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){l||(l=n(48).StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(B,e))}function B(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function T(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(A,e,t))}function A(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){c("readable nexttick read 0"),e.read(0)}function R(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(j,t,e))}function j(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function q(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}E.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):C(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&U(this),null;var i,r=t.needReadable;return c("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",r=!0),t.ended||t.reading?c("reading or ended",r=!1):r&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(i=e>0?P(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==i&&this.emit("data",i),i},E.prototype._read=function(e){w(this,new y("_read()"))},E.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:m;function o(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",h),e.removeListener("error",u),e.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",d),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function a(){c("onend"),e.end()}i.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",o);var h=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",h);var l=!1;function d(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==q(i.pipes,e))&&!l&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function u(t){c("onerror",t),m(),e.removeListener("error",u),0===r(e,"error")&&w(e,t)}function f(){e.removeListener("finish",p),m()}function p(){c("onfinish"),e.removeListener("close",f),m()}function m(){c("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",u),e.once("close",f),e.once("finish",p),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=q(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?C(this):i.reading||process.nextTick(L,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(O,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(O,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(R,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(c("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<x.length;s++)e.on(x[s],this.emit.bind(this,x[s]));return this._read=function(t){c("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(86)),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=P,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===u&&(u=n(87)),u(E,e,t)})},function(e,t,n){e.exports=n(12)},function(e,t,n){"use strict";function i(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,e)):process.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?process.nextTick(r,n):(n._writableState.errorEmitted=!0,process.nextTick(i,n,e)):process.nextTick(i,n,e):t?(process.nextTick(r,n),t(e)):process.nextTick(r,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},function(e,t,n){"use strict";var i=n(11).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new i(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var r;e.exports=E,E.WritableState=k;var s={deprecate:n(85)},o=n(44),a=n(10).Buffer,c=global.Uint8Array||function(){};var h,l=n(45),d=n(46).getHighWaterMark,u=n(11).codes,f=u.ERR_INVALID_ARG_TYPE,p=u.ERR_METHOD_NOT_IMPLEMENTED,m=u.ERR_MULTIPLE_CALLBACK,g=u.ERR_STREAM_CANNOT_PIPE,_=u.ERR_STREAM_DESTROYED,v=u.ERR_STREAM_NULL_VALUES,y=u.ERR_STREAM_WRITE_AFTER_END,b=u.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function x(){}function k(e,t,s){r=r||n(13),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if("function"!=typeof r)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(process.nextTick(r,i),process.nextTick(T,e,t),e._writableState.errorEmitted=!0,w(e,i)):(r(i),e._writableState.errorEmitted=!0,w(e,i),T(e,t))}(e,n,i,t,r);else{var s=C(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||I(e,n),i?process.nextTick(M,e,n,s,r):M(e,n,s,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(e){var t=this instanceof(r=r||n(13));if(!t&&!h.call(E,this))return new E(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function S(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function M(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),T(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)s[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;s.allBuffers=c,S(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var h=n.chunk,l=n.encoding,d=n.callback;if(S(e,t,!1,t.objectMode?1:h.length,h,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function B(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(B,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(6)(E,o),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===E&&(e&&e._writableState instanceof k)}})):h=function(e){return e instanceof this},E.prototype.pipe=function(){w(this,new g)},E.prototype.write=function(e,t,n){var i,r=this._writableState,s=!1,o=!r.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=x),r.ending?function(e,t){var n=new y;w(e,n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,i){var r;return null===n?r=new v:"string"==typeof n||t.objectMode||(r=new f("chunk",["string","Buffer"],n)),!r||(w(e,r),process.nextTick(i,r),!1)}(this,r,e,n))&&(r.pendingcb++,s=function(e,t,n,i,r,s){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var c=t.objectMode?1:i.length;t.length+=c;var h=t.length<t.highWaterMark;h||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,c,i,r,s);return h}(this,r,o,e,t,n)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(e,t){t(e)}},function(e,t,n){"use strict";var i=n(28).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=h,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=u,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=l;var i=n(11).codes,r=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=n(13);function h(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(t,n){u(e,t,n)}))}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(6)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){var i=n(4);function r(e){return o(e,{objectMode:!0,highWaterMark:16})}function s(e){return o(e)}function o(e,t){if(!e||"function"==typeof e||e._readableState)return e;var n=new i.Readable(t).wrap(e);return e.destroy&&(n.destroy=e.destroy.bind(e)),n}class a extends i.Readable{constructor(e,t){super(t),this.destroyed=!1,this._drained=!1,this._forwarding=!1,this._current=null,this._toStreams2=t&&t.objectMode?r:s,"function"==typeof e?this._queue=e:(this._queue=e.map(this._toStreams2),this._queue.forEach(e=>{"function"!=typeof e&&this._attachErrorListener(e)})),this._next()}_read(){this._drained=!0,this._forward()}_forward(){if(!this._forwarding&&this._drained&&this._current){var e;for(this._forwarding=!0;null!==(e=this._current.read())&&this._drained;)this._drained=this.push(e);this._forwarding=!1}}destroy(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(e=>{e.destroy&&e.destroy()}),e&&this.emit("error",e),this.emit("close"))}_next(){if(this._current=null,"function"==typeof this._queue)this._queue((e,t)=>{if(e)return this.destroy(e);t=this._toStreams2(t),this._attachErrorListener(t),this._gotNextStream(t)});else{var e=this._queue.shift();"function"==typeof e&&(e=this._toStreams2(e()),this._attachErrorListener(e)),this._gotNextStream(e)}}_gotNextStream(e){if(!e)return this.push(null),void this.destroy();this._current=e,this._forward();const t=()=>{this._forward()},n=()=>{e._readableState.ended||this.destroy()},i=()=>{this._current=null,e.removeListener("readable",t),e.removeListener("end",i),e.removeListener("close",n),this._next()};e.on("readable",t),e.once("end",i),e.once("close",n)}_attachErrorListener(e){if(!e)return;const t=n=>{e.removeListener("error",t),this.destroy(n)};e.once("error",t)}}a.obj=e=>new a(e,{objectMode:!0,highWaterMark:16}),e.exports=a},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){let n;function o(...e){if(!o.enabled)return;const t=o,r=Number(new Date),s=r-(n||r);t.diff=s,t.prev=n,t.curr=r,n=r,e[0]=i.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return n;a++;const s=i.formatters[r];if("function"==typeof s){const i=e[a];n=s.call(t,i),e.splice(a,1),a--}return n}),i.formatArgs.call(t,e),(t.log||i.log).apply(t,e)}return o.namespace=e,o.enabled=i.enabled(e),o.useColors=i.useColors(),o.color=t(e),o.destroy=r,o.extend=s,"function"==typeof i.init&&i.init(o),i.instances.push(o),o}function r(){const e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function s(e,t){const n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},i.disable=function(){const e=[...i.names.map(o),...i.skips.map(o).map(e=>"-"+e)].join(",");return i.enable(""),e},i.enable=function(e){let t;i.save(e),i.names=[],i.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(t=0;t<i.instances.length;t++){const e=i.instances[t];e.enabled=i.enabled(e.namespace)}},i.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=n(97),Object.keys(e).forEach(t=>{i[t]=e[t]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}},function(e,t){e.exports=require("tty")},function(e,t,n){e.exports=p;var i=n(9),r=n(1)("bittorrent-dht"),s=n(0).EventEmitter,o=n(6),a=n(55),c=n(101),h=n(104),l=n(8),d=n(15),u=n(105),f=n(106);function p(e){if(!(this instanceof p))return new p(e);e||(e={});var t=this;this._tables=new h({maxAge:3e5,max:e.maxTables||1e3}),this._values=new h(e.maxValues||1e3),this._peers=u({maxAge:e.maxAge||0,maxSize:e.maxPeers||1e4}),this._secrets=null,this._hash=e.hash||g,this._hashLength=this._hash(Buffer.from("")).length,this._rpc=e.krpc||c(Object.assign({idLength:this._hashLength},e)),this._rpc.on("query",(function(e,n){t._onquery(e,n)})),this._rpc.on("node",(function(e){t.emit("node",e)})),this._rpc.on("warning",(function(e){t.emit("warning",e)})),this._rpc.on("error",(function(e){t.emit("error",e)})),this._rpc.on("listening",(function(){t.listening=!0,t._debug("listening %d",t.address().port),t.updateBucketTimestamp(),t._setBucketCheckInterval(),t.emit("listening")})),this._rotateSecrets(),this._verify=e.verify||null,this._host=e.host||null,this._interval=setInterval((function(){t._rotateSecrets()}),3e5),this._runningBucketCheck=!1,this._bucketCheckTimeout=null,this._bucketOutdatedTimeSpan=e.timeBucketOutdated||9e5,this.listening=!1,this.destroyed=!1,this.nodeId=this._rpc.id,this.nodes=this._rpc.nodes;var n=f((function(e,n){var i=e.older,r=e.swap;t._debug("received ping",i),t._checkNodes(i,!1,(function(e,i){if(i)return t._debug("swaping dead node with newer",i),r(i),n();t._debug("no node added, all other nodes ok"),n()}))}));this._rpc.on("ping",(function(e,t){n({older:e,swap:t})})),process.nextTick((function(){t.destroyed||t._bootstrap(!1!==e.bootstrap)})),s.call(this),this._debug("new DHT %s",this.nodeId)}function m(){}function g(e){return Buffer.from(d.sync(e),"hex")}function _(e,t,n){var i={id:e,token:t,v:n.v};return n.sig&&(i.sig=n.sig,i.k=n.k,"number"==typeof n.seq&&(i.seq=n.seq)),i}function v(e,t){return e[t++]+"."+e[t++]+"."+e[t++]+"."+e[t++]}function y(e){var t={seq:e.seq||0,v:e.v};return e.salt&&(t.salt=e.salt),i.encode(t).slice(1,-1)}function b(e){return{host:e.host,port:e.port}}function w(e){if(Buffer.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);if("string"==typeof e)return Buffer.from(e,"hex");throw new Error("Pass a buffer or a string")}o(p,s),p.prototype._setBucketCheckInterval=function(){var e=this;function t(){if(Date.now()-e._rpc.nodes.metadata.lastChange<e._bucketOutdatedTimeSpan)return n();e._pingAll((function(){e.destroyed||(e.nodes.toArray().length<1&&e._bootstrap(!0),n())}))}function n(){if(e._runningBucketCheck&&!e.destroyed){var n=Math.floor(6e4*Math.random()+3e4);e._bucketCheckTimeout=setTimeout(t,n)}}this._runningBucketCheck=!0,n()},p.prototype._pingAll=function(e){this._checkAndRemoveNodes(this.nodes.toArray(),e)},p.prototype.removeBucketCheckInterval=function(){this._runningBucketCheck=!1,clearTimeout(this._bucketCheckTimeout)},p.prototype.updateBucketTimestamp=function(){this._rpc.nodes.metadata.lastChange=Date.now()},p.prototype._checkAndRemoveNodes=function(e,t){var n=this;this._checkNodes(e,!0,(function(e,i){i&&n.removeNode(i.id),t(null,i)}))},p.prototype._checkNodes=function(e,t,n){var i=this;!function e(r){var s=null;for(;r.length&&(s=r.pop()).id&&!t&&!(Date.now()-(s.seen||0)>1e4);)s=null;if(!s)return n(null);i._sendPing(s,(function(t){if(!t)return i.updateBucketTimestamp(),e(r);n(null,s)}))}(e)},p.prototype.addNode=function(e){var t=this;if(e.id){e.id=w(e.id);var n=!!this._rpc.nodes.get(e.id);return this._rpc.nodes.add(e),void(n||(this.emit("node",e),this.updateBucketTimestamp()))}this._sendPing(e,(function(e,n){n&&t.addNode(n)}))},p.prototype.removeNode=function(e){this._rpc.nodes.remove(w(e))},p.prototype._sendPing=function(e,t){var n=this,i=e.id;this._rpc.query(e,{q:"ping"},(function(e,r,s){return e?t(e):r.r&&r.r.id&&Buffer.isBuffer(r.r.id)&&r.r.id.length===n._hashLength?Buffer.isBuffer(i)&&!i.equals(r.r.id)?t(new Error("Unexpected node id")):(n.updateBucketTimestamp(),void t(null,{id:r.r.id,host:s.host||s.address,port:s.port})):t(new Error("Bad reply"))}))},p.prototype.toJSON=function(){var e=this,t={};return Object.keys(this._values.cache).forEach((function(n){var i=e._values.cache[n].value;t[n]={v:i.v.toString("hex"),id:i.id.toString("hex")},null!=i.seq&&(t[n].seq=i.seq),null!=i.sig&&(t[n].sig=i.sig.toString("hex")),null!=i.k&&(t[n].k=i.k.toString("hex"))})),{nodes:this._rpc.nodes.toArray().map(b),values:t}},p.prototype.put=function(e,t){(Buffer.isBuffer(e)||"string"==typeof e)&&(e={v:e});var n=!!e.k;if(void 0===e.v)throw new Error("opts.v not given");if(e.v.length>=1e3)throw new Error("v must be less than 1000 bytes in put()");if(n&&void 0!==e.cas&&"number"!=typeof e.cas)throw new Error("opts.cas must be an integer if provided");if(n&&32!==e.k.length)throw new Error("opts.k ed25519 public key must be 32 bytes");if(n&&"function"!=typeof e.sign&&!Buffer.isBuffer(e.sig))throw new Error("opts.sign function or options.sig signature is required for mutable put");if(n&&e.salt&&e.salt.length>64)throw new Error("opts.salt is > 64 bytes long");if(n&&void 0===e.seq)throw new Error("opts.seq not provided for a mutable update");if(n&&"number"!=typeof e.seq)throw new Error("opts.seq not an integer");return this._put(e,t)},p.prototype._put=function(e,t){t||(t=m);var n=!!e.k,r="string"==typeof e.v?Buffer.from(e.v):e.v,s=n?this._hash(e.salt?Buffer.concat([e.k,e.salt]):e.k):this._hash(i.encode(r)),o=this._tables.get(s.toString("hex"));if(!o)return this._preput(s,e,t);var a={q:"put",a:{id:this._rpc.id,token:null,v:r}};return n?("number"==typeof e.cas&&(a.a.cas=e.cas),e.salt&&(a.a.salt=e.salt),a.a.k=e.k,a.a.seq=e.seq,"function"==typeof e.sign?a.a.sig=e.sign(y(a.a)):Buffer.isBuffer(e.sig)&&(a.a.sig=e.sig)):this._values.set(s.toString("hex"),a.a),this._rpc.queryAll(o.closest(s),a,null,(function(e,n){if(e)return t(e,s,n);t(null,s,n)})),s},p.prototype._preput=function(e,t,n){var i=this;return this._closest(e,{q:"get",a:{id:this._rpc.id,target:e}},null,(function(e,r){if(e)return n(e);i.put(t,n)})),e},p.prototype.get=function(e,t,n){e=w(e),"function"==typeof t&&(n=t,t=null),t||(t={});var r=t.verify||this._verify,s=this._hash,o=this._values.get(e.toString("hex"))||null;if(o&&!1!==t.cache)return o=_(this._rpc.id,null,o),process.nextTick(a);function a(e){if(e)return n(e);n(null,o)}this._closest(e,{q:"get",a:{id:this._rpc.id,target:e}},(function(n){var a=n.r;if(!a||!a.v)return!0;var c=a.k||a.sig;t.salt&&(a.salt=Buffer.from(t.salt));if(c){if(!r||!a.sig||!a.k)return!0;if(!r(a.sig,y(a),a.k))return!0;s(a.salt?Buffer.concat([a.k,a.salt]):a.k).equals(e)&&(!o||a.seq>o.seq)&&(o=a)}else if(s(i.encode(a.v)).equals(e))return o=a,!1;return!0}),a)},p.prototype.announce=function(e,t,n){if("function"==typeof t)return this.announce(e,0,t);e=w(e),n||(n=m);var i=this._tables.get(e.toString("hex"));if(!i)return this._preannounce(e,t,n);if(this._host){var r=this.listening?this.address().port:0;this._addPeer({host:this._host,port:t||r},e,{host:this._host,port:r})}var s={q:"announce_peer",a:{id:this._rpc.id,token:null,info_hash:e,port:t,implied_port:t?0:1}};this._debug("announce %s %d",e,t),this._rpc.queryAll(i.closest(e),s,null,n)},p.prototype._preannounce=function(e,t,n){var i=this;this.lookup(e,(function(r){return i.destroyed?n(new Error("dht is destroyed")):r?n(r):void i.announce(e,t,n)}))},p.prototype.lookup=function(e,t){e=w(e),t||(t=m);var n=this,i=!1;function r(t,i){t||(t=n._peers.get(e.toString("hex"),100));for(var r=function(e){var t=[];try{for(var n=0;n<e.length;n++){var i=e[n].readUInt16BE(4);i&&t.push({host:v(e[n],0),port:i})}}catch(e){}return t}(t),s=0;s<r.length;s++)n.emit("peer",r[s],e,i||null)}return this._debug("lookup %s",e),process.nextTick(r),this._closest(e,{q:"get_peers",a:{id:this._rpc.id,info_hash:e}},(function(e,t){if(i)return!1;e.r.values&&r(e.r.values,t)}),t),function(){i=!0}},p.prototype.address=function(){return this._rpc.address()},p.prototype.listen=function(){this._rpc.bind.apply(this._rpc,arguments)},p.prototype.destroy=function(e){if(this.destroyed)e&&process.nextTick(e);else{this.destroyed=!0;var t=this;clearInterval(this._interval),this.removeBucketCheckInterval(),this._peers.destroy(),this._debug("destroying"),this._rpc.destroy((function(){t.emit("close"),e&&e()}))}},p.prototype._onquery=function(e,t){var n=e.q.toString();if(this._debug("received %s query from %s:%d",n,t.address,t.port),e.a)switch(n){case"ping":return this._rpc.response(t,e,{id:this._rpc.id});case"find_node":return this._onfindnode(e,t);case"get_peers":return this._ongetpeers(e,t);case"announce_peer":return this._onannouncepeer(e,t);case"get":return this._onget(e,t);case"put":return this._onput(e,t)}},p.prototype._onfindnode=function(e,t){var n=e.a.target;if(!n)return this._rpc.error(t,e,[203,"`find_node` missing required `a.target` field"]);this.emit("find_node",n);var i=this._rpc.nodes.closest(n);this._rpc.response(t,e,{id:this._rpc.id},i)},p.prototype._ongetpeers=function(e,t){var n=t.address||t.host,i=e.a.info_hash;if(!i)return this._rpc.error(t,e,[203,"`get_peers` missing required `a.info_hash` field"]);this.emit("get_peers",i);var r={id:this._rpc.id,token:this._generateToken(n)},s=this._peers.get(i.toString("hex"));s.length?(r.values=s,this._rpc.response(t,e,r)):this._rpc.response(t,e,r,this._rpc.nodes.closest(i))},p.prototype._onannouncepeer=function(e,t){var n=t.address||t.host,i=e.a.implied_port?t.port:e.a.port;if(!(!i||"number"!=typeof i||i<=0||i>65535)){var r=e.a.info_hash,s=e.a.token;if(r&&s){if(!this._validateToken(n,s))return this._rpc.error(t,e,[203,"cannot `announce_peer` with bad token"]);this.emit("announce_peer",r,{host:n,port:t.port}),this._addPeer({host:n,port:i},r,{host:n,port:t.port}),this._rpc.response(t,e,{id:this._rpc.id})}}},p.prototype._addPeer=function(e,t,n){this._peers.add(t.toString("hex"),function(e,t){for(var n=Buffer.allocUnsafe(6),i=e.split("."),r=0;r<4;r++)n[r]=parseInt(i[r]||0,10);return n.writeUInt16BE(t,4),n}(e.host,e.port)),this.emit("announce",e,t,n)},p.prototype._onget=function(e,t){var n=t.address||t.host,i=e.a.target;if(i){var r=this._generateToken(n),s=this._values.get(i.toString("hex"));if(this.emit("get",i,s),s)this._rpc.response(t,e,_(this._rpc.id,r,s));else{var o=this._rpc.nodes.closest(i);this._rpc.response(t,e,{id:this._rpc.id,token:r},o)}}},p.prototype._onput=function(e,t){var n=t.address||t.host,r=e.a;if(r){var s=e.a.v;if(s){var o=e.a.id;if(o){var a=r.token;if(a){if(!this._validateToken(n,a))return this._rpc.error(t,e,[203,"cannot `put` with bad token"]);if(s.length>1e3)return this._rpc.error(t,e,[205,"data payload too large"]);var c=!(!r.k&&!r.sig);if(!c||r.k||r.sig){var h=c?this._hash(r.salt?Buffer.concat([r.k,r.salt]):r.k):this._hash(i.encode(s)),l=h.toString("hex");if(this.emit("put",h,s),c){if(!this._verify)return this._rpc.error(t,e,[400,"verification not supported"]);if(!this._verify(r.sig,y(r),r.k))return;var d=this._values.get(l);if(d&&"number"==typeof r.cas&&d.seq!==r.cas)return this._rpc.error(t,e,[301,"CAS mismatch, re-read and try again"]);if(d&&"number"==typeof d.seq&&!(r.seq>d.seq))return this._rpc.error(t,e,[302,"sequence number less than current"]);this._values.set(l,{v:s,k:r.k,salt:r.salt,sig:r.sig,seq:r.seq,id:o})}else this._values.set(l,{v:s,id:o});this._rpc.response(t,e,{id:this._rpc.id})}}}}}},p.prototype._bootstrap=function(e){var t=this;if(!e)return process.nextTick(n);function n(){t.ready||(t._debug("emit ready"),t.ready=!0,t.emit("ready"))}this._rpc.populate(t._rpc.id,{q:"find_node",a:{id:t._rpc.id,target:t._rpc.id}},n)},p.prototype._closest=function(e,t,n,i){var r=this,s=new a({localNodeId:e,numberOfNodesPerKBucket:this._rpc.k});this._rpc.closest(e,t,(function(t,i){if(!t.r)return!0;t.r.token&&t.r.id&&Buffer.isBuffer(t.r.id)&&t.r.id.length===r._hashLength&&(r._debug("found node %s (target: %s)",t.r.id,e),s.add({id:t.r.id,host:i.host||i.address,port:i.port,token:t.r.token}));return!n||n(t,i)}),(function(t,n){if(t)return i(t);r._tables.set(e.toString("hex"),s),r._debug("visited %d nodes",n),i(null,n)}))},p.prototype._debug=function(){if(r.enabled){var e=[].slice.call(arguments);e[0]="["+this.nodeId.toString("hex").substring(0,7)+"] "+e[0];for(var t=1;t<e.length;t++)Buffer.isBuffer(e[t])&&(e[t]=e[t].toString("hex"));r.apply(null,e)}},p.prototype._validateToken=function(e,t){var n=this._generateToken(e,this._secrets[0]),i=this._generateToken(e,this._secrets[1]);return t.equals(n)||t.equals(i)},p.prototype._generateToken=function(e,t){return t||(t=this._secrets[0]),this._hash(Buffer.concat([Buffer.from(e),t]))},p.prototype._rotateSecrets=function(){this._secrets?(this._secrets[1]=this._secrets[0],this._secrets[0]=l(this._hashLength)):this._secrets=[l(this._hashLength),l(this._hashLength)]}},function(e,t,n){"use strict";const i=n(8),{EventEmitter:r}=n(0);function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;++n)if(e[n]!==t[n])return!1;return!0}function o(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class a extends r{constructor(e={}){super(),this.localNodeId=e.localNodeId||i(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||a.distance,this.arbiter=e.arbiter||a.arbiter,this.metadata=Object.assign({},e.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let n=0,i=0;const r=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;i<r;++i)n=256*n+(e[i]^t[i]);for(;i<s;++i)n=256*n+255;return n}add(e){o("contact.id",(e||{}).id);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e.id,t++);const i=this._indexOf(n,e.id);return i>=0?(this._update(n,i,e),this):n.contacts.length<this.numberOfNodesPerKBucket?(n.contacts.push(e),this.emit("added",e),this):n.dontSplit?(this.emit("ping",n.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(n,t),this.add(e))}closest(e,t=1/0){if(o("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let n=[];for(let i=[this.root],r=0;i.length>0&&n.length<t;){const t=i.pop();if(null===t.contacts){const n=this._determineNode(t,e,r++);i.push(t.left===n?t.right:t.left),i.push(n)}else n=n.concat(t.contacts)}return n.map(t=>[this.distance(t.id,e),t]).sort((e,t)=>e[0]-t[0]).slice(0,t).map(e=>e[1])}count(){let e=0;for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e+=n.contacts.length}return e}_determineNode(e,t,n){const i=n>>3,r=n%8;return t.length<=i&&0!==r?e.left:t[i]&1<<7-r?e.right:e.left}get(e){o("id",e);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e,t++);const i=this._indexOf(n,e);return i>=0?n.contacts[i]:null}_indexOf(e,t){for(let n=0;n<e.contacts.length;++n)if(s(e.contacts[n].id,t))return n;return-1}remove(e){o("the id as parameter 1",e);let t=0,n=this.root;for(;null===n.contacts;)n=this._determineNode(n,e,t++);const i=this._indexOf(n,e);if(i>=0){const e=n.contacts.splice(i,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};for(const n of e.contacts)this._determineNode(e,n.id,t).contacts.push(n);e.contacts=null;const n=this._determineNode(e,this.localNodeId,t);(e.left===n?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const n=t.pop();null===n.contacts?t.push(n.right,n.left):e=e.concat(n.contacts)}return e}_update(e,t,n){if(!s(e.contacts[t].id,n.id))throw new Error("wrong index for _update");const i=e.contacts[t],r=this.arbiter(i,n);r===i&&i!==n||(e.contacts.splice(t,1),e.contacts.push(r),this.emit("updated",i,r))}}e.exports=a},function(e,t){e.exports=require("dgram")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("url")},function(e,t,n){const i=n(9),r=n(116),s=n(3),o=n(20),a=n(117),c=n(2),h=n(15);function l(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e)){const t=a(e);if(!t.infoHash)throw new Error("Invalid torrent identifier");return t}if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return a("magnet:?xt=urn:btih:"+e);if(Buffer.isBuffer(e)&&20===e.length)return a("magnet:?xt=urn:btih:"+e.toString("hex"));if(Buffer.isBuffer(e))return function(e){Buffer.isBuffer(e)&&(e=i.decode(e));u(e.info,"info"),u(e.info["name.utf-8"]||e.info.name,"info.name"),u(e.info["piece length"],"info['piece length']"),u(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(e=>{u("number"==typeof e.length,"info.files[0].length"),u(e["path.utf-8"]||e.path,"info.files[0].path")}):u("number"==typeof e.info.length,"info.length");const t={info:e.info,infoBuffer:i.encode(e.info),name:(e.info["name.utf-8"]||e.info.name).toString(),announce:[]};t.infoHash=h.sync(t.infoBuffer),t.infoHashBuffer=Buffer.from(t.infoHash,"hex"),void 0!==e.info.private&&(t.private=!!e.info.private);e["creation date"]&&(t.created=new Date(1e3*e["creation date"]));e["created by"]&&(t.createdBy=e["created by"].toString());Buffer.isBuffer(e.comment)&&(t.comment=e.comment.toString());Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach(e=>{e.forEach(e=>{t.announce.push(e.toString())})}):e.announce&&t.announce.push(e.announce.toString());Buffer.isBuffer(e["url-list"])&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]);t.urlList=(e["url-list"]||[]).map(e=>e.toString()),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList));const n=e.info.files||[e.info];t.files=n.map((e,i)=>{const r=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(e=>e.toString());return{path:c.join.apply(null,[c.sep].concat(r)).slice(1),name:r[r.length-1],length:e.length,offset:n.slice(0,i).reduce(d,0)}}),t.length=n.reduce(d,0);const r=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(r.offset+r.length)%t.pieceLength||t.pieceLength,t.pieces=function(e){const t=[];for(let n=0;n<e.length;n+=20)t.push(e.slice(n,n+20).toString("hex"));return t}(e.info.pieces),t}(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}function d(e,t){return e+t.length}function u(e,t){if(!e)throw new Error("Torrent is missing required field: "+t)}e.exports=l,e.exports.remote=function(e,t){let n;if("function"!=typeof t)throw new Error("second argument must be a Function");try{n=l(e)}catch(e){}n&&n.infoHash?process.nextTick(()=>{t(null,n)}):(i=e,"undefined"!=typeof Blob&&i instanceof Blob?r(e,(e,n)=>{if(e)return t(new Error("Error converting Blob: "+e.message));a(n)}):"function"==typeof o&&/^https?:/.test(e)?o.concat({url:e,timeout:3e4,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},(e,n,i)=>{if(e)return t(new Error("Error downloading torrent: "+e.message));a(i)}):"function"==typeof s.readFile&&"string"==typeof e?s.readFile(e,(e,n)=>{if(e)return t(new Error("Invalid torrent identifier"));a(n)}):process.nextTick(()=>{t(new Error("Invalid torrent identifier"))}));var i;function a(e){try{n=l(e)}catch(e){return t(e)}n&&n.infoHash?t(null,n):t(new Error("Invalid torrent identifier"))}},e.exports.toMagnetURI=a.encode,e.exports.toTorrentFile=function(e){const t={info:e.info};t["announce-list"]=(e.announce||[]).map(e=>(t.announce||(t.announce=e),[e=Buffer.from(e,"utf8")])),t["url-list"]=e.urlList||[],void 0!==e.private&&(t.private=Number(e.private));e.created&&(t["creation date"]=e.created.getTime()/1e3|0);e.createdBy&&(t["created by"]=e.createdBy);e.comment&&(t.comment=e.comment);return i.encode(t)},Buffer.alloc(0)},function(e,t,n){const i=n(16),r=n(1)("webtorrent:peer"),s=n(62),o=n(123);t.createWebRTCPeer=(e,t)=>{const n=new a(e.id,"webrtc");return n.conn=e,n.swarm=t,n.conn.connected?n.onConnect():(n.conn.once("connect",()=>{n.onConnect()}),n.conn.once("error",e=>{n.destroy(e)}),n.startConnectTimeout()),n},t.createTCPIncomingPeer=e=>{const t=`${e.remoteAddress}:${e.remotePort}`,n=new a(t,"tcpIncoming");return n.conn=e,n.addr=t,n.onConnect(),n},t.createTCPOutgoingPeer=(e,t)=>{const n=new a(e,"tcpOutgoing");return n.addr=e,n.swarm=t,n},t.createWebSeedPeer=(e,t)=>{const n=new a(e,"webSeed");return n.swarm=t,n.conn=new o(e,t),n.onConnect(),n};class a{constructor(e,t){this.id=e,this.type=t,r("new %s Peer %s",t,e),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentHandshake=!1}onConnect(){if(this.destroyed)return;this.connected=!0,r("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const e=this.conn;e.once("end",()=>{this.destroy()}),e.once("close",()=>{this.destroy()}),e.once("finish",()=>{this.destroy()}),e.once("error",e=>{this.destroy(e)});const t=this.wire=new s;t.type=this.type,t.once("end",()=>{this.destroy()}),t.once("close",()=>{this.destroy()}),t.once("finish",()=>{this.destroy()}),t.once("error",e=>{this.destroy(e)}),t.once("handshake",(e,t)=>{this.onHandshake(e,t)}),this.startHandshakeTimeout(),e.pipe(t).pipe(e),this.swarm&&!this.sentHandshake&&this.handshake()}onHandshake(e,t){if(!this.swarm)return;if(this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(e!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));r("Peer %s got handshake %s",this.id,e),clearTimeout(this.handshakeTimeout),this.retries=0;let n=this.addr;!n&&this.conn.remoteAddress&&this.conn.remotePort&&(n=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,n),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){const e={dht:!this.swarm.private&&!!this.swarm.client.dht};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,e),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout),this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},"webrtc"===this.type?25e3:5e3),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(e){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,r("destroy %s (error: %s)",this.id,e&&(e.message||e)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const t=this.swarm,n=this.conn,s=this.wire;this.swarm=null,this.conn=null,this.wire=null,t&&s&&i(t.wires,t.wires.indexOf(s)),n&&(n.on("error",()=>{}),n.destroy()),s&&s.destroy(),t&&t.removePeer(this.id)}}},function(e,t,n){const i=n(16),r=n(9),s=n(23),o=n(1)("bittorrent-protocol"),a=n(8),c=n(33),h=n(4),l=Buffer.from("BitTorrent protocol"),d=Buffer.from([0,0,0,0]),u=Buffer.from([0,0,0,1,0]),f=Buffer.from([0,0,0,1,1]),p=Buffer.from([0,0,0,1,2]),m=Buffer.from([0,0,0,1,3]),g=[0,0,0,0,0,0,0,0],_=[0,0,0,3,9,0,0];class v{constructor(e,t,n,i){this.piece=e,this.offset=t,this.length=n,this.callback=i}}class y extends h.Duplex{constructor(){super(),this._debugId=a(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new s(0,{grow:4e5}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=c(),this.downloadSpeed=c(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.once("finish",()=>this._onFinish()),this._parseHandshake()}setKeepAlive(e){this._debug("setKeepAlive %s",e),clearInterval(this._keepAliveInterval),!1!==e&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()}destroy(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())}end(...e){this._debug("end"),this._onUninterested(),this._onChoke(),super.end(...e)}use(e){const t=e.prototype.name;if(!t)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",t);const n=this._nextExt,i=new e(this);function r(){}"function"!=typeof i.onHandshake&&(i.onHandshake=r),"function"!=typeof i.onExtendedHandshake&&(i.onExtendedHandshake=r),"function"!=typeof i.onMessage&&(i.onMessage=r),this.extendedMapping[n]=t,this._ext[t]=i,this[t]=i,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(d)}handshake(e,t,n){let i,r;if("string"==typeof e?(e=e.toLowerCase(),i=Buffer.from(e,"hex")):(i=e,e=i.toString("hex")),"string"==typeof t?r=Buffer.from(t,"hex"):(r=t,t=r.toString("hex")),20!==i.length||20!==r.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,t,n);const s=Buffer.from(g);s[5]|=16,n&&n.dht&&(s[7]|=1),this._push(Buffer.concat([l,s,i,r])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const e=Object.assign({},this.extendedHandshake);e.m={};for(const t in this.extendedMapping){const n=this.extendedMapping[t];e.m[n]=Number(t)}this.extended(0,r.encode(e)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(u)}}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(f))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(p))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(m))}have(e){this._debug("have %d",e),this._message(4,[e],null)}bitfield(e){this._debug("bitfield"),Buffer.isBuffer(e)||(e=e.buffer),this._message(5,[],e)}request(e,t,n,i){return i||(i=()=>{}),this._finished?i(new Error("wire is closed")):this.peerChoking?i(new Error("peer is choking")):(this._debug("request index=%d offset=%d length=%d",e,t,n),this.requests.push(new v(e,t,n,i)),this._updateTimeout(),void this._message(6,[e,t,n],null))}piece(e,t,n){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=n.length,this.uploadSpeed(n.length),this.emit("upload",n.length),this._message(7,[e,t],n)}cancel(e,t,n){this._debug("cancel index=%d offset=%d length=%d",e,t,n),this._callback(this._pull(this.requests,e,t,n),new Error("request was cancelled"),null),this._message(8,[e,t,n],null)}port(e){this._debug("port %d",e);const t=Buffer.from(_);t.writeUInt16BE(e,5),this._push(t)}extended(e,t){if(this._debug("extended ext=%s",e),"string"==typeof e&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),"number"!=typeof e)throw new Error("Unrecognized extension: "+e);{const n=Buffer.from([e]),i=Buffer.isBuffer(t)?t:r.encode(t);this._message(20,[],Buffer.concat([n,i]))}}_read(){}_message(e,t,n){const i=n?n.length:0,r=Buffer.allocUnsafe(5+4*t.length);r.writeUInt32BE(r.length+i-4,0),r[4]=e;for(let e=0;e<t.length;e++)r.writeUInt32BE(t[e],5+4*e);this._push(r),n&&this._push(n)}_push(e){if(!this._finished)return this.push(e)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onHandshake(e,t,n){const i=e.toString("hex"),r=t.toString("hex");let s;for(s in this._debug("got handshake i=%s p=%s exts=%o",i,r,n),this.peerId=r,this.peerIdBuffer=t,this.peerExtensions=n,this.emit("handshake",i,r,n),this._ext)this._ext[s].onHandshake(i,r,n);n.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))}_onBitField(e){this.peerPieces=new s(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(e,t,n){if(this.amChoking)return;this._debug("got request index=%d offset=%d length=%d",e,t,n);const i=(i,s)=>{if(r===this._pull(this.peerRequests,e,t,n))return i?this._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,n,i.message):void this.piece(e,t,s)};var r=new v(e,t,n,i);this.peerRequests.push(r),this.emit("request",e,t,n,i)}_onPiece(e,t,n){this._debug("got piece index=%d offset=%d",e,t),this._callback(this._pull(this.requests,e,t,n.length),null,n),this.downloaded+=n.length,this.downloadSpeed(n.length),this.emit("download",n.length),this.emit("piece",e,t,n)}_onCancel(e,t,n){this._debug("got cancel index=%d offset=%d length=%d",e,t,n),this._pull(this.peerRequests,e,t,n),this.emit("cancel",e,t,n)}_onPort(e){this._debug("got port %d",e),this.emit("port",e)}_onExtended(e,t){if(0===e){let e,n;try{e=r.decode(t)}catch(e){this._debug("ignoring invalid extended handshake: %s",e.message||e)}if(!e)return;if(this.peerExtendedHandshake=e,"object"==typeof e.m)for(n in e.m)this.peerExtendedMapping[n]=Number(e.m[n].toString());for(n in this._ext)this.peerExtendedMapping[n]&&this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(e,t,n){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){const e=1===this._buffer.length?this._buffer[0]:Buffer.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[e.slice(this._parserSize)]:[],this._parser(e.slice(0,this._parserSize))}n(null)}_callback(e,t,n){e&&(this._clearTimeout(),this.peerChoking||this._finished||this._updateTimeout(),e.callback(t,n))}_clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}_updateTimeout(){this._timeoutMs&&this.requests.length&&!this._timeout&&(this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref())}_parse(e,t){this._parserSize=e,this._parser=t}_onMessageLength(e){const t=e.readUInt32BE(0);t>0?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}}_parseHandshake(){this._parse(1,e=>{const t=e.readUInt8(0);this._parse(t+48,e=>{const n=e.slice(0,t);if("BitTorrent protocol"!==n.toString())return this._debug("Error: wire not speaking BitTorrent protocol (%s)",n.toString()),void this.end();e=e.slice(t),this._onHandshake(e.slice(8,28),e.slice(28,48),{dht:!!(1&e[7]),extended:!!(16&e[5])}),this._parse(4,this._onMessageLength)})})}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...e){e[0]=`[${this._debugId}] ${e[0]}`,o(...e)}_pull(e,t,n,r){for(let s=0;s<e.length;s++){const o=e[s];if(o.piece===t&&o.offset===n&&o.length===r)return i(e,s),o}return null}}e.exports=y},function(e,t){const n=/^\[?([^\]]+)\]?:(\d+)$/;let i={},r=0;e.exports=function(t){if(1e5===r&&e.exports.reset(),!i[t]){const e=n.exec(t);if(!e)throw new Error("invalid addr: "+t);i[t]=[e[1],Number(e[2])],r+=1}return i[t]},e.exports.reset=function(){i={},r=0}},function(e,t,n){(function(e){(function(){var t,n,i,r,s,o,a;n={},null!==e&&e.exports?e.exports=n:this.ipaddr=n,a=function(e,t,n,i){var r,s;if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(r=0;i>0;){if((s=n-i)<0&&(s=0),e[r]>>s!=t[r]>>s)return!1;i-=n,r+=1}return!0},n.subnetMatch=function(e,t,n){var i,r,s,o,a;for(s in null==n&&(n="unicast"),t)for(!(o=t[s])[0]||o[0]instanceof Array||(o=[o]),i=0,r=o.length;i<r;i++)if(a=o[i],e.kind()===a[0].kind()&&e.match.apply(e,a))return s;return n},n.IPv4=function(){function e(e){var t,n,i;if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");for(t=0,n=e.length;t<n;t++)if(!(0<=(i=e[t])&&i<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.kind=function(){return"ipv4"},e.prototype.toString=function(){return this.octets.join(".")},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return a(this.octets,e.octets,8,t)},e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},e.prototype.toIPv4MappedAddress=function(){return n.IPv6.parse("::ffff:"+this.toString())},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,i,r,s,o;for(o={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},e=0,r=!1,t=n=3;n>=0;t=n+=-1){if(!((i=this.octets[t])in o))return null;if(s=o[i],r&&0!==s)return null;8!==s&&(r=!0),e+=s}return 32-e},e}(),i="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp("^"+i+"\\."+i+"\\."+i+"\\."+i+"$","i"),longValue:new RegExp("^"+i+"$","i")},n.IPv4.parser=function(e){var t,n,i,s,o;if(n=function(e){return"0"===e[0]&&"x"!==e[1]?parseInt(e,8):parseInt(e)},t=e.match(r.fourOctet))return function(){var e,r,s,o;for(o=[],e=0,r=(s=t.slice(1,6)).length;e<r;e++)i=s[e],o.push(n(i));return o}();if(t=e.match(r.longValue)){if((o=n(t[1]))>4294967295||o<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t;for(t=[],s=e=0;e<=24;s=e+=8)t.push(o>>s&255);return t}().reverse()}return null},n.IPv6=function(){function e(e,t){var n,i,r,s,o,a;if(16===e.length)for(this.parts=[],n=i=0;i<=14;n=i+=2)this.parts.push(e[n]<<8|e[n+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0,s=(a=this.parts).length;r<s;r++)if(!(0<=(o=a[r])&&o<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.kind=function(){return"ipv6"},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e.prototype.toRFC5952String=function(){var e,t,n,i,r;for(i=/((^|:)(0(:|$)){2,})/g,r=this.toNormalizedString(),e=0,t=-1;n=i.exec(r);)n[0].length>t&&(e=n.index,t=n[0].length);return t<0?r:r.substring(0,e)+"::"+r.substring(e+t)},e.prototype.toByteArray=function(){var e,t,n,i,r;for(e=[],t=0,n=(r=this.parts).length;t<n;t++)i=r[t],e.push(i>>8),e.push(255&i);return e},e.prototype.toNormalizedString=function(){var e,t,n;return e=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.parts).length;e<n;e++)t=i[e],r.push(t.toString(16));return r}.call(this).join(":"),n="",this.zoneId&&(n="%"+this.zoneId),e+n},e.prototype.toFixedLengthString=function(){var e,t,n;return e=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.parts).length;e<n;e++)t=i[e],r.push(t.toString(16).padStart(4,"0"));return r}.call(this).join(":"),n="",this.zoneId&&(n="%"+this.zoneId),e+n},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return a(this.parts,e.parts,16,t)},e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.toIPv4Address=function(){var e,t,i;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return e=(i=this.parts.slice(-2))[0],t=i[1],new n.IPv4([e>>8,255&e,t>>8,255&t])},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,i,r,s,o;for(o={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},e=0,r=!1,t=n=7;n>=0;t=n+=-1){if(!((i=this.parts[t])in o))return null;if(s=o[i],r&&0!==s)return null;16!==s&&(r=!0),e+=s}return 128-e},e}(),s="(?:[0-9a-f]+::?)+",o={zoneIndex:new RegExp("%[0-9a-z]{1,}","i"),native:new RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?(%[0-9a-z]{1,})?$","i"),transitional:new RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+i+"\\."+i+"\\."+i+"\\."+i+"(%[0-9a-z]{1,})?$","i")},t=function(e,t){var n,i,r,s,a,c;if(e.indexOf("::")!==e.lastIndexOf("::"))return null;for((c=(e.match(o.zoneIndex)||[])[0])&&(c=c.substring(1),e=e.replace(/%.+$/,"")),n=0,i=-1;(i=e.indexOf(":",i+1))>=0;)n++;if("::"===e.substr(0,2)&&n--,"::"===e.substr(-2,2)&&n--,n>t)return null;for(a=t-n,s=":";a--;)s+="0:";return":"===(e=e.replace("::",s))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){var t,n,i,s;for(s=[],t=0,n=(i=e.split(":")).length;t<n;t++)r=i[t],s.push(parseInt(r,16));return s}(),zoneId:c}},n.IPv6.parser=function(e){var n,i,r,s,a,c,h;if(o.native.test(e))return t(e,8);if((s=e.match(o.transitional))&&(h=s[6]||"",(n=t(s[1].slice(0,-1)+h,6)).parts)){for(i=0,r=(c=[parseInt(s[2]),parseInt(s[3]),parseInt(s[4]),parseInt(s[5])]).length;i<r;i++)if(!(0<=(a=c[i])&&a<=255))return null;return n.parts.push(c[0]<<8|c[1]),n.parts.push(c[2]<<8|c[3]),{parts:n.parts,zoneId:n.zoneId}}return null},n.IPv4.isIPv4=n.IPv6.isIPv6=function(e){return null!==this.parser(e)},n.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return e,!1}},n.IPv4.isValidFourPartDecimal=function(e){return!(!n.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},n.IPv6.isValid=function(e){var t;if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{return new this((t=this.parser(e)).parts,t.zoneId),!0}catch(e){return e,!1}},n.IPv4.parse=function(e){var t;if(null===(t=this.parser(e)))throw new Error("ipaddr: string is not formatted like ip address");return new this(t)},n.IPv6.parse=function(e){var t;if(null===(t=this.parser(e)).parts)throw new Error("ipaddr: string is not formatted like ip address");return new this(t.parts,t.zoneId)},n.IPv4.parseCIDR=function(e){var t,n,i;if((n=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(n[2]))>=0&&t<=32)return i=[this.parse(n[1]),t],Object.defineProperty(i,"toString",{value:function(){return this.join("/")}}),i;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},n.IPv4.subnetMaskFromPrefixLength=function(e){var t,n,i;if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(i=[0,0,0,0],n=0,t=Math.floor(e/8);n<t;)i[n]=255,n++;return t<4&&(i[t]=Math.pow(2,e%8)-1<<8-e%8),new this(i)},n.IPv4.broadcastAddressFromCIDR=function(e){var t,n,i,r,s;try{for(i=(t=this.parseCIDR(e))[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),r=[],n=0;n<4;)r.push(parseInt(i[n],10)|255^parseInt(s[n],10)),n++;return new this(r)}catch(e){throw e,new Error("ipaddr: the address does not have IPv4 CIDR format")}},n.IPv4.networkAddressFromCIDR=function(e){var t,n,i,r,s;try{for(i=(t=this.parseCIDR(e))[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),r=[],n=0;n<4;)r.push(parseInt(i[n],10)&parseInt(s[n],10)),n++;return new this(r)}catch(e){throw e,new Error("ipaddr: the address does not have IPv4 CIDR format")}},n.IPv6.parseCIDR=function(e){var t,n,i;if((n=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(n[2]))>=0&&t<=128)return i=[this.parse(n[1]),t],Object.defineProperty(i,"toString",{value:function(){return this.join("/")}}),i;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},n.isValid=function(e){return n.IPv6.isValid(e)||n.IPv4.isValid(e)},n.parse=function(e){if(n.IPv6.isValid(e))return n.IPv6.parse(e);if(n.IPv4.isValid(e))return n.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},n.parseCIDR=function(e){try{return n.IPv6.parseCIDR(e)}catch(t){t;try{return n.IPv4.parseCIDR(e)}catch(e){throw e,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},n.fromByteArray=function(e){var t;if(4===(t=e.length))return new n.IPv4(e);if(16===t)return new n.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},n.process=function(e){var t;return"ipv6"===(t=this.parse(e)).kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t}}).call(this)}).call(this,n(65)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";const i=n(0),r=n(57),s=n(22),o=n(21),a=n(135),{randomBytes:c,createHash:h}=n(18),{URL:l}=n(59),d=n(25),u=n(68),f=n(70),{BINARY_TYPES:p,EMPTY_BUFFER:m,GUID:g,kStatusCode:_,kWebSocket:v,NOOP:y}=n(17),{addEventListener:b,removeEventListener:w}=n(141),{format:x,parse:k}=n(71),{toBuffer:E}=n(26),S=["CONNECTING","OPEN","CLOSING","CLOSED"],M=[8,13];class I extends i{constructor(e,t,n){super(),this.readyState=I.CONNECTING,this.protocol="",this._binaryType=p[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function e(t,n,i,o){const a={protocolVersion:M[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0};if(!M.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${M.join(", ")})`);let u;n instanceof l?(u=n,t.url=n.href):(u=new l(n),t.url=n);const f="ws+unix:"===u.protocol;if(!(u.host||f&&u.pathname))throw new Error("Invalid URL: "+t.url);const p="wss:"===u.protocol||"https:"===u.protocol,m=p?443:80,_=c(16).toString("base64"),v=p?r.get:s.get;let y;a.createConnection=p?B:C,a.defaultPort=a.defaultPort||m,a.port=u.port||m,a.host=u.hostname.startsWith("[")?u.hostname.slice(1,-1):u.hostname,a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":_,Connection:"Upgrade",Upgrade:"websocket",...a.headers},a.path=u.pathname+u.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(y=new d(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=x({[d.extensionName]:y.offer()}));i&&(a.headers["Sec-WebSocket-Protocol"]=i);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(u.username||u.password)&&(a.auth=`${u.username}:${u.password}`);if(f){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let b=t._req=v(a);a.timeout&&b.on("timeout",()=>{T(t,b,"Opening handshake has timed out")});b.on("error",e=>{t._req.aborted||(b=t._req=null,t.readyState=I.CLOSING,t.emit("error",e),t.emitClose())}),b.on("response",r=>{const s=r.headers.location,c=r.statusCode;if(s&&a.followRedirects&&c>=300&&c<400){if(++t._redirects>a.maxRedirects)return void T(t,b,"Maximum redirects exceeded");b.abort();const r=new l(s,n);e(t,r,i,o)}else t.emit("unexpected-response",b,r)||T(t,b,"Unexpected server response: "+r.statusCode)}),b.on("upgrade",(e,n,r)=>{if(t.emit("upgrade",e),t.readyState!==I.CONNECTING)return;b=t._req=null;const s=h("sha1").update(_+g).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void T(t,n,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],c=(i||"").split(/, */);let l;if(!i&&o?l="Server sent a subprotocol but none was requested":i&&!o?l="Server sent no subprotocol":o&&!c.includes(o)&&(l="Server sent an invalid subprotocol"),l)T(t,n,l);else{if(o&&(t.protocol=o),y)try{const n=k(e.headers["sec-websocket-extensions"]);n[d.extensionName]&&(y.accept(n[d.extensionName]),t._extensions[d.extensionName]=y)}catch(e){return void T(t,n,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(n,r,a.maxPayload)}})}(this,e,t,n)):this._isServer=!0}get CONNECTING(){return I.CONNECTING}get CLOSING(){return I.CLOSING}get CLOSED(){return I.CLOSED}get OPEN(){return I.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const i=new u(this._binaryType,this._extensions,this._isServer,n);this._sender=new f(e,this._extensions),this._receiver=i,this._socket=e,i[v]=this,e[v]=this,i.on("conclude",O),i.on("drain",L),i.on("error",R),i.on("message",P),i.on("ping",U),i.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",q),e.on("data",D),e.on("end",F),e.on("error",H),this.readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this.readyState=I.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this.readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING){const e="WebSocket was closed before the connection was established";return T(this,this._req,e)}this.readyState!==I.CLOSING?(this.readyState=I.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===I.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,n)):A(this,e,n)}pong(e,t,n){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===I.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,n)):A(this,e,n)}send(e,t,n){if(this.readyState===I.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==I.OPEN)return void A(this,e,n);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[d.extensionName]||(i.compress=!1),this._sender.send(e||m,i,n)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING){const e="WebSocket was closed before the connection was established";return T(this,this._req,e)}this._socket&&(this.readyState=I.CLOSING,this._socket.destroy())}}}function C(e){return e.path=e.socketPath,o.connect(e)}function B(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),a.connect(e)}function T(e,t,n){e.readyState=I.CLOSING;const i=new Error(n);Error.captureStackTrace(i,T),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function A(e,t,n){if(t){const n=E(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){n(new Error(`WebSocket is not open: readyState ${e.readyState} (${S[e.readyState]})`))}}function O(e,t){const n=this[v];n._socket.removeListener("data",D),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function L(){this[v]._socket.resume()}function R(e){const t=this[v];t._socket.removeListener("data",D),t.readyState=I.CLOSING,t._closeCode=e[_],t.emit("error",e),t._socket.destroy()}function N(){this[v].emitClose()}function P(e){this[v].emit("message",e)}function U(e){const t=this[v];t.pong(e,!t._isServer,y),t.emit("ping",e)}function j(e){this[v].emit("pong",e)}function q(){const e=this[v];this.removeListener("close",q),this.removeListener("end",F),e.readyState=I.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",D),this[v]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",N),e._receiver.on("finish",N))}function D(e){this[v]._receiver.write(e)||this.pause()}function F(){const e=this[v];e.readyState=I.CLOSING,e._receiver.end(),this.end()}function H(){const e=this[v];this.removeListener("error",H),this.on("error",y),e&&(e.readyState=I.CLOSING,this.destroy())}S.forEach((e,t)=>{I[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(I.prototype,"on"+e,{get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const n=this.listeners(e);for(let t=0;t<n.length;t++)n[t]._listener&&this.removeListener(e,n[t]);this.addEventListener(e,t)}})}),I.prototype.addEventListener=b,I.prototype.removeEventListener=w,e.exports=I},function(e,t,n){var i=n(3),r=n(2),s=n(19),o=require,a=process.versions.modules,c=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",h=s.arch(),l=s.platform();function d(e){return o(d.path(e))}function u(e,t){try{var n=i.readdirSync(e).filter(t);return n[0]&&r.join(e,n[0])}catch(e){return null}}function f(e){return e===c+"-napi.node"}function p(e){return"node-napi.node"===e}function m(e){var t=e.split("-");return t[0]===c&&t[1]===a+".node"}function g(e){return/\.node$/.test(e)}e.exports=d,d.path=function(e){e=r.resolve(e||".");try{var t=o(r.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var n=u(r.join(e,"build/Release"),g);if(n)return n;var i=u(r.join(e,"build/Debug"),g);if(i)return i;var s=u(r.join(e,"prebuilds/"+l+"-"+h),m);if(s)return s;var d=u(r.join(e,"prebuilds/"+l+"-"+h),f);if(d)return d;var _=u(r.join(e,"prebuilds/"+l+"-"+h),p);if(_)return _;throw new Error("No native build was found for runtime="+c+" abi="+a+" platform="+l+" arch="+h)}},function(e,t,n){"use strict";const{Writable:i}=n(12),r=n(25),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=n(17),{concat:h,toArrayBuffer:l,unmask:d}=n(26),{isValidStatusCode:u,isValidUTF8:f}=n(69);function p(e,t,n,i){const r=new e(n?"Invalid WebSocket frame: "+t:t);return Error.captureStackTrace(r,p),r[a]=i,r}e.exports=class extends i{constructor(e,t,n,i){super(),this._binaryType=e||s[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode "+this._opcode,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,"invalid opcode "+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,p(RangeError,"invalid payload length "+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?l(h(t,e)):t,this.emit("message",n)}else{const n=h(t,e);if(!f(n))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!u(t))return p(RangeError,"invalid status code "+t,!0,1002);const n=e.slice(2);if(!f(n))return p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},function(e,t,n){"use strict";try{const e=n(139);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,n){"use strict";const{randomFillSync:i}=n(18),r=n(25),{EMPTY_BUFFER:s}=n(17),{isValidStatusCode:o}=n(69),{mask:a,toBuffer:c}=n(26),h=Buffer.alloc(4);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;let r=t.mask?6:2,s=e.length;e.length>=65536?(r+=8,s=127):e.length>125&&(r+=2,s=126);const o=Buffer.allocUnsafe(n?e.length+r:r);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(e.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(i(h,0,4),o[1]|=128,o[r-4]=h[0],o[r-3]=h[1],o[r-2]=h[2],o[r-1]=h[3],n?(a(e,h,o,r,e.length),[o]):(a(e,h,e,0,e.length),[o,e])):[o,e]}close(e,t,n,i){let r;if(void 0===e)r=s;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)r=Buffer.allocUnsafe(2),r.writeUInt16BE(e,0);else{const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+n),r.writeUInt16BE(e,0),r.write(t,2)}}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(e,t,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,c.readOnly,n]):this.doPing(i,t,c.readOnly,n)}doPing(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,c.readOnly,n]):this.doPong(i,t,c.readOnly,n)}doPong(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=c(e),s=this._extensions[r.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),s){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(l.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:c.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(l.frame(e,n),i);const s=this._extensions[r.extensionName];this._deflating=!0,s.compress(e,n.fin,(e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t][4];"function"==typeof n&&n(e)}}else this._deflating=!1,n.readOnly=!1,this.sendFrame(l.frame(t,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},function(e,t,n){"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let n,s,o=Object.create(null),a=!1,c=!1,h=!1,l=-1,d=-1,u=0;for(;u<e.length;u++){const f=e.charCodeAt(u);if(void 0===n)if(-1===d&&1===i[f])-1===l&&(l=u);else if(32===f||9===f)-1===d&&-1!==l&&(d=u);else{if(59!==f&&44!==f)throw new SyntaxError("Unexpected character at index "+u);{if(-1===l)throw new SyntaxError("Unexpected character at index "+u);-1===d&&(d=u);const i=e.slice(l,d);44===f?(r(t,i,o),o=Object.create(null)):n=i,l=d=-1}}else if(void 0===s)if(-1===d&&1===i[f])-1===l&&(l=u);else if(32===f||9===f)-1===d&&-1!==l&&(d=u);else if(59===f||44===f){if(-1===l)throw new SyntaxError("Unexpected character at index "+u);-1===d&&(d=u),r(o,e.slice(l,d),!0),44===f&&(r(t,n,o),o=Object.create(null),n=void 0),l=d=-1}else{if(61!==f||-1===l||-1!==d)throw new SyntaxError("Unexpected character at index "+u);s=e.slice(l,u),l=d=-1}else if(c){if(1!==i[f])throw new SyntaxError("Unexpected character at index "+u);-1===l?l=u:a||(a=!0),c=!1}else if(h)if(1===i[f])-1===l&&(l=u);else if(34===f&&-1!==l)h=!1,d=u;else{if(92!==f)throw new SyntaxError("Unexpected character at index "+u);c=!0}else if(34===f&&61===e.charCodeAt(u-1))h=!0;else if(-1===d&&1===i[f])-1===l&&(l=u);else if(-1===l||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError("Unexpected character at index "+u);{if(-1===l)throw new SyntaxError("Unexpected character at index "+u);-1===d&&(d=u);let i=e.slice(l,d);a&&(i=i.replace(/\\/g,""),a=!1),r(o,s,i),44===f&&(r(t,n,o),o=Object.create(null),n=void 0),s=void 0,l=d=-1}}else-1===d&&(d=u)}if(-1===l||h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=u);const f=e.slice(l,d);return void 0===n?r(t,f,o):(void 0===s?r(o,f,!0):r(o,s,a?f.replace(/\\/g,""):f),r(t,n,o)),t}}},function(e,t,n){e.exports=y;var i=n(3),r=n(73),s=n(38),o=(s.Minimatch,n(6)),a=n(0).EventEmitter,c=n(2),h=n(37),l=n(39),d=n(154),u=n(74),f=(u.alphasort,u.alphasorti,u.setopts),p=u.ownProp,m=n(155),g=(n(5),u.childrenIgnored),_=u.isIgnored,v=n(7);function y(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new w(e,t,n)}y.sync=d;var b=y.GlobSync=d.GlobSync;function w(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof w))return new w(e,t,n);f(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=v(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var r=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return o();for(var s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,o);function o(){--r._processing,r._processing<=0&&r._finish()}}y.glob=y,y.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}({},t);n.noprocess=!0;var i=new w(e,n).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var r=0;r<i[0].length;r++)if("string"!=typeof i[0][r])return!0;return!1},y.Glob=w,o(w,a),w.prototype._finish=function(){if(h(this instanceof w),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();u.finish(this),this.emit("end",this.found)}},w.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--e&&t._finish()}},w.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var i=Object.keys(n),s=this,o=i.length;if(0===o)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(n,i){n=s._makeAbs(n),r.realpath(n,s.realpathCache,(function(i,r){i?"stat"===i.syscall?a[n]=!0:s.emit("error",i):a[r]=!0,0==--o&&(s.matches[e]=a,t())}))}))},w.prototype._mark=function(e){return u.mark(this,e)},w.prototype._makeAbs=function(e){return u.makeAbs(this,e)},w.prototype.abort=function(){this.aborted=!0,this.emit("abort")},w.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},w.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<i.length;t++){var r=i[t];this._processing--,this._process(r[0],r[1],r[2],r[3])}}}},w.prototype._process=function(e,t,n,i){if(h(this instanceof w),h("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,i]);else{for(var r,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:r=null;break;default:r=e.slice(0,o).join("/")}var a,c=e.slice(o);null===r?a=".":l(r)||l(e.join("/"))?(r&&l(r)||(r="/"+r),a=r):a=r;var d=this._makeAbs(a);if(g(this,a))return i();c[0]===s.GLOBSTAR?this._processGlobStar(r,a,d,c,t,n,i):this._processReaddir(r,a,d,c,t,n,i)}},w.prototype._processReaddir=function(e,t,n,i,r,s,o){var a=this;this._readdir(n,s,(function(c,h){return a._processReaddir2(e,t,n,i,r,s,h,o)}))},w.prototype._processReaddir2=function(e,t,n,i,r,s,o,a){if(!o)return a();for(var h=i[0],l=!!this.minimatch.negate,d=h._glob,u=this.dot||"."===d.charAt(0),f=[],p=0;p<o.length;p++){if("."!==(g=o[p]).charAt(0)||u)(l&&!e?!g.match(h):g.match(h))&&f.push(g)}var m=f.length;if(0===m)return a();if(1===i.length&&!this.mark&&!this.stat){this.matches[r]||(this.matches[r]=Object.create(null));for(p=0;p<m;p++){var g=f[p];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(r,g)}return a()}i.shift();for(p=0;p<m;p++){g=f[p];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(i),r,s,a)}a()},w.prototype._emitMatch=function(e,t){if(!this.aborted&&!_(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var r=this.statCache[n];r&&this.emit("stat",t,r),this.emit("match",t)}}},w.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,r=m("lstat\0"+e,(function(i,r){if(i&&"ENOENT"===i.code)return t();var s=r&&r.isSymbolicLink();n.symlinks[e]=s,s||!r||r.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));r&&i.lstat(e,r)}},w.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=m("readdir\0"+e+"\0"+t,n))){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e,n);if(p(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}i.readdir(e,function(e,t,n){return function(i,r){i?e._readdirError(t,i,n):e._readdirEntries(t,r,n)}}(this,e,n))}},w.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var r=t[i];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,n(null,t)}},w.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);r.path=this.cwd,r.code=t.code,this.emit("error",r),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},w.prototype._processGlobStar=function(e,t,n,i,r,s,o){var a=this;this._readdir(n,s,(function(c,h){a._processGlobStar2(e,t,n,i,r,s,h,o)}))},w.prototype._processGlobStar2=function(e,t,n,i,r,s,o,a){if(!o)return a();var c=i.slice(1),h=e?[e]:[],l=h.concat(c);this._process(l,r,!1,a);var d=this.symlinks[n],u=o.length;if(d&&s)return a();for(var f=0;f<u;f++){if("."!==o[f].charAt(0)||this.dot){var p=h.concat(o[f],c);this._process(p,r,!0,a);var m=h.concat(o[f],i);this._process(m,r,!0,a)}}a()},w.prototype._processSimple=function(e,t,n){var i=this;this._stat(e,(function(r,s){i._processSimple2(e,t,r,s,n)}))},w.prototype._processSimple2=function(e,t,n,i,r){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return r();if(e&&l(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),s&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),r()},w.prototype._stat=function(e,t){var n=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&p(this.cache,n)){var s=this.cache[n];if(Array.isArray(s)&&(s="DIR"),!r||"DIR"===s)return t(null,s);if(r&&"FILE"===s)return t()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return t(null,o);var a=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===a?t():t(null,a,o)}var c=this,h=m("stat\0"+n,(function(r,s){if(s&&s.isSymbolicLink())return i.stat(n,(function(i,r){i?c._stat2(e,n,null,s,t):c._stat2(e,n,i,r,t)}));c._stat2(e,n,r,s,t)}));h&&i.lstat(n,h)},w.prototype._stat2=function(e,t,n,i,r){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,r();var s="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return r(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,s&&"FILE"===o?r():r(null,o,i)}},function(e,t,n){e.exports=l,l.realpath=l,l.sync=d,l.realpathSync=d,l.monkeypatch=function(){i.realpath=l,i.realpathSync=d},l.unmonkeypatch=function(){i.realpath=r,i.realpathSync=s};var i=n(3),r=i.realpath,s=i.realpathSync,o=process.version,a=/^v[0-5]\./.test(o),c=n(150);function h(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,n){if(a)return r(e,t,n);"function"==typeof t&&(n=t,t=null),r(e,t,(function(i,r){h(i)?c.realpath(e,t,n):n(i,r)}))}function d(e,t){if(a)return s(e,t);try{return s(e,t)}catch(n){if(h(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=h,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,n),e.changedCwd=!1;var s=process.cwd();i(n,"cwd")?(e.cwd=r.resolve(n.cwd),e.changedCwd=e.cwd!==s):e.cwd=s;e.root=n.root||r.resolve(e.cwd,"/"),e.root=r.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=o(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),i=0,r=e.matches.length;i<r;i++){var s=e.matches[i];if(s&&0!==Object.keys(s).length){var o=Object.keys(s);t?n.push.apply(n,o):o.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:h));if(e.mark){for(i=0;i<n.length;i++)n[i]=e._mark(n[i]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),i=e.cache[t]||e.cache[d(e,t)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n})))}e.ignore.length&&(n=n.filter((function(t){return!u(e,t)})));e.found=n},t.mark=function(e,t){var n=d(e,t),i=e.cache[n],r=t;if(i){var s="DIR"===i||Array.isArray(i),o="/"===t.slice(-1);if(s&&!o?r+="/":!s&&o&&(r=r.slice(0,-1)),r!==t){var a=d(e,r);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return r},t.isIgnored=u,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var r=n(2),s=n(38),o=n(39),a=s.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function h(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var n=t;return n="/"===t.charAt(0)?r.join(e.root,t):o(t)||""===t?t:e.changedCwd?r.resolve(e.cwd,t):r.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function u(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t,n){e.exports=a;var i=n(6),r=n(4),s=n(171),o="undefined"!=typeof window&&window.MediaSource;function a(e,t){var n=this;if(!(n instanceof a))return new a(e,t);if(!o)throw new Error("web browser lacks MediaSource support");t||(t={}),n._debug=t.debug,n._bufferDuration=t.bufferDuration||60,n._elem=e,n._mediaSource=new o,n._streams=[],n.detailedError=null,n._errorHandler=function(){n._elem.removeEventListener("error",n._errorHandler),n._streams.slice().forEach((function(e){e.destroy(n._elem.error)}))},n._elem.addEventListener("error",n._errorHandler),n._elem.src=window.URL.createObjectURL(n._mediaSource)}function c(e,t){var n=this;if(r.Writable.call(n),n._wrapper=e,n._elem=e._elem,n._mediaSource=e._mediaSource,n._allStreams=e._streams,n._allStreams.push(n),n._bufferDuration=e._bufferDuration,n._sourceBuffer=null,n._debugBuffers=[],n._openHandler=function(){n._onSourceOpen()},n._flowHandler=function(){n._flow()},n._errorHandler=function(e){n.destroyed||n.emit("error",e)},"string"==typeof t)n._type=t,"open"===n._mediaSource.readyState?n._createSourceBuffer():n._mediaSource.addEventListener("sourceopen",n._openHandler);else if(null===t._sourceBuffer)t.destroy(),n._type=t._type,n._mediaSource.addEventListener("sourceopen",n._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),n._type=t._type,n._sourceBuffer=t._sourceBuffer,n._debugBuffers=t._debugBuffers,n._sourceBuffer.addEventListener("updateend",n._flowHandler),n._sourceBuffer.addEventListener("error",n._errorHandler)}n._elem.addEventListener("timeupdate",n._flowHandler),n.on("error",(function(e){n._wrapper.error(e)})),n.on("finish",(function(){if(!n.destroyed&&(n._finished=!0,n._allStreams.every((function(e){return e._finished})))){n._wrapper._dumpDebugData();try{n._mediaSource.endOfStream()}catch(e){}}}))}a.prototype.createWriteStream=function(e){return new c(this,e)},a.prototype.error=function(e){this.detailedError||(this.detailedError=e),this._dumpDebugData();try{this._mediaSource.endOfStream("decode")}catch(e){}try{window.URL.revokeObjectURL(this._elem.src)}catch(e){}},a.prototype._dumpDebugData=function(){this._debug&&(this._debug=!1,this._streams.forEach((function(e,t){var n,i,r;n=e._debugBuffers,i="mediasource-stream-"+t,(r=document.createElement("a")).href=window.URL.createObjectURL(new window.Blob(n)),r.download=i,r.click()})))},i(c,r.Writable),c.prototype._onSourceOpen=function(){this.destroyed||(this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._createSourceBuffer())},c.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._allStreams.splice(this._allStreams.indexOf(this),1),this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._elem.removeEventListener("timeupdate",this._flowHandler),this._sourceBuffer&&(this._sourceBuffer.removeEventListener("updateend",this._flowHandler),this._sourceBuffer.removeEventListener("error",this._errorHandler),"open"===this._mediaSource.readyState&&this._sourceBuffer.abort()),e&&this.emit("error",e),this.emit("close"))},c.prototype._createSourceBuffer=function(){if(!this.destroyed)if(o.isTypeSupported(this._type)){if(this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.addEventListener("updateend",this._flowHandler),this._sourceBuffer.addEventListener("error",this._errorHandler),this._cb){var e=this._cb;this._cb=null,e()}}else this.destroy(new Error("The provided type is not supported"))},c.prototype._write=function(e,t,n){var i=this;if(!i.destroyed)if(i._sourceBuffer){if(i._sourceBuffer.updating)return n(new Error("Cannot append buffer while source buffer updating"));var r=s(e);i._wrapper._debug&&i._debugBuffers.push(r);try{i._sourceBuffer.appendBuffer(r)}catch(e){return void i.destroy(e)}i._cb=n}else i._cb=function(r){if(r)return n(r);i._write(e,t,n)}},c.prototype._flow=function(){if(!this.destroyed&&this._sourceBuffer&&!this._sourceBuffer.updating&&!("open"===this._mediaSource.readyState&&this._getBufferDuration()>this._bufferDuration)&&this._cb){var e=this._cb;this._cb=null,e()}};c.prototype._getBufferDuration=function(){for(var e=this._sourceBuffer.buffered,t=this._elem.currentTime,n=-1,i=0;i<e.length;i++){var r=e.start(i),s=e.end(i)+0;if(r>t)break;(n>=0||t<=s)&&(n=s)}var o=n-t;return o<0&&(o=0),o}},function(e,t,n){e.exports=async function(e,t){const n=await i(e,t);return URL.createObjectURL(n)};const i=n(77)},function(e,t){e.exports=function(e,t){if(null!=t&&"string"!=typeof t)throw new Error("Invalid mimetype, expected string.");return new Promise((n,i)=>{const r=[];e.on("data",e=>r.push(e)).once("end",()=>{const e=null!=t?new Blob(r,{type:t}):new Blob(r);n(e)}).once("error",i)})}},function(e,t,n){var i=n(178),r=Math.pow(2,32);t.encodingLength=function(){return 8},t.encode=function(e,t,n){t||(t=i(8)),n||(n=0);var s=Math.floor(e/r),o=e-s*r;return t.writeUInt32BE(s,n),t.writeUInt32BE(o,n+4),t},t.decode=function(e,t){t||(t=0);var n=e.readUInt32BE(t),i=e.readUInt32BE(t+4);return n*r+i},t.encode.bytes=8,t.decode.bytes=8},function(e,t,n){const{EventEmitter:i}=n(0),r=n(41),s=n(80),o=n(1)("webtorrent"),a=n(54),c=n(107),h=n(14),l=n(60),d=n(2),u=n(31),f=n(8),p=n(33),m=n(122),g=n(124),_=n(34).version,v=_.replace(/\d*./g,e=>("0"+e%100).slice(-2)).slice(0,4),y=`-WW${v}-`;class b extends i{constructor(e={}){super(),"string"==typeof e.peerId?this.peerId=e.peerId:Buffer.isBuffer(e.peerId)?this.peerId=e.peerId.toString("hex"):this.peerId=Buffer.from(y+f(9).toString("base64")).toString("hex"),this.peerIdBuffer=Buffer.from(this.peerId,"hex"),"string"==typeof e.nodeId?this.nodeId=e.nodeId:Buffer.isBuffer(e.nodeId)?this.nodeId=e.nodeId.toString("hex"):this.nodeId=f(20).toString("hex"),this.nodeIdBuffer=Buffer.from(this.nodeId,"hex"),this._debugId=this.peerId.toString("hex").substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=e.torrentPort||0,this.dhtPort=e.dhtPort||0,this.tracker=void 0!==e.tracker?e.tracker:{},this.torrents=[],this.maxConns=Number(e.maxConns)||55,this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.tracker&&("object"!=typeof this.tracker&&(this.tracker={}),e.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),this.tracker.rtcConfig=e.rtcConfig),e.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),this.tracker.wrtc=e.wrtc),global.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=global.WRTC)),"function"==typeof m?this._tcpPool=new m(this):process.nextTick(()=>{this._onListening()}),this._downloadSpeed=p(),this._uploadSpeed=p(),!1!==e.dht&&"function"==typeof a?(this.dht=new a(Object.assign({},{nodeId:this.nodeId},e.dht)),this.dht.once("error",e=>{this._destroy(e)}),this.dht.once("listening",()=>{const e=this.dht.address();e&&(this.dhtPort=e.port)}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=!1!==e.webSeeds;const t=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};"function"==typeof c&&null!=e.blocklist?c(e.blocklist,{headers:{"user-agent":`WebTorrent/${_} (https://webtorrent.io)`}},(e,n)=>{if(e)return this.error("Failed to load blocklist: "+e.message);this.blocked=n,t()}):process.nextTick(t)}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const e=this.torrents.filter(e=>1!==e.progress);return e.reduce((e,t)=>e+t.downloaded,0)/(e.reduce((e,t)=>e+(t.length||0),0)||1)}get ratio(){return this.torrents.reduce((e,t)=>e+t.uploaded,0)/(this.torrents.reduce((e,t)=>e+t.received,0)||1)}get(e){if(e instanceof g){if(this.torrents.includes(e))return e}else{let t;try{t=l(e)}catch(e){}if(!t)return null;if(!t.infoHash)throw new Error("Invalid torrent identifier");for(const e of this.torrents)if(e.infoHash===t.infoHash)return e}return null}download(e,t,n){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,n)}add(e,t={},n){if(this.destroyed)throw new Error("client is destroyed");"function"==typeof t&&([t,n]=[{},t]);const i=()=>{if(!this.destroyed)for(const e of this.torrents)if(e.infoHash===s.infoHash&&e!==s)return void s._destroy(new Error("Cannot add duplicate torrent "+s.infoHash))},r=()=>{this.destroyed||("function"==typeof n&&n(s),this.emit("torrent",s))};this._debug("add"),t=t?Object.assign({},t):{};const s=new g(e,this,t);return this.torrents.push(s),s.once("_infoHash",i),s.once("ready",r),s.once("close",(function e(){s.removeListener("_infoHash",i),s.removeListener("ready",r),s.removeListener("close",e)})),s}seed(e,t,n){if(this.destroyed)throw new Error("client is destroyed");"function"==typeof t&&([t,n]=[{},t]),this._debug("seed"),(t=t?Object.assign({},t):{}).skipVerify=!0;const i="string"==typeof e;i&&(t.path=d.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/"+v);const o=e=>{this._debug("on seed"),"function"==typeof n&&n(e),e.emit("seed"),this.emit("seed",e)},a=this.add(null,t,e=>{const t=[t=>{if(i)return t();e.load(c,t)}];this.dht&&t.push(t=>{e.once("dhtAnnounce",t)}),h(t,t=>{if(!this.destroyed)return t?e._destroy(t):void o(e)})});let c;var l;return l=e,"undefined"!=typeof FileList&&l instanceof FileList?e=Array.from(e):Array.isArray(e)||(e=[e]),h(e.map(e=>t=>{!function(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}(e)?t(null,e):r(e,t)}),(e,n)=>{if(!this.destroyed)return e?a._destroy(e):void s.parseInput(n,t,(e,i)=>{if(!this.destroyed){if(e)return a._destroy(e);c=i.map(e=>e.getStream),s(n,t,(e,t)=>{if(this.destroyed)return;if(e)return a._destroy(e);const n=this.get(t);n?a._destroy(new Error("Cannot add duplicate torrent "+n.infoHash)):a._onTorrentId(t)})}})}),a}remove(e,t){if(this._debug("remove"),!this.get(e))throw new Error("No torrent with id "+e);this._remove(e,t)}_remove(e,t){const n=this.get(e);n&&(this.torrents.splice(this.torrents.indexOf(n),1),n.destroy(t))}address(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}destroy(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)}_destroy(e,t){this._debug("client destroy"),this.destroyed=!0;const n=this.torrents.map(e=>t=>{e.destroy(t)});this._tcpPool&&n.push(e=>{this._tcpPool.destroy(e)}),this.dht&&n.push(e=>{this.dht.destroy(e)}),h(n,t),e&&this.emit("error",e),this.torrents=[],this._tcpPool=null,this.dht=null}_onListening(){if(this._debug("listening"),this.listening=!0,this._tcpPool){const e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")}_debug(){const e=[].slice.call(arguments);e[0]=`[${this._debugId}] ${e[0]}`,o(...e)}}b.WEBRTC_SUPPORT=u.WEBRTC_SUPPORT,b.VERSION=_,e.exports=b},function(e,t,n){const i=n(9),r=n(42),s=n(90),o=n(2),a=n(91),c=n(3),h=n(94),l=n(95),d=n(50),u=n(7),f=n(14),p=n(15),m=n(4);function g(e){return e.reduce((e,t)=>Array.isArray(t)?e.concat(g(t)):e.concat(t),[])}function _(e,t,n){var i;if(i=e,"undefined"!=typeof FileList&&i instanceof FileList&&(e=Array.from(e)),Array.isArray(e)||(e=[e]),0===e.length)throw new Error("invalid input type");e.forEach(e=>{if(null==e)throw new Error("invalid input type: "+e)}),1!==(e=e.map(e=>w(e)&&"string"==typeof e.path&&"function"==typeof c.stat?e.path:e)).length||"string"==typeof e[0]||e[0].name||(e[0].name=t.name);let r=null;e.forEach((t,n)=>{if("string"==typeof t)return;let i=t.fullPath||t.name;i||(i="Unknown File "+(n+1),t.unknownName=!0),t.path=i.split("/"),t.path[0]||t.path.shift(),t.path.length<2?r=null:0===n&&e.length>1?r=t.path[0]:t.path[0]!==r&&(r=null)}),e=e.filter(e=>{if("string"==typeof e)return!0;const t=e.path[e.path.length-1];return y(t)&&l.not(t)}),r&&e.forEach(e=>{const t=(Buffer.isBuffer(e)||x(e))&&!e.path;"string"==typeof e||t||e.path.shift()}),!t.name&&r&&(t.name=r),t.name||e.some(e=>"string"==typeof e?(t.name=o.basename(e),!0):e.unknownName?void 0:(t.name=e.path[e.path.length-1],!0)),t.name||(t.name="Unnamed Torrent "+Date.now());const s=e.reduce((e,t)=>e+Number("string"==typeof t),0);let d=1===e.length;if(1===e.length&&"string"==typeof e[0]){if("function"!=typeof c.stat)throw new Error("filesystem paths do not work in the browser");h(e[0],(e,t)=>{if(e)return n(e);d=t,u()})}else process.nextTick(()=>{u()});function u(){f(e.map(e=>t=>{const n={};if(w(e))n.getStream=function(e){return()=>new a(e)}(e),n.length=e.size;else if(Buffer.isBuffer(e))n.getStream=(i=e,()=>{const e=new m.PassThrough;return e.end(i),e}),n.length=e.length;else{if(!x(e)){if("string"==typeof e){if("function"!=typeof c.stat)throw new Error("filesystem paths do not work in the browser");return void function(e,t,n){!function e(t,n,i){c.stat(t,(r,s)=>{if(r)return i(r);s.isDirectory()?c.readdir(t,(r,s)=>{if(r)return i(r);f(s.filter(y).filter(l.not).map(i=>r=>{e(o.join(t,i),n,r)}),i)}):s.isFile()&&n(t,i)})}(e,v,(i,r)=>{if(i)return n(i);r=Array.isArray(r)?g(r):[r],e=o.normalize(e),t&&(e=e.slice(0,e.lastIndexOf(o.sep)+1)),e[e.length-1]!==o.sep&&(e+=o.sep),r.forEach(t=>{t.getStream=function(e){return()=>c.createReadStream(e)}(t.path),t.path=t.path.replace(e,"").split(o.sep)}),n(null,r)})}(e,s>1||d,t)}throw new Error("invalid input type")}n.getStream=function(e,t){return()=>{const n=new m.Transform;return n._transform=function(e,n,i){t.length+=e.length,this.push(e),i()},e.pipe(n),n}}(e,n),n.length=0}var i;n.path=e.path,t(null,n)}),(e,t)=>{if(e)return n(e);t=g(t),n(null,t,d)})}}function v(e,t){t=u(t),c.stat(e,(n,i)=>{if(n)return t(n);const r={length:i.size,path:e};t(null,r)})}function y(e){return"."!==e[0]}function b(e,t){return e+t.length}function w(e){return"undefined"!=typeof Blob&&e instanceof Blob}function x(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}e.exports=function(t,n,o){"function"==typeof n&&([n,o]=[o,n]),_(t,n=n?Object.assign({},n):{},(t,a,c)=>{if(t)return o(t);n.singleFileTorrent=c,function(t,n,o){let a=n.announceList;a||("string"==typeof n.announce?a=[[n.announce]]:Array.isArray(n.announce)&&(a=n.announce.map(e=>[e])));a||(a=[]);global.WEBTORRENT_ANNOUNCE&&("string"==typeof global.WEBTORRENT_ANNOUNCE?a.push([[global.WEBTORRENT_ANNOUNCE]]):Array.isArray(global.WEBTORRENT_ANNOUNCE)&&(a=a.concat(global.WEBTORRENT_ANNOUNCE.map(e=>[e]))));void 0===n.announce&&void 0===n.announceList&&(a=a.concat(e.exports.announceList));"string"==typeof n.urlList&&(n.urlList=[n.urlList]);const c={info:{name:n.name},"creation date":Math.ceil((Number(n.creationDate)||Date.now())/1e3),encoding:"UTF-8"};0!==a.length&&(c.announce=a[0][0],c["announce-list"]=a);void 0!==n.comment&&(c.comment=n.comment);void 0!==n.createdBy&&(c["created by"]=n.createdBy);void 0!==n.private&&(c.info.private=Number(n.private));void 0!==n.info&&Object.assign(c.info,n.info);void 0!==n.sslCert&&(c.info["ssl-cert"]=n.sslCert);void 0!==n.urlList&&(c["url-list"]=n.urlList);const h=n.pieceLength||s(t.reduce(b,0));c.info["piece length"]=h,function(e,t,n){n=u(n);const i=[];let s=0;const o=e.map(e=>e.getStream);let a=0,c=0,h=!1;const l=new d(o),f=new r(t,{zeroPadding:!1});function m(e){s+=e.length;const t=c;p(e,e=>{i[t]=e,a-=1,y()}),a+=1,c+=1}function g(){h=!0,y()}function _(e){v(),n(e)}function v(){l.removeListener("error",_),f.removeListener("data",m),f.removeListener("end",g),f.removeListener("error",_)}function y(){h&&0===a&&(v(),n(null,Buffer.from(i.join(""),"hex"),s))}l.on("error",_),l.pipe(f).on("data",m).on("end",g).on("error",_)}(t,h,(e,r,s)=>{if(e)return o(e);c.info.pieces=r,t.forEach(e=>{delete e.getStream}),n.singleFileTorrent?c.info.length=s:c.info.files=t,o(null,i.encode(c))})}(a,n,o)})},e.exports.parseInput=function(e,t,n){"function"==typeof t&&([t,n]=[n,t]),_(e,t=t?Object.assign({},t):{},n)},e.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]]},function(e,t,n){var i=n(28).Buffer;function r(e,t,n){var s=[],o=null;return r._encode(s,e),o=i.concat(s),r.bytes=o.length,i.isBuffer(t)?(o.copy(t,n),t):o}r.bytes=-1,r._floatConversionDetected=!1,r.getType=function(e){return i.isBuffer(e)?"buffer":Array.isArray(e)?"array":ArrayBuffer.isView(e)?"arraybufferview":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof ArrayBuffer?"arraybuffer":typeof e},r._encode=function(e,t){if(null!=t)switch(r.getType(t)){case"buffer":r.buffer(e,t);break;case"object":r.dict(e,t);break;case"array":r.list(e,t);break;case"string":r.string(e,t);break;case"number":case"boolean":r.number(e,t);break;case"arraybufferview":r.buffer(e,i.from(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":r.buffer(e,i.from(t))}};var s=i.from("e"),o=i.from("d"),a=i.from("l");r.buffer=function(e,t){e.push(i.from(t.length+":"),t)},r.string=function(e,t){e.push(i.from(i.byteLength(t)+":"+t))},r.number=function(e,t){var n=2147483648*(t/2147483648<<0)+(t%2147483648<<0);e.push(i.from("i"+n+"e")),n===t||r._floatConversionDetected||(r._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+n+'"'),console.trace())},r.dict=function(e,t){e.push(o);for(var n,i=0,a=Object.keys(t).sort(),c=a.length;i<c;i++)null!=t[n=a[i]]&&(r.string(e,n),r._encode(e,t[n]));e.push(s)},r.list=function(e,t){var n=0,i=t.length;for(e.push(a);n<i;n++)null!=t[n]&&r._encode(e,t[n]);e.push(s)},e.exports=r},function(e,t,n){var i=n(28).Buffer;function r(e,t,n){for(var i=0,r=1,s=t;s<n;s++){var o=e[s];if(o<58&&o>=48)i=10*i+(o-48);else if(s!==t||43!==o){if(s!==t||45!==o){if(46===o)break;throw new Error("not a number: buffer["+s+"] = "+o)}r=-1}}return i*r}function s(e,t,n,r){return null==e||0===e.length?null:("number"!=typeof t&&null==r&&(r=t,t=void 0),"number"!=typeof n&&null==r&&(r=n,n=void 0),s.position=0,s.encoding=r||null,s.data=i.isBuffer(e)?e.slice(t,n):i.from(e),s.bytes=s.data.length,s.next())}s.bytes=0,s.position=0,s.data=null,s.encoding=null,s.next=function(){switch(s.data[s.position]){case 100:return s.dictionary();case 108:return s.list();case 105:return s.integer();default:return s.buffer()}},s.find=function(e){for(var t=s.position,n=s.data.length,i=s.data;t<n;){if(i[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")},s.dictionary=function(){s.position++;for(var e={};101!==s.data[s.position];)e[s.buffer()]=s.next();return s.position++,e},s.list=function(){s.position++;for(var e=[];101!==s.data[s.position];)e.push(s.next());return s.position++,e},s.integer=function(){var e=s.find(101),t=r(s.data,s.position+1,e);return s.position+=e+1-s.position,t},s.buffer=function(){var e=s.find(58),t=r(s.data,s.position,e),n=++e+t;return s.position=n,s.encoding?s.data.toString(s.encoding,e,n):s.data.slice(e,n)},e.exports=s},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=n(10).Buffer,a=n(5).inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,h;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,i,r=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=r,i=a,o.prototype.copy.call(t,n,i),a+=s.data.length,s=s.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,s=e>r.length?r.length:e;if(s===r.length?i+=r:i+=r.slice(0,e),0==(e-=s)){s===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(s));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,s=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,s),0==(e-=s)){s===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(s));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),h&&s(t,h),e}()},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=n(5).deprecate},function(e,t,n){"use strict";var i;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(29),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),u=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var n=e[u].read();null!==n&&(e[l]=null,e[o]=null,e[a]=null,t(f(n,!1)))}}function m(e){process.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((r(i={get stream(){return this[u]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[h])return Promise.resolve(f(void 0,!0));if(this[u].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[c]?n(e[c]):t(f(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[h]?n(f(void 0,!0)):t[d](n,i)}),i)}}(i,this));else{var r=this[u].read();if(null!==r)return Promise.resolve(f(r,!1));n=new Promise(this[d])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var e=this;return new Promise((function(t,n){e[u].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),g);e.exports=function(e){var t,n=Object.create(_,(r(t={},u,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,c,{value:null,writable:!0}),r(t,h,{value:e._readableState.endEmitted,writable:!0}),r(t,d,{value:function(e,t){var i=n[u].read();i?(n[l]=null,n[o]=null,n[a]=null,e(f(i,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[o]=null,n[a]=null,t(e)),void(n[c]=e)}var i=n[o];null!==i&&(n[l]=null,n[o]=null,n[a]=null,i(f(void 0,!0))),n[h]=!0})),e.on("readable",m.bind(null,n)),n}},function(e,t,n){"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,c,"next",e)}function c(e){i(o,r,s,a,c,"throw",e)}a(void 0)}))}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(11).codes.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,n){var i;if(t&&"function"==typeof t.next)i=t;else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else{if(!t||!t[Symbol.iterator])throw new a("iterable",["Iterable"],t);i=t[Symbol.iterator]()}var c=new e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({objectMode:!0},n)),h=!1;function l(){return d.apply(this,arguments)}function d(){return(d=r((function*(){try{var e=yield i.next(),t=e.value;e.done?c.push(null):c.push(yield t)?l():h=!1}catch(e){c.destroy(e)}}))).apply(this,arguments)}return c._read=function(){h||(h=!0,l())},c}},function(e,t,n){"use strict";e.exports=r;var i=n(49);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(6)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var i;var r=n(11).codes,s=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,r,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(29)),i(e,{readable:t,writable:r},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}function h(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,n){var s=n<t.length-1;return c(e,s,n>0,(function(e){i||(i=e),e&&o.forEach(h),s||(o.forEach(h),r(i))}))}));return t.reduce(l)}},function(e,t){e.exports=function(e){return Math.max(16384,1<<Math.log2(e<1024?1:e/1024)+.5|0)}},function(e,t,n){const{Readable:i}=n(4),r=n(92);e.exports=class extends i{constructor(e,t={}){super(t),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=t.chunkSize||Math.max(this._size/1e3,204800);const n=new FileReader;n.onload=()=>{this.push(r(n.result))},n.onerror=()=>{this.emit("error",n.error)},this.reader=n,this._generateHeaderBlocks(e,t,(e,t)=>{if(e)return this.emit("error",e);Array.isArray(t)&&t.forEach(e=>this.push(e)),this._ready=!0,this.emit("_ready")})}_generateHeaderBlocks(e,t,n){n(null,[])}_read(){if(!this._ready)return void this.once("_ready",this._read.bind(this));const e=this._offset;let t=this._offset+this._chunkSize;if(t>this._size&&(t=this._size),e===this._size)return this.destroy(),void this.push(null);this.reader.readAsArrayBuffer(this._file.slice(e,t)),this._offset=t}destroy(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}}},function(e,t,n){var i=n(93).strict;e.exports=function(e){if(i(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},function(e,t){e.exports=r,r.strict=s,r.loose=o;var n=Object.prototype.toString,i={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function r(e){return s(e)||o(e)}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return i[n.call(e)]}},function(e,t,n){"use strict";var i=n(3);function r(e){return i.existsSync(e)&&i.statSync(e).isFile()}e.exports=function(e,t){if(!t)return r(e);i.stat(e,(function(e,n){return e?t(e):t(null,n.isFile())}))},e.exports.sync=r},function(e,t,n){"use strict";t.re=()=>{throw new Error("`junk.re` was renamed to `junk.regex`")},t.regex=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^Desktop\\.ini$","@eaDir$"].join("|")),t.is=e=>t.regex.test(e),t.not=e=>!t.is(e),t.default=e.exports},function(e,t,n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))}),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(52)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,i=6e4,r=60*i,s=24*r;function o(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return o(e,t,s,"day");if(t>=r)return o(e,t,r,"hour");if(t>=i)return o(e,t,i,"minute");if(t>=n)return o(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){const i=n(53),r=n(5);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let i=0;i<n.length;i++)e.inspectOpts[n[i]]=t.inspectOpts[n[i]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:i,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),s=`  ${r};1m${i} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+i+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=n(99);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[n]=i,e},{}),e.exports=n(52)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},function(e,t,n){"use strict";const i=n(19),r=n(53),s=n(100),{env:o}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function h(e,t){if(0===a)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===o.TERM)return n;if("win32"===process.platform){const e=i.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("GITHUB_ACTIONS"in o)return 1;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:n}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?a=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(h(e,e&&e.isTTY))},stdout:c(h(!0,r.isatty(1))),stderr:c(h(!0,r.isatty(2)))}},function(e,t,n){"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(n+e),r=t.indexOf("--");return-1!==i&&(-1===r||i<r)}},function(e,t,n){var i=n(102),r=n(55),s=n(0),o=n(8),a=n(5),c=[{host:"router.bittorrent.com",port:6881},{host:"router.utorrent.com",port:6881},{host:"dht.transmissionbt.com",port:6881}];function h(e){if(!(this instanceof h))return new h(e);e||(e={});var t,n=this;function r(e,t){if(e&&l(e.id,n._idLength)&&!e.id.equals(n.id)){var i=n.nodes.get(e.id);if(i)return void(i.seen=Date.now());n._addNode({id:e.id,host:t.address||t.host,port:t.port,distance:0,seen:Date.now()})}}this._idLength=e.idLength||20,this.id=function(e){if(Buffer.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);if("string"==typeof e)return Buffer.from(e,"hex");throw new Error("Pass a buffer or a string")}(e.id||e.nodeId||o(this._idLength)),this.socket=e.krpcSocket||i(e),this.bootstrap=!1===(t=e.nodes||e.bootstrap)?[]:!0===t?c:[].concat(t||c).map(u),this.concurrency=e.concurrency||16,this.backgroundConcurrency=e.backgroundConcurrency||this.concurrency/4|0,this.k=e.k||20,this.destroyed=!1,this.pending=[],this.nodes=null,this.socket.setMaxListeners(0),this.socket.on("query",(function(e,t){r(e.a,t),n.emit("query",e,t)})),this.socket.on("response",(function(e,t){r(e.r,t)})),this.socket.on("warning",(function(e){n.emit("warning",e)})),this.socket.on("error",(function(e){n.emit("error",e)})),this.socket.on("update",(function(){for(;n.pending.length&&n.socket.inflight<n.concurrency;){var e=n.pending.shift();n.query(e[0],e[1],e[2])}})),this.socket.on("listening",(function(){n.emit("listening")})),s.EventEmitter.call(this),this.clear()}function l(e,t){return e&&Buffer.isBuffer(e)&&e.length===t}function d(e,t){return e[t++]+"."+e[t++]+"."+e[t++]+"."+e[t++]}function u(e){return"string"==typeof e?{host:e.split(":")[0],port:Number(e.split(":")[1])}:e}function f(){}e.exports=h,a.inherits(h,s.EventEmitter),h.prototype.response=function(e,t,n,i,r){"function"==typeof i&&(r=i,i=null),n.id||(n.id=this.id),i&&(n.nodes=function(e,t){for(var n=Buffer.allocUnsafe(e.length*(t+6)),i=0,r=0;r<e.length;r++){var s=e[r];if(l(s.id,t)){s.id.copy(n,i),i+=t;for(var o=(s.host||s.address).split("."),a=0;a<4;a++)n[i++]=parseInt(o[a]||0,10);n.writeUInt16BE(s.port,i),i+=2}}return i===n.length?n:n.slice(0,i)}(i,this._idLength)),this.socket.response(e,t,n,r)},h.prototype.error=function(e,t,n,i){this.socket.error(e,t,n,i)},h.prototype.bind=function(){this.socket.bind.apply(this.socket,arguments)},h.prototype.address=function(){return this.socket.address()},h.prototype.queryAll=function(e,t,n,i){t.a||(t.a={}),t.a.id||(t.a.id=this.id);var r=!1,s=e.length,o=0,a=null;if(!s)return i(new Error("No nodes to query"),0);for(var c=0;c<e.length;c++)this.query(e[c],t,h);function h(e,t,c){e?e.code>=300&&e.code<400&&(a=e):o++,e||r||n&&!1===n(t,c)&&(r=!0),--s||i(o?null:a||new Error("All queries failed"),o)}},h.prototype.query=function(e,t,n){this.socket.inflight>=this.concurrency?this.pending.push([e,t,n]):(t.a||(t.a={}),t.a.id||(t.a.id=this.id),e.token&&(t.a.token=e.token),this.socket.query(e,t,n))},h.prototype.destroy=function(e){this.destroyed=!0,this.socket.destroy(e)},h.prototype.clear=function(){var e=this;this.nodes=new r({localNodeId:this.id,numberOfNodesPerKBucket:this.k,numberOfNodesToPing:this.concurrency}),this.nodes.on("ping",(function(t,n){e.emit("ping",t,(function(t){t&&(t.id&&e.nodes.remove(t.id),e._addNode(n))}))}))},h.prototype.populate=function(e,t,n){this._closest(e,t,!0,null,n)},h.prototype.closest=function(e,t,n,i){this._closest(e,t,!1,n,i)},h.prototype._addNode=function(e){var t=this.nodes.get(e.id);this.nodes.add(e),t||this.emit("node",e)},h.prototype._closest=function(e,t,n,i,s){s||(s=f);var o=this,a=0,c={},h=0,u=!0,p=!1;t.a||(t.a={}),t.a.id||(t.a.id=this.id);var m=new r({localNodeId:e,numberOfNodesPerKBucket:this.k,numberOfNodesToPing:this.concurrency}),g=n?"postupdate":"update";function _(){if(!(o.destroyed||o.socket.inflight>=o.concurrency)){var i=o.pending.length+o.socket.inflight-h;if(!(n&&o.socket.inflight>=o.backgroundConcurrency&&i)){var r=m.closest(e,o.k);(!r.length||r.length<o.bootstrap.length)&&(!(r=o.nodes.closest(e,o.k)).length||r.length<o.bootstrap.length)&&function(){if(!u)return;u=!1,o.bootstrap.forEach((function(e){h++,o.socket.query(e,t,y)}))}();for(var s=0;s<r.length&&!p;s++){if(o.socket.inflight>=o.concurrency)return;var a=r[s],l=a.host+":"+a.port;c[l]||(c[l]=!0,h++,o.socket.query(a,t,y))}h||(o.socket.removeListener(g,_),process.nextTick(v))}}}function v(){s(null,a)}function y(e,t,n){h--,n&&(c[(n.address||n.host)+":"+n.port]=!0),n&&n.id&&o.nodes.get(n.id)&&(!e||"EUNEXPECTEDNODE"!==e.code&&"ETIMEDOUT"!==e.code||o.nodes.remove(n.id));var r=t&&t.r;if(!r)return _();!e&&l(r.id,o._idLength)&&(a++,b({id:r.id,port:n.port,host:n.host||n.address,distance:0}));for(var s=r.nodes?function(e,t){var n=[];try{for(var i=0;i<e.length;i+=t+6){var r=e.readUInt16BE(i+(t+4));r&&n.push({id:e.slice(i,i+t),host:d(e,i+t),port:r,distance:0,token:null})}}catch(e){}return n}(r.nodes,o._idLength):[],u=0;u<s.length;u++)b(s[u]);i&&!1===i(t,n)&&(p=!0),_()}function b(e){e.id.equals(o.id)||m.add(e)}this.socket.on(g,_),_()}},function(e,t,n){var i=n(56),r=n(9),s=n(21).isIP,o=n(103),a=n(5),c=n(0),h=new Error("Query timed out");h.code="ETIMEDOUT";var l=new Error("Unexpected node id");function d(e){if(!(this instanceof d))return new d(e);e||(e={});var t=this;this.timeout=e.timeout||2e3,this.inflight=0,this.destroyed=!1,this.isIP=e.isIP||s,this.socket=e.socket||i.createSocket("udp4"),this.socket.on("message",(function(e,n){if(t.destroyed)return;if(!n.port)return;try{var i=r.decode(e)}catch(e){return t.emit("warning",e)}var s=i&&i.y&&i.y.toString();if("r"===s||"e"===s){if(!Buffer.isBuffer(i.t))return;try{var o=i.t.readUInt16BE(0)}catch(d){return t.emit("warning",d)}var a=t._ids.indexOf(o);if(-1===a||0===o)return t.emit("response",i,n),void t.emit("warning",new Error("Unexpected transaction id: "+o));var c=t._reqs[a];if(c.peer.host!==n.address)return t.emit("response",i,n),void t.emit("warning",new Error("Out of order response"));if(t._ids[a]=0,t._reqs[a]=null,t.inflight--,"e"===s){var h=Array.isArray(i.e),d=new Error(h?i.e.join(" "):"Unknown error");return d.code=h&&i.e.length&&"number"==typeof i.e[0]?i.e[0]:0,c.callback(d,i,n,c.message),t.emit("update"),void t.emit("postupdate")}var u=i.r&&i.r.id;if(c.peer&&c.peer.id&&u&&!c.peer.id.equals(u))return c.callback(l,null,n),t.emit("update"),void t.emit("postupdate");c.callback(null,i,n,c.message),t.emit("update"),t.emit("postupdate"),t.emit("response",i,n)}else"q"===s?t.emit("query",i,n):t.emit("warning",new Error("Unknown type: "+s))})),this.socket.on("error",(function(e){"EACCES"===e.code||"EADDRINUSE"===e.code?t.emit("error",e):t.emit("warning",e)})),this.socket.on("listening",(function(){t.emit("listening")})),this._tick=0,this._ids=[],this._reqs=[],this._timer=setInterval((function(){var e=t.inflight;if(!e)return;for(var n=0;n<t._reqs.length;n++){var i=t._reqs[n];if(i&&(i.ttl?i.ttl--:t._cancel(n,h),!--e))return}}),Math.floor(this.timeout/4)),c.EventEmitter.call(this)}function u(){}l.code="EUNEXPECTEDNODE",e.exports=d,a.inherits(d,c.EventEmitter),d.prototype.address=function(){return this.socket.address()},d.prototype.response=function(e,t,n,i){this.send(e,{t:t.t,y:"r",r:n},i)},d.prototype.error=function(e,t,n,i){this.send(e,{t:t.t,y:"e",e:[].concat(n.message||n)},i)},d.prototype.send=function(e,t,n){var i=r.encode(t);this.socket.send(i,0,i.length,e.port,e.address||e.host,n||u)},d.prototype.bind=function(){this.socket.bind.apply(this.socket,arguments)},d.prototype.destroy=function(e){this.destroyed=!0,clearInterval(this._timer),e&&this.socket.on("close",e);for(var t=0;t<this._ids.length;t++)this._cancel(t);this.socket.close()},d.prototype.query=function(e,t,n){if(n||(n=u),!this.isIP(e.host))return this._resolveAndQuery(e,t,n);var i={t:Buffer.allocUnsafe(2),y:"q",q:t.q,a:t.a},r={ttl:4,peer:e,message:i,callback:n};65535===this._tick&&(this._tick=0);var s=++this._tick,o=this._ids.indexOf(0);for(-1===o&&(o=this._ids.push(0)-1),this._ids[o]=s;this._reqs.length<o;)this._reqs.push(null);return this._reqs[o]=r,this.inflight++,i.t.writeUInt16BE(s,0),this.send(e,i),s},d.prototype.cancel=function(e,t){var n=this._ids.indexOf(e);n>-1&&this._cancel(n,t)},d.prototype._cancel=function(e,t){var n=this._reqs[e];this._ids[e]=0,this._reqs[e]=null,n&&(this.inflight--,n.callback(t||new Error("Query was cancelled"),null,n.peer),this.emit("update"),this.emit("postupdate"))},d.prototype._resolveAndQuery=function(e,t,n){var i=this;o.lookup(e.host,(function(r,s){return r?n(r):i.destroyed?n(new Error("k-rpc-socket is destroyed")):void i.query({host:s,port:e.port},t,n)}))}},function(e,t){e.exports=require("dns")},function(e,t,n){var i=n(0),r=n(6);function s(e){if(!(this instanceof s))return new s(e);"number"==typeof e&&(e={max:e}),e||(e={}),i.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=s,r(s,i.EventEmitter),Object.defineProperty(s.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),s.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},s.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},s.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},s.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},s.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},s.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},s.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},s.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},function(e,t){var n=[];function i(){this.list=[],this.map=new Map}function r(){this.records=new Map,this.size=0}function s(e){if(!(this instanceof s))return new s(e);if(e||(e={}),this.maxSize=e.maxSize||1/0,this.maxAge=e.maxAge||0,this._onstale=e.onStale||e.onstale||null,this._fresh=new r,this._stale=new r,this._interval=null,this.maxAge&&this.maxAge<1/0){var t=Math.ceil(2/3*this.maxAge);this._interval=setInterval(this._gc.bind(this),t),this._interval.unref&&this._interval.unref()}}function o(e){return Buffer.isBuffer(e)?e.toString("hex"):e}function a(e,t,n){var i=e[t];i.index=n,e[n].index=t,e[t]=e[n],e[n]=i}e.exports=s,i.prototype.add=function(e,t){var n=o(e),i=this.map.get(n);return!i&&(i={index:this.list.length,record:t||e},this.list.push(i),this.map.set(n,i),!0)},i.prototype.remove=function(e){var t=o(e),n=this.map.get(t);return!!n&&(a(this.list,n.index,this.list.length-1),this.list.pop(),this.map.delete(t),!0)},r.prototype.add=function(e,t,n){var r=this.records.get(e);return r||(r=new i,this.records.set(e,r)),!!r.add(t,n)&&(this.size++,!0)},r.prototype.remove=function(e,t,n){var i=this.records.get(e);return!!i&&(!!i.remove(t,n)&&(this.size--,i.map.size||this.records.delete(e),!0))},r.prototype.get=function(e){var t=this.records.get(e);return t?t.list:n},Object.defineProperty(s.prototype,"size",{get:function(){return this._fresh.size+this._stale.size}}),s.prototype.add=function(e,t,n){this._stale.remove(e,t,n),this._fresh.add(e,t,n)&&this._fresh.size>this.maxSize&&this._gc()},s.prototype.remove=function(e,t,n){this._fresh.remove(e,t,n),this._stale.remove(e,t,n)},s.prototype.get=function(e,t){var n=this._fresh.get(e),i=this._stale.get(e),r=n.length,s=i.length,o=r+s;(t>o||!t)&&(t=o);for(var c=new Array(t),h=0;h<t;h++){var l=Math.floor(Math.random()*(r+s));l<r?(c[h]=n[l].record,a(n,l,--r)):(l-=r,c[h]=i[l].record,a(i,l,--s))}return c},s.prototype._gc=function(){this._onstale&&this._stale.size>0&&this._onstale(this._stale),this._stale=this._fresh,this._fresh=new r},s.prototype.clear=function(){this._gc(),this._gc()},s.prototype.destroy=function(){this.clear(),clearInterval(this._interval),this._interval=null}},function(e,t){function n(e){}e.exports=function(e){var t=null,i=null,r=null,s=null;return function(e,t){s=e,o(t||n)};function o(n){if(i)return t||(t=[]),void t.push(n);var r=s;s=null,i=n,e(r,a)}function a(e){var s=i,a=r;if(r=null,i=null,t&&(r=t,t=null,o(n)),a)for(var c=0;c<a.length;c++)a[c](e);s(e)}}},function(e,t,n){const i=n(3),r=n(20),s=n(110),o=n(112).Netmask,a=n(7),c=n(113),h=n(30),l=/^\s*(?:[^#].*?\s*:\s*)?([a-f0-9.:]+)(?:\s*-\s*([a-f0-9.:]+))?\s*$/,d=/^\s*(?:[^#].*?\s*:\s*)?([0-9.:]+)\/([0-9]{1,2})\s*$/;e.exports=function e(t,n,u){if("function"==typeof n)return e(t,{},n);if(u=a(u),Array.isArray(t)||!t)process.nextTick(()=>{u(null,new s(t))});else if(/^https?:\/\//.test(t))n.url=t,r(n,(e,t)=>{if(e)return u(e);f(t)});else{let e=i.createReadStream(t).on("error",u);/.gz$/.test(t)&&(e=e.pipe(h.Gunzip())),f(e)}function f(e){const t=[];e.on("error",u).pipe(c()).on("data",e=>{let n=l.exec(e);if(n)t.push({start:n[1],end:n[2]});else if(n=d.exec(e),n){const e=new o(`${n[1]}/${n[2]}`);t.push({start:e.first,end:e.broadcast||e.last})}}).on("end",()=>{u(null,new s(t))})}}},function(e,t,n){"use strict";const{PassThrough:i}=n(12),r=n(30),s=n(109),o=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const n="br"===t;if(n&&"function"!=typeof r.createBrotliDecompress)return e;const o=n?r.createBrotliDecompress():r.createUnzip(),a=new i;return s(e,a),o.on("error",e=>{"Z_BUF_ERROR"!==e.code?a.emit("error",e):a.end()}),e.pipe(o).pipe(a),a};e.exports=o,e.exports.default=o},function(e,t,n){"use strict";const i=["aborted","complete","destroy","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,t)=>{const n=new Set(Object.keys(e).concat(i));for(const i of n)i in t||(t[i]="function"==typeof e[i]?e[i].bind(e):e[i]);return t}},function(e,t,n){var i=n(111);function r(e,t){this.start=e,this.end=t,this.max=t,this.depth=1,this.left=null,this.right=null}r.prototype.add=function(e,t){var n=e-this.start,i=!1;return 0===n&&this.end<t?(this.end=t,i=!0):n<0?this.left?(i=this.left.add(e,t))&&this._balance():(this.left=new r(e,t),i=!0):n>0&&(this.right?(i=this.right.add(e,t))&&this._balance():(this.right=new r(e,t),i=!0)),i&&this._update(),i},r.prototype.contains=function(e){for(var t=this;t&&!(e>=t.start&&e<=t.end);)t=t.left&&t.left.max>=e?t.left:t.right;return!!t},r.prototype._balance=function(){var e=this.left?this.left.depth:0,t=this.right?this.right.depth:0;if(e>t+1)(this.left.left?this.left.left.depth:0)<(this.left.right?this.left.right.depth:0)&&this.left._rotateRR(),this._rotateLL();else if(e+1<t){var n=this.right.right?this.right.right.depth:0;(this.right.left?this.right.left.depth:0)>n&&this.right._rotateLL(),this._rotateRR()}},r.prototype._rotateLL=function(){var e=this.start,t=this.end,n=this.right;this.start=this.left.start,this.end=this.left.end,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=n,this.right.start=e,this.right.end=t,this.right._update(),this._update()},r.prototype._rotateRR=function(){var e=this.start,t=this.end,n=this.left;this.start=this.right.start,this.end=this.right.end,this.end=this.right.end,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=n,this.left.start=e,this.left.end=t,this.left._update(),this._update()},r.prototype._update=function(){this.depth=1,this.left&&(this.depth=this.left.depth+1),this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1),this.max=Math.max(this.end,this.left?this.left.max:0,this.right?this.right.max:0)},e.exports=function(e){var t=null,n={add:function(e,n){if(e){"object"==typeof e&&(n=e.end,e=e.start);if("string"==typeof e&&/\/\d{1,2}/.test(e)){var s=i.cidrSubnet(e);e=s.networkAddress,n=s.broadcastAddress}if("number"!=typeof e&&(e=i.toLong(e)),n||(n=e),"number"!=typeof n&&(n=i.toLong(n)),e<0||n>4294967295||n<e)throw new Error("Invalid block range");t?t.add(e,n):t=new r(e,n)}},contains:function(e){return!!t&&("number"!=typeof e&&(e=i.toLong(e)),t.contains(e))}};return Array.isArray(e)&&e.forEach((function(e){n.add(e)})),n}},function(e,t,n){"use strict";var i=t,r=n(10).Buffer,s=n(19);i.toBuffer=function(e,t,n){var i;if(n=~~n,this.isV4Format(e))i=t||new r(n+4),e.split(/\./g).map((function(e){i[n++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var s,o=e.split(":",8);for(s=0;s<o.length;s++){var a;this.isV4Format(o[s])&&(a=this.toBuffer(o[s]),o[s]=a.slice(0,2).toString("hex")),a&&++s<8&&o.splice(s,0,a.slice(2,4).toString("hex"))}if(""===o[0])for(;o.length<8;)o.unshift("0");else if(""===o[o.length-1])for(;o.length<8;)o.push("0");else if(o.length<8){for(s=0;s<o.length&&""!==o[s];s++);var c=[s,1];for(s=9-o.length;s>0;s--)c.push("0");o.splice.apply(o,c)}for(i=t||new r(n+16),s=0;s<o.length;s++){var h=parseInt(o[s],16);i[n++]=h>>8&255,i[n++]=255&h}}if(!i)throw Error("Invalid ip address: "+e);return i},i.toString=function(e,t,n){t=~~t;var i=[];if(4===(n=n||e.length-t)){for(var r=0;r<n;r++)i.push(e[t+r]);i=i.join(".")}else if(16===n){for(r=0;r<n;r+=2)i.push(e.readUInt16BE(t+r).toString(16));i=(i=(i=i.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return i};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}i.isV4Format=function(e){return o.test(e)},i.isV6Format=function(e){return a.test(e)},i.fromPrefixLen=function(e,t){var n=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(n=16);for(var s=new r(n),o=0,a=s.length;o<a;++o){var h=8;e<8&&(h=e),e-=h,s[o]=255&~(255>>h)}return i.toString(s)},i.mask=function(e,t){e=i.toBuffer(e),t=i.toBuffer(t);var n=new r(Math.max(e.length,t.length)),s=0;if(e.length===t.length)for(s=0;s<e.length;s++)n[s]=e[s]&t[s];else if(4===t.length)for(s=0;s<t.length;s++)n[s]=e[e.length-4+s]&t[s];else{for(s=0;s<n.length-6;s++)n[s]=0;for(n[10]=255,n[11]=255,s=0;s<e.length;s++)n[s+12]=e[s]&t[s+12];s+=12}for(;s<n.length;s++)n[s]=0;return i.toString(n)},i.cidr=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var r=i.fromPrefixLen(parseInt(t[1],10));return i.mask(n,r)},i.subnet=function(e,t){for(var n=i.toLong(i.mask(e,t)),r=i.toBuffer(t),s=0,o=0;o<r.length;o++)if(255===r[o])s+=8;else for(var a=255&r[o];a;)a=a<<1&255,s++;var c=Math.pow(2,32-s);return{networkAddress:i.fromLong(n),firstAddress:c<=2?i.fromLong(n):i.fromLong(n+1),lastAddress:c<=2?i.fromLong(n+c-1):i.fromLong(n+c-2),broadcastAddress:i.fromLong(n+c-1),subnetMask:t,subnetMaskLength:s,numHosts:c<=2?c:c-2,length:c,contains:function(e){return n===i.toLong(i.mask(e,t))}}},i.cidrSubnet=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var r=i.fromPrefixLen(parseInt(t[1],10));return i.subnet(n,r)},i.not=function(e){for(var t=i.toBuffer(e),n=0;n<t.length;n++)t[n]=255^t[n];return i.toString(t)},i.or=function(e,t){if(e=i.toBuffer(e),t=i.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;++n)e[n]|=t[n];return i.toString(e)}var r=e,s=t;t.length>e.length&&(r=t,s=e);var o=r.length-s.length;for(n=o;n<r.length;++n)r[n]|=s[n-o];return i.toString(r)},i.isEqual=function(e,t){if(e=i.toBuffer(e),t=i.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(4===t.length){var r=t;t=e,e=r}for(n=0;n<10;n++)if(0!==t[n])return!1;var s=t.readUInt16BE(10);if(0!==s&&65535!==s)return!1;for(n=0;n<4;n++)if(e[n]!==t[n+12])return!1;return!0},i.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},i.isPublic=function(e){return!i.isPrivate(e)},i.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},i.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},i.address=function(e,t){var n,r=s.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var o=r[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===o.length)return;return o[0].address}return(n=Object.keys(r).map((function(n){var s=r[n].filter((function(n){return n.family=n.family.toLowerCase(),n.family===t&&!i.isLoopback(n.address)&&(!e||("public"===e?i.isPrivate(n.address):i.isPublic(n.address)))}));return s.length?s[0].address:void 0})).filter(Boolean)).length?n[0]:i.loopback(t)},i.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},i.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},function(e,t){(function(){var e,n,i;i=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},n=function(e){var t,n,i,r,s;if(0===(t=(e+"").split(".")).length||t.length>4)throw new Error("Invalid IP");for(i=r=0,s=t.length;r<s;i=++r){if(n=t[i],isNaN(parseInt(n,10)))throw new Error("Invalid byte: "+n);if(n<0||n>255)throw new Error("Invalid byte: "+n)}return((t[0]||0)<<24|(t[1]||0)<<16|(t[2]||0)<<8|(t[3]||0))>>>0},e=function(){function e(e,t){var r,s,o,a,c;if("string"!=typeof e)throw new Error("Missing `net' parameter");if(t||(c=e.split("/",2),e=c[0],t=c[1]),!t)switch(e.split(".").length){case 1:t=8;break;case 2:t=16;break;case 3:t=24;break;case 4:t=32;break;default:throw new Error("Invalid net address: "+e)}if("string"==typeof t&&t.indexOf(".")>-1){try{this.maskLong=n(t)}catch(r){throw r,new Error("Invalid mask: "+t)}for(o=a=32;a>=0;o=--a)if(this.maskLong===4294967295<<32-o>>>0){this.bitmask=o;break}}else{if(!t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(n(e)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=i(this.netLong),this.mask=i(this.maskLong),this.hostmask=i(~this.maskLong),this.first=this.bitmask<=30?i(this.netLong+1):this.base,this.last=this.bitmask<=30?i(this.netLong+this.size-2):i(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?i(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"==typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(n(t)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(i(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,s,o,a,c,h,l;for(l=[],t=r=0,s=(a=function(){h=[];for(var e=c=n(this.first),t=n(this.last);c<=t?e<=t:e>=t;c<=t?e++:e--)h.push(e);return h}.apply(this)).length;r<s;t=++r)o=a[t],l.push(e(i(o),o,t));return l},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=n,t.long2ip=i,t.Netmask=e}).call(this)},function(e,t,n){var i=n(114),r=n(115).StringDecoder;e.exports=function(e,t,n){var s=new r,o="",a=n&&n.maxLength,c=!n||!1!==n.trailing;"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function h(e,n){if(t){try{n=t(n)}catch(t){return e.emit("error",t)}void 0!==n&&e.queue(n)}else e.queue(n)}function l(t,n){var i=((null!=o?o:"")+n).split(e);if(o=i.pop(),a&&o.length>a)return t.emit("error",new Error("maximum buffer reached"));for(var r=0;r<i.length;r++){h(t,i[r])}}return i((function(e){l(this,s.write(e))}),(function(){s.end&&l(this,s.end()),c&&null!=o&&h(this,o),this.queue(null)}))}},function(e,t,n){var i=n(12);function r(e,t,n){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var r=!1,s=!1,o=[],a=!1,c=new i;function h(){for(;o.length&&!c.paused;){var e=o.shift();if(null===e)return c.emit("end");c.emit("data",e)}}function l(){c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy()}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(n&&!1===n.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return a||(null===e&&(a=!0),o.push(e),h()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&process.nextTick((function(){c.destroy()}))})),c.end=function(e){if(!r)return r=!0,arguments.length&&c.write(e),l(),c},c.destroy=function(){if(!s)return s=!0,r=!0,o.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),h(),c.paused||c.emit("drain"),c},c}e.exports=r,r.through=r},function(e,t){e.exports=require("string_decoder")},function(e,t){e.exports=function(e,t){if("undefined"==typeof Blob||!(e instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof t)throw new Error("second argument must be a function");var n=new FileReader;n.addEventListener("loadend",(function e(i){n.removeEventListener("loadend",e,!1),i.error?t(i.error):t(null,Buffer.from(n.result))}),!1),n.readAsArrayBuffer(e)}},function(e,t,n){e.exports=s,e.exports.decode=s,e.exports.encode=function(e){(e=Object.assign({},e)).infoHashBuffer&&(e.xt="urn:btih:"+e.infoHashBuffer.toString("hex"));e.infoHash&&(e.xt="urn:btih:"+e.infoHash);e.name&&(e.dn=e.name);e.keywords&&(e.kt=e.keywords);e.announce&&(e.tr=e.announce);e.urlList&&(e.ws=e.urlList,delete e.as);let t="magnet:?";return Object.keys(e).filter(e=>2===e.length).forEach((n,i)=>{(Array.isArray(e[n])?e[n]:[e[n]]).forEach((e,r)=>{!(i>0||r>0)||"kt"===n&&0!==r||(t+="&"),"dn"===n&&(e=encodeURIComponent(e).replace(/%20/g,"+")),"tr"!==n&&"xs"!==n&&"as"!==n&&"ws"!==n||(e=encodeURIComponent(e)),"kt"===n&&(e=encodeURIComponent(e)),t+="kt"===n&&r>0?"+"+e:`${n}=${e}`})}),t};const i=n(118),r=n(120);function s(e){const t={},n=e.split("magnet:?")[1];let s;if((n&&n.length>=0?n.split("&"):[]).forEach(e=>{const n=e.split("=");if(2!==n.length)return;const i=n[0];let r=n[1];if("dn"===i&&(r=decodeURIComponent(r).replace(/\+/g," ")),"tr"!==i&&"xs"!==i&&"as"!==i&&"ws"!==i||(r=decodeURIComponent(r)),"kt"===i&&(r=decodeURIComponent(r).split("+")),"ix"===i&&(r=Number(r)),t[i])if(Array.isArray(t[i]))t[i].push(r);else{const e=t[i];t[i]=[e,r]}else t[i]=r}),t.xt){(Array.isArray(t.xt)?t.xt:[t.xt]).forEach(e=>{if(s=e.match(/^urn:btih:(.{40})/))t.infoHash=s[1].toLowerCase();else if(s=e.match(/^urn:btih:(.{32})/)){const e=i.decode(s[1]);t.infoHash=Buffer.from(e,"binary").toString("hex")}})}return t.infoHash&&(t.infoHashBuffer=Buffer.from(t.infoHash,"hex")),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),"string"==typeof t.tr?t.announce=[t.tr]:Array.isArray(t.tr)?t.announce=t.tr:t.announce=[],t.urlList=[],("string"==typeof t.as||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),("string"==typeof t.ws||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),r(t.announce),r(t.urlList),t}},function(e,t,n){var i=n(119);t.encode=i.encode,t.decode=i.decode},function(e,t,n){"use strict";var i=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];t.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t,n,i=0,r=0,s=0,o=0,a=new Buffer(8*(t=e,n=Math.floor(t.length/5),t.length%5==0?n:n+1));i<e.length;){var c=e[i];s>3?(o=(o=c&255>>s)<<(s=(s+5)%8)|(i+1<e.length?e[i+1]:0)>>8-s,i++):(o=c>>8-(s+5)&31,0===(s=(s+5)%8)&&i++),a[r]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(o),r++}for(i=r;i<a.length;i++)a[i]=61;return a},t.decode=function(e){var t,n=0,r=0,s=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var o=new Buffer(Math.ceil(5*e.length/8)),a=0;a<e.length&&61!==e[a];a++){var c=e[a]-48;if(!(c<i.length))throw new Error("Invalid input - it is not base32 encoded string");r=i[c],n<=3?0===(n=(n+5)%8)?(t|=r,o[s]=t,s++,t=0):t|=255&r<<8-n:(t|=255&r>>>(n=(n+5)%8),o[s]=t,s++,t=255&r<<8-n)}return o.slice(0,s)}},function(e,t,n){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,i=e.length,r=e[0],s=e[0],o=1;o<i;++o)if(s=r,t(r=e[o],s)){if(o===n){n++;continue}e[n++]=r}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,i=e[0],r=e[0],s=1;s<n;++s,r=i)if(r=i,(i=e[s])!==r){if(s===t){t++;continue}e[t++]=i}return e.length=t,e}(e))}},function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,n){const i=n(16),r=n(1)("webtorrent:tcp-pool"),s=n(21),o=n(61);function a(){}e.exports=class{constructor(e){r("create tcp pool (port %s)",e.torrentPort),this.server=s.createServer(),this._client=e,this._pendingConns=[],this._onConnectionBound=e=>{this._onConnection(e)},this._onListening=()=>{this._client._onListening()},this._onError=e=>{this._client._destroy(e)},this.server.on("connection",this._onConnectionBound),this.server.on("listening",this._onListening),this.server.on("error",this._onError),this.server.listen(e.torrentPort)}destroy(e){r("destroy tcp pool"),this.server.removeListener("connection",this._onConnectionBound),this.server.removeListener("listening",this._onListening),this.server.removeListener("error",this._onError),this._pendingConns.forEach(e=>{e.on("error",a),e.destroy()});try{this.server.close(e)}catch(t){e&&process.nextTick(e)}this.server=null,this._client=null,this._pendingConns=null}_onConnection(e){const t=this;if(!e.remoteAddress)return e.on("error",a),void e.destroy();t._pendingConns.push(e),e.once("close",c);const n=o.createTCPIncomingPeer(e),r=n.wire;function s(e,i){c();const r=t._client.get(e);if(r)n.swarm=r,r._addIncomingPeer(n),n.onHandshake(e,i);else{const t=new Error(`Unexpected info hash ${e} from incoming peer ${n.id}`);n.destroy(t)}}function c(){e.removeListener("close",c),r.removeListener("handshake",s),t._pendingConns&&i(t._pendingConns,t._pendingConns.indexOf(e))}r.once("handshake",s)}}},function(e,t,n){const i=n(23),r=n(1)("webtorrent:webconn"),s=n(20),o=n(15),a=n(62),c=n(34).version;e.exports=class extends a{constructor(e,t){super(),this.url=e,this.webPeerId=o.sync(e),this._torrent=t,this._init()}_init(){this.setKeepAlive(!0),this.once("handshake",(e,t)=>{if(this.destroyed)return;this.handshake(e,this.webPeerId);const n=this._torrent.pieces.length,r=new i(n);for(let e=0;e<=n;e++)r.set(e,!0);this.bitfield(r)}),this.once("interested",()=>{r("interested"),this.unchoke()}),this.on("uninterested",()=>{r("uninterested")}),this.on("choke",()=>{r("choke")}),this.on("unchoke",()=>{r("unchoke")}),this.on("bitfield",()=>{r("bitfield")}),this.on("request",(e,t,n,i)=>{r("request pieceIndex=%d offset=%d length=%d",e,t,n),this.httpRequest(e,t,n,i)})}httpRequest(e,t,n,i){const o=e*this._torrent.pieceLength+t,a=o+n-1,h=this._torrent.files;let l;if(h.length<=1)l=[{url:this.url,start:o,end:a}];else{const e=h.filter(e=>e.offset<=a&&e.offset+e.length>o);if(e.length<1)return i(new Error("Could not find file corresponnding to web seed range request"));l=e.map(e=>{const t=e.offset+e.length-1;return{url:this.url+("/"===this.url[this.url.length-1]?"":"/")+e.path,fileOffsetInRange:Math.max(e.offset-o,0),start:Math.max(o-e.offset,0),end:Math.min(t,a-e.offset)}})}let d,u=0,f=!1;l.length>1&&(d=Buffer.alloc(n)),l.forEach(o=>{const a=o.url,h=o.start,p=o.end;r("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",a,e,t,n,h,p);const m={url:a,method:"GET",headers:{"user-agent":`WebTorrent/${c} (https://webtorrent.io)`,range:`bytes=${h}-${p}`}};function g(e,t){if(e.statusCode<200||e.statusCode>=300)return f=!0,i(new Error("Unexpected HTTP status code "+e.statusCode));r("Got data of length %d",t.length),1===l.length?i(null,t):(t.copy(d,o.fileOffsetInRange),++u===l.length&&i(null,d))}s.concat(m,(e,t,n)=>{if(!f)return e?"undefined"==typeof window||a.startsWith(window.location.origin+"/")?(f=!0,i(e)):s.head(a,(t,n)=>{if(!f){if(t)return f=!0,i(t);if(n.statusCode<200||n.statusCode>=300)return f=!0,i(new Error("Unexpected HTTP status code "+n.statusCode));if(n.url===a)return f=!0,i(e);m.url=n.url,s.concat(m,(e,t,n)=>{if(!f)return e?(f=!0,i(e)):void g(t,n)})}}):void g(t,n)})})}destroy(){super.destroy(),this._torrent=null}}},function(e,t,n){const i=n(63),r=n(23),s=n(125),o=n(1)("webtorrent:torrent"),a=n(126),c=n(0).EventEmitter,h=n(3),l=n(144),d=n(20),u=n(157),f=n(50),p=n(21),m=n(19),g=n(14),_=n(158),v=n(60),y=n(2),b=n(159),w=n(40),x=n(161),k=n(15),E=n(33),S=n(162),M=n(163),I=n(165),C=n(166),B=n(61),T=n(187),A=n(188),O=3*b.BLOCK_LENGTH,L=process.browser?1/0:2,R=[1e3,5e3,15e3],N=`WebTorrent/${n(34).version} (https://webtorrent.io)`;let P;try{P=y.join(h.statSync("/tmp")&&"/tmp","webtorrent")}catch(e){P=y.join("function"==typeof m.tmpdir?m.tmpdir():"/","webtorrent")}function U(e,t){return 2+Math.ceil(t*e.downloadSpeed()/b.BLOCK_LENGTH)}function j(){}e.exports=class extends c{constructor(e,t,n){super(),this._debugId="unknown infohash",this.client=t,this.announce=n.announce,this.urlList=n.urlList,this.path=n.path,this.skipVerify=!!n.skipVerify,this._store=n.store||l,this._getAnnounceOpts=n.getAnnounceOpts,"boolean"==typeof n.private&&(this.private=n.private),this.strategy=n.strategy||"sequential",this.maxWebConns=n.maxWebConns||4,this._rechokeNumSlots=!1===n.uploads||0===n.uploads?0:+n.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=E(),this._uploadSpeed=E(),this._servers=[],this._xsRequests=[],this._fileModtimes=n.fileModtimes,null!==e&&this._onTorrentId(e),this._debug("new torrent")}get timeRemaining(){return this.done?0:0===this.downloadSpeed?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}get downloaded(){if(!this.bitfield)return 0;let e=0;for(let t=0,n=this.pieces.length;t<n;++t)if(this.bitfield.get(t))e+=t===n-1?this.lastPieceLength:this.pieceLength;else{const n=this.pieces[t];e+=n.length-n.missing}return e}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||this.length)}get numPeers(){return this.wires.length}get torrentFileBlobURL(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let e=0;for(const t in this._peers)this._peers[t].connected&&(e+=1);return e}get swarm(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}_onTorrentId(e){if(this.destroyed)return;let t;try{t=v(e)}catch(e){}t?(this.infoHash=t.infoHash,this._debugId=t.infoHash.toString("hex").substring(0,7),process.nextTick(()=>{this.destroyed||this._onParsedTorrent(t)})):v.remote(e,(e,t)=>{if(!this.destroyed)return e?this._destroy(e):void this._onParsedTorrent(t)})}_onParsedTorrent(e){if(!this.destroyed){if(this._processParsedTorrent(e),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this.path||(this.path=y.join(P,this.infoHash)),this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(e){this._debugId=e.infoHash.toString("hex").substring(0,7),void 0!==this.private&&(e.private=this.private),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&global.WEBTORRENT_ANNOUNCE&&!e.private&&(e.announce=e.announce.concat(global.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),e.announce=Array.from(new Set(e.announce)),e.urlList=Array.from(new Set(e.urlList)),Object.assign(this,e),this.magnetURI=v.toMagnetURI(e),this.torrentFile=v.toTorrentFile(e)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let e=this.client.tracker;e&&(e=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{const e={uploaded:this.uploaded,downloaded:this.downloaded,left:Math.max(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(e,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(e,this._getAnnounceOpts()),e}})),this.discovery=new a({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:e,port:this.client.torrentPort,userAgent:N}),this.discovery.on("error",e=>{this._destroy(e)}),this.discovery.on("peer",e=>{"string"==typeof e&&this.done||this.addPeer(e)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce"),0===this.numPeers&&this.emit("noPeers","tracker")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce"),0===this.numPeers&&this.emit("noPeers","dht")}),this.discovery.on("warning",e=>{this.emit("warning",e)})}_getMetadataFromServer(){const e=this,t=(Array.isArray(this.xs)?this.xs:[this.xs]).map(t=>n=>{!function(t,n){if(0!==t.indexOf("http://")&&0!==t.indexOf("https://"))return e.emit("warning",new Error("skipping non-http xs param: "+t)),n(null);const i={url:t,method:"GET",headers:{"user-agent":N}};let r;try{r=d.concat(i,(function(i,r,s){if(e.destroyed)return n(null);if(e.metadata)return n(null);if(i)return e.emit("warning",new Error("http error from xs param: "+t)),n(null);if(200!==r.statusCode)return e.emit("warning",new Error(`non-200 status code ${r.statusCode} from xs param: ${t}`)),n(null);let o;try{o=v(s)}catch(i){}if(!o)return e.emit("warning",new Error("got invalid torrent file from xs param: "+t)),n(null);if(o.infoHash!==e.infoHash)return e.emit("warning",new Error("got torrent file with incorrect info hash from xs param: "+t)),n(null);e._onMetadata(o),n(null)}))}catch(i){return e.emit("warning",new Error("skipping invalid url xs param: "+t)),n(null)}e._xsRequests.push(r)}(t,n)});g(t)}_onMetadata(e){if(this.metadata||this.destroyed)return;let t;if(this._debug("got metadata"),this._xsRequests.forEach(e=>{e.abort()}),this._xsRequests=[],e&&e.infoHash)t=e;else try{t=v(e)}catch(e){return this._destroy(e)}if(this._processParsedTorrent(t),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(e=>{this.addWebSeed(e)}),this._rarityMap=new T(this),this.store=new u(new this._store(this.pieceLength,{torrent:{infoHash:this.infoHash},files:this.files.map(e=>({path:y.join(this.path,e.path),length:e.length,offset:e.offset})),length:this.length,name:this.infoHash})),this.files=this.files.map(e=>new C(this,e)),this.so){const e=I.parse(this.so);this.files.forEach((t,n)=>{e.includes(n)&&this.files[n].select(!0)})}else 0!==this.pieces.length&&this.select(0,this.pieces.length-1,!1);if(this._hashes=this.pieces,this.pieces=this.pieces.map((e,t)=>{const n=t===this.pieces.length-1?this.lastPieceLength:this.pieceLength;return new b(n)}),this._reservations=this.pieces.map(()=>[]),this.bitfield=new r(this.pieces.length),this.wires.forEach(e=>{e.ut_metadata&&e.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(e)}),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const e=e=>{if(e)return this._destroy(e);this._debug("done verifying"),this._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===l?this.getFileModtimes((t,n)=>{if(t)return this._destroy(t);this.files.map((e,t)=>n[t]===this._fileModtimes[t]).every(e=>e)?(this._markAllVerified(),this._onStore()):this._verifyPieces(e)}):this._verifyPieces(e)}}getFileModtimes(e){const t=[];_(this.files.map((e,n)=>i=>{h.stat(y.join(this.path,e.path),(e,r)=>{if(e&&"ENOENT"!==e.code)return i(e);t[n]=r&&r.mtime.getTime(),i(null)})}),L,n=>{this._debug("done getting file modtimes"),e(n,t)})}_verifyPieces(e){_(this.pieces.map((e,t)=>e=>{if(this.destroyed)return e(new Error("torrent is destroyed"));this.store.get(t,(n,i)=>this.destroyed?e(new Error("torrent is destroyed")):n?process.nextTick(e,null):void k(i,n=>{if(this.destroyed)return e(new Error("torrent is destroyed"));if(n===this._hashes[t]){if(!this.pieces[t])return e(null);this._debug("piece verified %s",t),this._markVerified(t)}else this._debug("piece invalid %s",t);e(null)}))}),L,e)}rescanFiles(e){if(this.destroyed)throw new Error("torrent is destroyed");e||(e=j),this._verifyPieces(t=>{if(t)return this._destroy(t),e(t);this._checkDone(),e(null)})}_markAllVerified(){for(let e=0;e<this.pieces.length;e++)this._markVerified(e)}_markVerified(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections())}destroy(e){this._destroy(null,e)}_destroy(e,t){if(this.destroyed)return;this.destroyed=!0,this._debug("destroy"),this.client._remove(this),clearInterval(this._rechokeIntervalId),this._xsRequests.forEach(e=>{e.abort()}),this._rarityMap&&this._rarityMap.destroy();for(const e in this._peers)this.removePeer(e);this.files.forEach(e=>{e instanceof C&&e._destroy()});const n=this._servers.map(e=>t=>{e.destroy(t)});this.discovery&&n.push(e=>{this.discovery.destroy(e)}),this.store&&n.push(e=>{this.store.close(e)}),g(n,t),e&&(0===this.listenerCount("error")?this.client.emit("error",e):this.emit("error",e)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}addPeer(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(this.client.blocked){let t;if("string"==typeof e){let n;try{n=i(e)}catch(t){return this._debug("ignoring peer: invalid %s",e),this.emit("invalidPeer",e),!1}t=n[0]}else"string"==typeof e.remoteAddress&&(t=e.remoteAddress);if(t&&this.client.blocked.contains(t))return this._debug("ignoring peer: blocked %s",e),"string"!=typeof e&&e.destroy(),this.emit("blockedPeer",e),!1}const t=!!this._addPeer(e);return t?this.emit("peer",e):this.emit("invalidPeer",e),t}_addPeer(e){if(this.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!this._validAddr(e))return this._debug("ignoring peer: invalid %s",e),null;const t=e&&e.id||e;if(this._peers[t])return this._debug("ignoring peer: duplicate (%s)",t),"string"!=typeof e&&e.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null;let n;return this._debug("add peer %s",t),n="string"==typeof e?B.createTCPOutgoingPeer(e,this):B.createWebRTCPeer(e,this),this._peers[n.id]=n,this._peersLength+=1,"string"==typeof e&&(this._queue.push(n),this._drain()),n}addWebSeed(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error("ignoring invalid web seed: "+e)),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error("ignoring duplicate web seed: "+e)),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);const t=B.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)}_addIncomingPeer(e){return this.destroyed?e.destroy(new Error("torrent is destroyed")):this.paused?e.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",e.id),this._peers[e.id]=e,void(this._peersLength+=1))}removePeer(e){const t=e&&e.id||e;(e=this._peers[t])&&(this._debug("removePeer %s",t),delete this._peers[t],this._peersLength-=1,e.destroy(),this._drain())}select(e,t,n,i){if(this.destroyed)throw new Error("torrent is destroyed");if(e<0||t<e||this.pieces.length<=t)throw new Error(`invalid selection ${e} : ${t}`);n=Number(n)||0,this._debug("select %s-%s (priority %s)",e,t,n),this._selections.push({from:e,to:t,offset:0,priority:n,notify:i||j}),this._selections.sort((e,t)=>t.priority-e.priority),this._updateSelections()}deselect(e,t,n){if(this.destroyed)throw new Error("torrent is destroyed");n=Number(n)||0,this._debug("deselect %s-%s (priority %s)",e,t,n);for(let i=0;i<this._selections.length;++i){const r=this._selections[i];if(r.from===e&&r.to===t&&r.priority===n){this._selections.splice(i,1);break}}this._updateSelections()}critical(e,t){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",e,t);for(let n=e;n<=t;++n)this._critical[n]=!0;this._updateSelections()}_onWire(e,t){if(this._debug("got wire %s (%s)",e._debugId,t||"Unknown"),e.on("download",e=>{this.destroyed||(this.received+=e,this._downloadSpeed(e),this.client._downloadSpeed(e),this.emit("download",e),this.client.emit("download",e))}),e.on("upload",e=>{this.destroyed||(this.uploaded+=e,this._uploadSpeed(e),this.client._uploadSpeed(e),this.emit("upload",e),this.client.emit("upload",e))}),this.wires.push(e),t){const n=i(t);e.remoteAddress=n[0],e.remotePort=n[1]}this.client.dht&&this.client.dht.listening&&e.on("port",n=>{if(!this.destroyed&&!this.client.dht.destroyed){if(!e.remoteAddress)return this._debug("ignoring PORT from peer with no address");if(0===n||n>65536)return this._debug("ignoring invalid PORT from peer");this._debug("port: %s (from %s)",n,t),this.client.dht.addNode({host:e.remoteAddress,port:n})}}),e.on("timeout",()=>{this._debug("wire timeout (%s)",t),e.destroy()}),e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(S(this.metadata)),e.ut_metadata.on("warning",e=>{this._debug("ut_metadata warning: %s",e.message)}),this.metadata||(e.ut_metadata.on("metadata",e=>{this._debug("got metadata via ut_metadata"),this._onMetadata(e)}),e.ut_metadata.fetch()),"function"!=typeof M||this.private||(e.use(M()),e.ut_pex.on("peer",e=>{this.done||(this._debug("ut_pex: got peer: %s (from %s)",e,t),this.addPeer(e))}),e.ut_pex.on("dropped",e=>{const n=this._peers[e];n&&!n.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",e,t),this.removePeer(e))}),e.once("close",()=>{e.ut_pex.reset()})),this.emit("wire",e,t),this.metadata&&process.nextTick(()=>{this._onWireWithMetadata(e)})}_onWireWithMetadata(e){let t=null;const n=()=>{this.destroyed||e.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&e.amInterested?e.destroy():(t=setTimeout(n,5e3),t.unref&&t.unref()))};let i;const r=()=>{if(e.peerPieces.buffer.length===this.bitfield.buffer.length){for(i=0;i<this.pieces.length;++i)if(!e.peerPieces.get(i))return;e.isSeeder=!0,e.choke()}};e.on("bitfield",()=>{r(),this._update()}),e.on("have",()=>{r(),this._update()}),e.once("interested",()=>{e.unchoke()}),e.once("close",()=>{clearTimeout(t)}),e.on("choke",()=>{clearTimeout(t),t=setTimeout(n,5e3),t.unref&&t.unref()}),e.on("unchoke",()=>{clearTimeout(t),this._update()}),e.on("request",(t,n,i,r)=>{if(i>131072)return e.destroy();this.pieces[t]||this.store.get(t,{offset:n,length:i},r)}),e.bitfield(this.bitfield),e.uninterested(),e.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&e.port(this.client.dht.address().port),"webSeed"!==e.type&&(t=setTimeout(n,5e3),t.unref&&t.unref()),e.isSeeder=!1,r()}_updateSelections(){this.ready&&!this.destroyed&&(process.nextTick(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){for(let e=0;e<this._selections.length;++e){const t=this._selections[e],n=t.offset;for(;this.bitfield.get(t.from+t.offset)&&t.from+t.offset<t.to;)t.offset+=1;n!==t.offset&&t.notify(),t.to===t.from+t.offset&&(this.bitfield.get(t.from+t.offset)&&(this._selections.splice(e,1),e-=1,t.notify(),this._updateInterest()))}this._selections.length||this.emit("idle")}_updateInterest(){const e=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(e=>{let t=!1;for(let n=0;n<this.pieces.length;++n)if(this.pieces[n]&&e.peerPieces.get(n)){t=!0;break}t?e.interested():e.uninterested()}),e!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}_update(){if(this.destroyed)return;const e=x(this.wires);let t;for(;t=e();)this._updateWireWrapper(t)}_updateWireWrapper(e){const t=this;"undefined"!=typeof window&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback((function(){t._updateWire(e)}),{timeout:250}):t._updateWire(e)}_updateWire(e){const t=this;if(e.peerChoking)return;if(!e.downloaded)return function(){if(e.requests.length)return;let n=t._selections.length;for(;n--;){const i=t._selections[n];let s;if("rarest"===t.strategy){const n=i.from+i.offset,o=i.to,a=o-n+1,c={};let h=0;const l=r(n,o,c);for(;h<a&&(s=t._rarityMap.getRarestPiece(l),!(s<0));){if(t._request(e,s,!1))return;c[s]=!0,h+=1}}else for(s=i.to;s>=i.from+i.offset;--s)if(e.peerPieces.get(s)&&t._request(e,s,!1))return}}();const n=U(e,.5);if(e.requests.length>=n)return;const i=U(e,1);function r(t,n,i,r){return s=>s>=t&&s<=n&&!(s in i)&&e.peerPieces.get(s)&&(!r||r(s))}function s(e){let n=e;for(let i=e;i<t._selections.length&&t._selections[i].priority;i++)n=i;const i=t._selections[e];t._selections[e]=t._selections[n],t._selections[n]=i}function o(n){if(e.requests.length>=i)return!0;const o=function(){const n=e.downloadSpeed()||1;if(n>O)return()=>!0;const i=Math.max(1,e.requests.length)*b.BLOCK_LENGTH/n;let r=10,s=0;return e=>{if(!r||t.bitfield.get(e))return!0;let o=t.pieces[e].missing;for(;s<t.wires.length;s++){const a=t.wires[s],c=a.downloadSpeed();if(!(c<O)&&(!(c<=n)&&a.peerPieces.get(e)&&!((o-=c*i)>0)))return r--,!1}return!0}}();for(let a=0;a<t._selections.length;a++){const c=t._selections[a];let h;if("rarest"===t.strategy){const l=c.from+c.offset,d=c.to,u=d-l+1,f={};let p=0;const m=r(l,d,f,o);for(;p<u&&(h=t._rarityMap.getRarestPiece(m),!(h<0));){for(;t._request(e,h,t._critical[h]||n););if(!(e.requests.length<i))return c.priority&&s(a),!0;f[h]=!0,p++}}else for(h=c.from+c.offset;h<=c.to;h++)if(e.peerPieces.get(h)&&o(h)){for(;t._request(e,h,t._critical[h]||n););if(!(e.requests.length<i))return c.priority&&s(a),!0}}return!1}o(!1)||o(!0)}_rechoke(){if(!this.ready)return;this._rechokeOptimisticTime>0?this._rechokeOptimisticTime-=1:this._rechokeOptimisticWire=null;const e=[];this.wires.forEach(t=>{t.isSeeder||t===this._rechokeOptimisticWire||e.push({wire:t,downloadSpeed:t.downloadSpeed(),uploadSpeed:t.uploadSpeed(),salt:Math.random(),isChoked:!0})}),e.sort((function(e,t){if(e.downloadSpeed!==t.downloadSpeed)return t.downloadSpeed-e.downloadSpeed;if(e.uploadSpeed!==t.uploadSpeed)return t.uploadSpeed-e.uploadSpeed;if(e.wire.amChoking!==t.wire.amChoking)return e.wire.amChoking?1:-1;return e.salt-t.salt}));let t=0,n=0;for(;n<e.length&&t<this._rechokeNumSlots;++n)e[n].isChoked=!1,e[n].wire.peerInterested&&(t+=1);if(!this._rechokeOptimisticWire&&n<e.length&&this._rechokeNumSlots){const t=e.slice(n).filter(e=>e.wire.peerInterested),r=t[(i=t.length,Math.random()*i|0)];r&&(r.isChoked=!1,this._rechokeOptimisticWire=r.wire,this._rechokeOptimisticTime=2)}var i;e.forEach(e=>{e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())})}_hotswap(e,t){const n=e.downloadSpeed();if(n<b.BLOCK_LENGTH)return!1;if(!this._reservations[t])return!1;const i=this._reservations[t];if(!i)return!1;let r,s,o=1/0;for(s=0;s<i.length;s++){const t=i[s];if(!t||t===e)continue;const a=t.downloadSpeed();a>=O||(2*a>n||a>o||(r=t,o=a))}if(!r)return!1;for(s=0;s<i.length;s++)i[s]===r&&(i[s]=null);for(s=0;s<r.requests.length;s++){const e=r.requests[s];e.piece===t&&this.pieces[t].cancel(e.offset/b.BLOCK_LENGTH|0)}return this.emit("hotswap",r,e,t),!0}_request(e,t,n){const i=this,r=e.requests.length,s="webSeed"===e.type;if(i.bitfield.get(t))return!1;if(r>=(s?Math.min(function(e,t,n){return 1+Math.ceil(t*e.downloadSpeed()/n)}(e,1,i.pieceLength),i.maxWebConns):U(e,1)))return!1;const o=i.pieces[t];let a=s?o.reserveRemaining():o.reserve();if(-1===a&&n&&i._hotswap(e,t)&&(a=s?o.reserveRemaining():o.reserve()),-1===a)return!1;let c=i._reservations[t];c||(c=i._reservations[t]=[]);let h=c.indexOf(null);-1===h&&(h=c.length),c[h]=e;const l=o.chunkOffset(a),d=s?o.chunkLengthRemaining(a):o.chunkLength(a);function u(){process.nextTick(()=>{i._update()})}return e.request(t,l,d,(function n(r,f){if(i.destroyed)return;if(!i.ready)return i.once("ready",()=>{n(r,f)});if(c[h]===e&&(c[h]=null),o!==i.pieces[t])return u();if(r)return i._debug("error getting piece %s (offset: %s length: %s) from %s: %s",t,l,d,`${e.remoteAddress}:${e.remotePort}`,r.message),s?o.cancelRemaining(a):o.cancel(a),void u();if(i._debug("got piece %s (offset: %s length: %s) from %s",t,l,d,`${e.remoteAddress}:${e.remotePort}`),!o.set(a,f,e))return u();const p=o.flush();k(p,e=>{if(!i.destroyed){if(e===i._hashes[t]){if(!i.pieces[t])return;i._debug("piece verified %s",t),i.pieces[t]=null,i._reservations[t]=null,i.bitfield.set(t,!0),i.store.put(t,p),i.wires.forEach(e=>{e.have(t)}),i._checkDone()&&!i.destroyed&&i.discovery.complete()}else i.pieces[t]=new b(o.length),i.emit("warning",new Error(`Piece ${t} failed verification`));u()}})})),!0}_checkDone(){if(this.destroyed)return;this.files.forEach(e=>{if(!e.done){for(let t=e._startPiece;t<=e._endPiece;++t)if(!this.bitfield.get(t))return;e.done=!0,e.emit("done"),this._debug("file done: "+e.name)}});let e=!0;for(let t=0;t<this._selections.length;t++){const n=this._selections[t];for(let t=n.from;t<=n.to;t++)if(!this.bitfield.get(t)){e=!1;break}if(!e)break}return!this.done&&e&&(this.done=!0,this._debug("torrent done: "+this.infoHash),this.emit("done")),this._gcSelections(),e}load(e,t){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=j);const n=new f(e),i=new s(this.store,this.pieceLength);w(n,i,e=>{if(e)return t(e);this._markAllVerified(),this._checkDone(),t(null)})}createServer(e){if("function"!=typeof A)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");const t=new A(this,e);return this._servers.push(t),t}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const e=[].slice.call(arguments);e[0]=`[${this.client?this.client._debugId:"No Client"}] [${this._debugId}] ${e[0]}`,o(...e)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),"function"!=typeof p.connect||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const e=this._queue.shift();if(!e)return;this._debug("tcp connect attempt to %s",e.addr);const t=i(e.addr),n={host:t[0],port:t[1]},r=e.conn=p.connect(n);r.once("connect",()=>{e.onConnect()}),r.once("error",t=>{e.destroy(t)}),e.startConnectTimeout(),r.on("close",()=>{if(this.destroyed)return;if(e.retries>=R.length)return void this._debug("conn %s closed: will not re-add (max %s attempts)",e.addr,R.length);const t=R[e.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",e.addr,t,e.retries+1);const n=setTimeout(()=>{const t=this._addPeer(e.addr);t&&(t.retries=e.retries+1)},t);n.unref&&n.unref()})}_validAddr(e){let t;try{t=i(e)}catch(e){return!1}const n=t[0],r=t[1];return r>0&&r<65535&&!("127.0.0.1"===n&&r===this.client.torrentPort)}}},function(e,t,n){const i=n(42),r=n(4);class s extends r.Writable{constructor(e,t,n={}){if(super(n),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(!(t=Number(t)))throw new Error("Second argument must be a chunk length");this._blockstream=new i(t,{zeroPadding:!1}),this._outstandingPuts=0;let r=0;this._blockstream.on("data",t=>{this.destroyed||(this._outstandingPuts+=1,e.put(r,t,()=>{this._outstandingPuts-=1,0===this._outstandingPuts&&"function"==typeof this._finalCb&&(this._finalCb(null),this._finalCb=null)}),r+=1)}).on("error",e=>{this.destroy(e)})}_write(e,t,n){this._blockstream.write(e,t,n)}_final(e){this._blockstream.end(),this._blockstream.once("end",()=>{0===this._outstandingPuts?e(null):this._finalCb=e})}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}}e.exports=s},function(e,t,n){const i=n(1)("torrent-discovery"),r=n(54),s=n(0).EventEmitter,o=n(14),a=n(127);e.exports=class extends s{constructor(e){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!process.browser&&!e.port)throw new Error("Option `port` is required");this.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),this.infoHash="string"==typeof e.infoHash?e.infoHash.toLowerCase():e.infoHash.toString("hex"),this._port=e.port,this._userAgent=e.userAgent,this.destroyed=!1,this._announce=e.announce||[],this._intervalMs=e.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=e=>{this.emit("warning",e)},this._onError=e=>{this.emit("error",e)},this._onDHTPeer=(e,t)=>{t.toString("hex")===this.infoHash&&this.emit("peer",`${e.host}:${e.port}`,"dht")},this._onTrackerPeer=e=>{this.emit("peer",e,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")};const t=(e,t)=>{const n=new r(t);return n.on("warning",this._onWarning),n.on("error",this._onError),n.listen(e),this._internalDHT=!0,n};!1===e.tracker?this.tracker=null:e.tracker&&"object"==typeof e.tracker?(this._trackerOpts=Object.assign({},e.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),!1===e.dht||"function"!=typeof r?this.dht=null:e.dht&&"function"==typeof e.dht.addNode?this.dht=e.dht:e.dht&&"object"==typeof e.dht?this.dht=t(e.dhtPort,e.dht):this.dht=t(e.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce())}updatePort(e){e!==this._port&&(this._port=e,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(e){this.tracker&&this.tracker.complete(e)}destroy(e){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const t=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),t.push(e=>{this.tracker.destroy(e)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),t.push(e=>{this.dht.destroy(e)})),o(t,e),this.dht=null,this.tracker=null,this._announce=null}_createTracker(){const e=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new a(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t}_dhtAnnounce(){this._dhtAnnouncing||(i("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,e=>{this._dhtAnnouncing=!1,i("dht announce complete"),e&&this.emit("warning",e),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}}},function(e,t,n){const i=n(1)("bittorrent-tracker:client"),r=n(0),s=n(7),o=n(14),a=n(31),c=n(24),h=n(129),l=n(130),d=n(132);class u extends r{constructor(e={}){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!process.browser&&!e.port)throw new Error("Option `port` is required");this.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),this._peerIdBuffer=Buffer.from(this.peerId,"hex"),this._peerIdBinary=this._peerIdBuffer.toString("binary"),this.infoHash="string"==typeof e.infoHash?e.infoHash.toLowerCase():e.infoHash.toString("hex"),this._infoHashBuffer=Buffer.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary"),i("new client %s",this.infoHash),this.destroyed=!1,this._port=e.port,this._getAnnounceOpts=e.getAnnounceOpts,this._rtcConfig=e.rtcConfig,this._userAgent=e.userAgent,this._wrtc="function"==typeof e.wrtc?e.wrtc():e.wrtc;let t="string"==typeof e.announce?[e.announce]:null==e.announce?[]:e.announce;t=t.map(e=>("/"===(e=e.toString())[e.length-1]&&(e=e.substring(0,e.length-1)),e)),t=Array.from(new Set(t));const n=!1!==this._wrtc&&(!!this._wrtc||a.WEBRTC_SUPPORT),r=e=>{process.nextTick(()=>{this.emit("warning",e)})};this._trackers=t.map(e=>{let t;try{t=new URL(e)}catch(t){return r(new Error("Invalid tracker URL: "+e)),null}const i=t.port;if(i<0||i>65535)return r(new Error("Invalid tracker port: "+e)),null;const s=t.protocol;return"http:"!==s&&"https:"!==s||"function"!=typeof h?"udp:"===s&&"function"==typeof l?new l(this,e):"ws:"!==s&&"wss:"!==s||!n||"ws:"===s&&"undefined"!=typeof window&&"https:"===window.location.protocol?(r(new Error("Unsupported tracker protocol: "+e)),null):new d(this,e):new h(this,e)}).filter(Boolean)}start(e){(e=this._defaultAnnounceOpts(e)).event="started",i("send `start` %o",e),this._announce(e),this._trackers.forEach(e=>{e.setInterval()})}stop(e){(e=this._defaultAnnounceOpts(e)).event="stopped",i("send `stop` %o",e),this._announce(e)}complete(e){e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",i("send `complete` %o",e),this._announce(e)}update(e){(e=this._defaultAnnounceOpts(e)).event&&delete e.event,i("send `update` %o",e),this._announce(e)}_announce(e){this._trackers.forEach(t=>{t.announce(e)})}scrape(e){i("send `scrape`"),e||(e={}),this._trackers.forEach(t=>{t.scrape(e)})}setInterval(e){i("setInterval %d",e),this._trackers.forEach(t=>{t.setInterval(e)})}destroy(e){if(this.destroyed)return;this.destroyed=!0,i("destroy");const t=this._trackers.map(e=>t=>{e.destroy(t)});o(t,e),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(e={}){return null==e.numwant&&(e.numwant=c.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=Object.assign({},e,this._getAnnounceOpts())),e}}u.scrape=(e,t)=>{if(t=s(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");const n=Object.assign({},e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:Buffer.from("01234567890123456789"),port:6881}),i=new u(n);i.once("error",t),i.once("warning",t);let r=Array.isArray(e.infoHash)?e.infoHash.length:1;const o={};return i.on("scrape",e=>{if(r-=1,o[e.infoHash]=e,0===r){i.destroy();const e=Object.keys(o);1===e.length?t(null,o[e[0]]):t(null,o)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(e=>Buffer.from(e,"hex")):Buffer.from(e.infoHash,"hex"),i.scrape({infoHash:e.infoHash}),i},e.exports=u},function(e,t,n){var i=n(58);function r(e){var t=Buffer.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.IPV4_RE=/^[\d.]+$/,t.IPV6_RE=/^[\da-fA-F:]+$/,t.REMOVE_IPV4_MAPPED_IPV6_RE=/^::ffff:/,t.CONNECTION_ID=Buffer.concat([r(1047),r(655366528)]),t.ACTIONS={CONNECT:0,ANNOUNCE:1,SCRAPE:2,ERROR:3},t.EVENTS={update:0,completed:1,started:2,stopped:3},t.EVENT_IDS={0:"update",1:"completed",2:"started",3:"stopped"},t.EVENT_NAMES={update:"update",completed:"complete",started:"start",stopped:"stop"},t.REQUEST_TIMEOUT=15e3,t.DESTROY_TIMEOUT=1e3,t.toUInt32=r,t.querystringParse=function(e){return i.parse(e,null,null,{decodeURIComponent:unescape})},t.querystringStringify=function(e){var t=i.stringify(e,null,null,{encodeURIComponent:escape});return t=t.replace(/[@*/+]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){const i=n(16),r=n(9),s=n(35),o=n(1)("bittorrent-tracker:http-tracker"),a=n(20),c=n(24),h=n(36),l=/\/(announce)[^/]*$/;class d extends h{constructor(e,t,n){super(e,t),o("new http tracker %s",t),this.scrapeUrl=null;const i=this.announceUrl.match(l);if(i){const e=this.announceUrl.slice(0,i.index),t=this.announceUrl.slice(i.index+9);this.scrapeUrl=`${e}/scrape${t}`}this.cleanupFns=[],this.maybeDestroyCleanup=null}announce(e){if(this.destroyed)return;const t=Object.assign({},e,{compact:null==e.compact?1:e.compact,info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,port:this.client._port});this._trackerId&&(t.trackerid=this._trackerId),this._request(this.announceUrl,t,(e,t)=>{if(e)return this.client.emit("warning",e);this._onAnnounceResponse(t)})}scrape(e){if(this.destroyed)return;if(!this.scrapeUrl)return void this.client.emit("error",new Error("scrape not supported "+this.announceUrl));const t={info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(e=>e.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._request(this.scrapeUrl,t,(e,t)=>{if(e)return this.client.emit("warning",e);this._onScrapeResponse(t)})}destroy(e){const t=this;if(this.destroyed)return e(null);if(this.destroyed=!0,clearInterval(this.interval),0===this.cleanupFns.length)return i();var n=setTimeout(i,c.DESTROY_TIMEOUT);function i(){n&&(clearTimeout(n),n=null),t.maybeDestroyCleanup=null,t.cleanupFns.slice(0).forEach(e=>{e()}),t.cleanupFns=[],e(null)}this.maybeDestroyCleanup=()=>{0===this.cleanupFns.length&&i()}}_request(e,t,n){const s=this,h=e+(e.includes("?")?"&":"?")+c.querystringStringify(t);this.cleanupFns.push(d);let l=a.concat({url:h,timeout:c.REQUEST_TIMEOUT,headers:{"user-agent":this.client._userAgent||""}},(function(t,i,a){if(d(),s.destroyed)return;if(t)return n(t);if(200!==i.statusCode)return n(new Error(`Non-200 response code ${i.statusCode} from ${s.announceUrl}`));if(!a||0===a.length)return n(new Error("Invalid tracker response from"+s.announceUrl));try{a=r.decode(a)}catch(t){return n(new Error("Error decoding tracker response: "+t.message))}const c=a["failure reason"];if(c)return o(`failure from ${e} (${c})`),n(new Error(c));const h=a["warning message"];h&&(o(`warning from ${e} (${h})`),s.client.emit("warning",new Error(h)));o("response from "+e),n(null,a)}));function d(){l&&(i(s.cleanupFns,s.cleanupFns.indexOf(d)),l.abort(),l=null),s.maybeDestroyCleanup&&s.maybeDestroyCleanup()}}_onAnnounceResponse(e){const t=e.interval||e["min interval"];t&&this.setInterval(1e3*t);const n=e["tracker id"];n&&(this._trackerId=n);const i=Object.assign({},e,{announce:this.announceUrl,infoHash:c.binaryToHex(e.info_hash)});let r;if(this.client.emit("update",i),Buffer.isBuffer(e.peers)){try{r=s.multi(e.peers)}catch(e){return this.client.emit("warning",e)}r.forEach(e=>{this.client.emit("peer",e)})}else Array.isArray(e.peers)&&e.peers.forEach(e=>{this.client.emit("peer",`${e.ip}:${e.port}`)});if(Buffer.isBuffer(e.peers6)){try{r=s.multi6(e.peers6)}catch(e){return this.client.emit("warning",e)}r.forEach(e=>{this.client.emit("peer",e)})}else Array.isArray(e.peers6)&&e.peers6.forEach(e=>{const t=/^\[/.test(e.ip)||!/:/.test(e.ip)?e.ip:`[${e.ip}]`;this.client.emit("peer",`${t}:${e.port}`)})}_onScrapeResponse(e){e=e.files||e.host||{};const t=Object.keys(e);0!==t.length?t.forEach(t=>{const n=Object.assign(e[t],{announce:this.announceUrl,infoHash:c.binaryToHex(t)});this.client.emit("scrape",n)}):this.client.emit("warning",new Error("invalid scrape response"))}}d.prototype.DEFAULT_ANNOUNCE_INTERVAL=18e5,e.exports=d},function(e,t,n){const i=n(16),r=n(131),s=n(35),o=n(1)("bittorrent-tracker:udp-tracker"),a=n(56),c=n(8),h=n(24),l=n(36);class d extends l{constructor(e,t,n){super(e,t),o("new udp tracker %s",t),this.cleanupFns=[],this.maybeDestroyCleanup=null}announce(e){this.destroyed||this._request(e)}scrape(e){this.destroyed||(e._scrape=!0,this._request(e))}destroy(e){const t=this;if(this.destroyed)return e(null);if(this.destroyed=!0,clearInterval(this.interval),0===this.cleanupFns.length)return i();var n=setTimeout(i,h.DESTROY_TIMEOUT);function i(){n&&(clearTimeout(n),n=null),t.maybeDestroyCleanup=null,t.cleanupFns.slice(0).forEach(e=>{e()}),t.cleanupFns=[],e(null)}this.maybeDestroyCleanup=()=>{0===this.cleanupFns.length&&i()}}_request(e){const t=this;e||(e={});let{hostname:n,port:r}=new URL(this.announceUrl.replace(/^udp:/,"http:"));""===r&&(r=80);let c=u(),l=a.createSocket("udp4"),d=setTimeout(()=>{"stopped"===e.event?g():_(new Error(`tracker request timed out (${e.event})`)),d=null},h.REQUEST_TIMEOUT);function g(){if(d&&(clearTimeout(d),d=null),l){i(t.cleanupFns,t.cleanupFns.indexOf(g)),l.removeListener("error",_),l.removeListener("message",v),l.on("error",m);try{l.close()}catch(e){}l=null}t.maybeDestroyCleanup&&t.maybeDestroyCleanup()}function _(e){if(g(),!t.destroyed){try{e.message&&(e.message+=` (${t.announceUrl})`)}catch(e){}t.client.emit("warning",e)}}function v(n){if(n.length<8||n.readUInt32BE(4)!==c.readUInt32BE(0))return _(new Error("tracker sent invalid transaction id"));const i=n.readUInt32BE(0);switch(o("UDP response %s, action %s",t.announceUrl,i),i){case 0:if(n.length<16)return _(new Error("invalid udp handshake"));e._scrape?function(n){c=u();const i=Array.isArray(e.infoHash)&&e.infoHash.length>0?Buffer.concat(e.infoHash):e.infoHash||t.client._infoHashBuffer;y(Buffer.concat([n,h.toUInt32(h.ACTIONS.SCRAPE),c,i]))}(n.slice(8,16)):function(e,n){c=u(),y(Buffer.concat([e,h.toUInt32(h.ACTIONS.ANNOUNCE),c,t.client._infoHashBuffer,t.client._peerIdBuffer,p(n.downloaded),null!=n.left?p(n.left):Buffer.from("FFFFFFFFFFFFFFFF","hex"),p(n.uploaded),h.toUInt32(h.EVENTS[n.event]||0),h.toUInt32(0),h.toUInt32(0),h.toUInt32(n.numwant),f(t.client._port)]))}(n.slice(8,16),e);break;case 1:{if(g(),t.destroyed)return;if(n.length<20)return _(new Error("invalid announce message"));const e=n.readUInt32BE(8);let i;e&&t.setInterval(1e3*e),t.client.emit("update",{announce:t.announceUrl,complete:n.readUInt32BE(16),incomplete:n.readUInt32BE(12)});try{i=s.multi(n.slice(20))}catch(e){return t.client.emit("warning",e)}i.forEach(e=>{t.client.emit("peer",e)});break}case 2:{if(g(),t.destroyed)return;if(n.length<20||(n.length-8)%12!=0)return _(new Error("invalid scrape message"));const i=Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(e=>e.toString("hex")):[e.infoHash&&e.infoHash.toString("hex")||t.client.infoHash];for(let e=0,r=(n.length-8)/12;e<r;e+=1)t.client.emit("scrape",{announce:t.announceUrl,infoHash:i[e],complete:n.readUInt32BE(8+12*e),downloaded:n.readUInt32BE(12+12*e),incomplete:n.readUInt32BE(16+12*e)});break}case 3:if(g(),t.destroyed)return;if(n.length<8)return _(new Error("invalid error message"));t.client.emit("warning",new Error(n.slice(8).toString()));break;default:_(new Error("tracker sent invalid action"))}}function y(e){l.send(e,0,e.length,r,n)}d.unref&&d.unref(),this.cleanupFns.push(g),y(Buffer.concat([h.CONNECTION_ID,h.toUInt32(h.ACTIONS.CONNECT),c])),l.once("error",_),l.on("message",v)}}function u(){return c(4)}function f(e){const t=Buffer.allocUnsafe(2);return t.writeUInt16BE(e,0),t}d.prototype.DEFAULT_ANNOUNCE_INTERVAL=18e5;function p(e){if(e>4294967295||"string"==typeof e){const t=new r(e).toArray();for(;t.length<8;)t.unshift(0);return Buffer.from(t)}return Buffer.concat([h.toUInt32(0),h.toUInt32(e)])}function m(){}e.exports=d},function(e,t,n){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o=n(10).Buffer}catch(e){}function a(e,t,n){for(var r=0,s=Math.min(e.length,n),o=0,a=t;a<s;a++){var c,h=e.charCodeAt(a)-48;r<<=4,r|=c=h>=49&&h<=54?h-49+10:h>=17&&h<=22?h-17+10:h,o|=c}return i(!(240&o),"Invalid character in "+e),r}function c(e,t,n,r){for(var s=0,o=0,a=Math.min(e.length,n),c=t;c<a;c++){var h=e.charCodeAt(c)-48;s*=r,o=h>=49?h-49+10:h>=17?h-17+10:h,i(h>=0&&o<r,"Invalid character"),s+=o}return s}function h(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this._strip(),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,o,a=0;if("be"===n)for(r=e.length-1,s=0;r>=0;r-=3)o=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===n)for(r=0,s=0;r<e.length;r+=3)o=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,r,s=0;for(n=e.length-6,i=0;n>=t;n-=6)r=a(e,n,n+6),this.words[i]|=r<<s&67108863,this.words[i+1]|=r>>>26-s&4194303,(s+=24)>=26&&(s-=26,i++);n+6!==t&&(r=a(e,t,n+6),this.words[i]|=r<<s&67108863,this.words[i+1]|=r>>>26-s&4194303),this._strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var s=e.length-n,o=s%i,a=Math.min(s,s-o)+n,h=0,l=n;l<a;l+=i)h=c(e,l,l+i,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var d=1;for(h=c(e,l,e.length,t),l=0;l<o;l++)d*=t;this.imuln(d),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){h(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l:s.prototype.inspect=l;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var r=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<r|s)).toString(16);n=0!==(s=a>>>24-r&16777215)||o!==this.length-1?d[6-c.length]+c+n:c+n,(r+=2)>=26&&(r-=26,o--)}for(0!==s&&(n=s.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],l=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(l).toString(e);n=(p=p.idivn(l)).isZero()?m+n:d[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],s=0|t.words[0],o=r*s,a=67108863&o,c=o/67108864|0;n.words[0]=a;for(var h=1;h<i;h++){for(var l=c>>>26,d=67108863&c,u=Math.min(h,t.length-1),f=Math.max(0,h-e.length+1);f<=u;f++){var p=h-f|0;l+=(o=(r=0|e.words[p])*(s=0|t.words[f])+d)/67108864|0,d=67108863&o}n.words[h]=0|d,c=0|l}return 0!==c?n.words[h]=0|c:n.length--,n._strip()}s.prototype.toArrayLike=function(e,t,n){this._strip();var r=this.byteLength(),s=n||Math.max(1,r);i(r<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,r),o},s.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,r=0,s=0;r<this.length;r++){var o=this.words[r]<<s|i;e[n++]=255&o,n<e.length&&(e[n++]=o>>8&255),n<e.length&&(e[n++]=o>>16&255),6===s?(n<e.length&&(e[n++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,r=0,s=0;r<this.length;r++){var o=this.words[r]<<s|i;e[n--]=255&o,n>=0&&(e[n--]=o>>8&255),n>=0&&(e[n--]=o>>16&255),6===s?(n>=0&&(e[n--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this._strip()},s.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)t=(0|n.words[s])+(0|i.words[s])+r,this.words[s]=67108863&t,r=t>>>26;for(;0!==r&&s<n.length;s++)t=(0|n.words[s])+r,this.words[s]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var s=0,o=0;o<i.length;o++)s=(t=(0|n.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)s=(t=(0|n.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var i,r,s,o=e.words,a=t.words,c=n.words,h=0,l=0|o[0],d=8191&l,u=l>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],_=8191&g,v=g>>>13,y=0|o[3],b=8191&y,w=y>>>13,x=0|o[4],k=8191&x,E=x>>>13,S=0|o[5],M=8191&S,I=S>>>13,C=0|o[6],B=8191&C,T=C>>>13,A=0|o[7],O=8191&A,L=A>>>13,R=0|o[8],N=8191&R,P=R>>>13,U=0|o[9],j=8191&U,q=U>>>13,D=0|a[0],F=8191&D,H=D>>>13,z=0|a[1],W=8191&z,$=z>>>13,G=0|a[2],V=8191&G,K=G>>>13,Y=0|a[3],Z=8191&Y,Q=Y>>>13,J=0|a[4],X=8191&J,ee=J>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],se=8191&re,oe=re>>>13,ae=0|a[7],ce=8191&ae,he=ae>>>13,le=0|a[8],de=8191&le,ue=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(h+(i=Math.imul(d,F))|0)+((8191&(r=(r=Math.imul(d,H))+Math.imul(u,F)|0))<<13)|0;h=((s=Math.imul(u,H))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,F),r=(r=Math.imul(p,H))+Math.imul(m,F)|0,s=Math.imul(m,H);var _e=(h+(i=i+Math.imul(d,W)|0)|0)+((8191&(r=(r=r+Math.imul(d,$)|0)+Math.imul(u,W)|0))<<13)|0;h=((s=s+Math.imul(u,$)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(_,F),r=(r=Math.imul(_,H))+Math.imul(v,F)|0,s=Math.imul(v,H),i=i+Math.imul(p,W)|0,r=(r=r+Math.imul(p,$)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,$)|0;var ve=(h+(i=i+Math.imul(d,V)|0)|0)+((8191&(r=(r=r+Math.imul(d,K)|0)+Math.imul(u,V)|0))<<13)|0;h=((s=s+Math.imul(u,K)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(b,F),r=(r=Math.imul(b,H))+Math.imul(w,F)|0,s=Math.imul(w,H),i=i+Math.imul(_,W)|0,r=(r=r+Math.imul(_,$)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,$)|0,i=i+Math.imul(p,V)|0,r=(r=r+Math.imul(p,K)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,K)|0;var ye=(h+(i=i+Math.imul(d,Z)|0)|0)+((8191&(r=(r=r+Math.imul(d,Q)|0)+Math.imul(u,Z)|0))<<13)|0;h=((s=s+Math.imul(u,Q)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(k,F),r=(r=Math.imul(k,H))+Math.imul(E,F)|0,s=Math.imul(E,H),i=i+Math.imul(b,W)|0,r=(r=r+Math.imul(b,$)|0)+Math.imul(w,W)|0,s=s+Math.imul(w,$)|0,i=i+Math.imul(_,V)|0,r=(r=r+Math.imul(_,K)|0)+Math.imul(v,V)|0,s=s+Math.imul(v,K)|0,i=i+Math.imul(p,Z)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,Q)|0;var be=(h+(i=i+Math.imul(d,X)|0)|0)+((8191&(r=(r=r+Math.imul(d,ee)|0)+Math.imul(u,X)|0))<<13)|0;h=((s=s+Math.imul(u,ee)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(M,F),r=(r=Math.imul(M,H))+Math.imul(I,F)|0,s=Math.imul(I,H),i=i+Math.imul(k,W)|0,r=(r=r+Math.imul(k,$)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,$)|0,i=i+Math.imul(b,V)|0,r=(r=r+Math.imul(b,K)|0)+Math.imul(w,V)|0,s=s+Math.imul(w,K)|0,i=i+Math.imul(_,Z)|0,r=(r=r+Math.imul(_,Q)|0)+Math.imul(v,Z)|0,s=s+Math.imul(v,Q)|0,i=i+Math.imul(p,X)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,ee)|0;var we=(h+(i=i+Math.imul(d,ne)|0)|0)+((8191&(r=(r=r+Math.imul(d,ie)|0)+Math.imul(u,ne)|0))<<13)|0;h=((s=s+Math.imul(u,ie)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(B,F),r=(r=Math.imul(B,H))+Math.imul(T,F)|0,s=Math.imul(T,H),i=i+Math.imul(M,W)|0,r=(r=r+Math.imul(M,$)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,$)|0,i=i+Math.imul(k,V)|0,r=(r=r+Math.imul(k,K)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,K)|0,i=i+Math.imul(b,Z)|0,r=(r=r+Math.imul(b,Q)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,Q)|0,i=i+Math.imul(_,X)|0,r=(r=r+Math.imul(_,ee)|0)+Math.imul(v,X)|0,s=s+Math.imul(v,ee)|0,i=i+Math.imul(p,ne)|0,r=(r=r+Math.imul(p,ie)|0)+Math.imul(m,ne)|0,s=s+Math.imul(m,ie)|0;var xe=(h+(i=i+Math.imul(d,se)|0)|0)+((8191&(r=(r=r+Math.imul(d,oe)|0)+Math.imul(u,se)|0))<<13)|0;h=((s=s+Math.imul(u,oe)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(O,F),r=(r=Math.imul(O,H))+Math.imul(L,F)|0,s=Math.imul(L,H),i=i+Math.imul(B,W)|0,r=(r=r+Math.imul(B,$)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,$)|0,i=i+Math.imul(M,V)|0,r=(r=r+Math.imul(M,K)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,K)|0,i=i+Math.imul(k,Z)|0,r=(r=r+Math.imul(k,Q)|0)+Math.imul(E,Z)|0,s=s+Math.imul(E,Q)|0,i=i+Math.imul(b,X)|0,r=(r=r+Math.imul(b,ee)|0)+Math.imul(w,X)|0,s=s+Math.imul(w,ee)|0,i=i+Math.imul(_,ne)|0,r=(r=r+Math.imul(_,ie)|0)+Math.imul(v,ne)|0,s=s+Math.imul(v,ie)|0,i=i+Math.imul(p,se)|0,r=(r=r+Math.imul(p,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0;var ke=(h+(i=i+Math.imul(d,ce)|0)|0)+((8191&(r=(r=r+Math.imul(d,he)|0)+Math.imul(u,ce)|0))<<13)|0;h=((s=s+Math.imul(u,he)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(N,F),r=(r=Math.imul(N,H))+Math.imul(P,F)|0,s=Math.imul(P,H),i=i+Math.imul(O,W)|0,r=(r=r+Math.imul(O,$)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,$)|0,i=i+Math.imul(B,V)|0,r=(r=r+Math.imul(B,K)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,K)|0,i=i+Math.imul(M,Z)|0,r=(r=r+Math.imul(M,Q)|0)+Math.imul(I,Z)|0,s=s+Math.imul(I,Q)|0,i=i+Math.imul(k,X)|0,r=(r=r+Math.imul(k,ee)|0)+Math.imul(E,X)|0,s=s+Math.imul(E,ee)|0,i=i+Math.imul(b,ne)|0,r=(r=r+Math.imul(b,ie)|0)+Math.imul(w,ne)|0,s=s+Math.imul(w,ie)|0,i=i+Math.imul(_,se)|0,r=(r=r+Math.imul(_,oe)|0)+Math.imul(v,se)|0,s=s+Math.imul(v,oe)|0,i=i+Math.imul(p,ce)|0,r=(r=r+Math.imul(p,he)|0)+Math.imul(m,ce)|0,s=s+Math.imul(m,he)|0;var Ee=(h+(i=i+Math.imul(d,de)|0)|0)+((8191&(r=(r=r+Math.imul(d,ue)|0)+Math.imul(u,de)|0))<<13)|0;h=((s=s+Math.imul(u,ue)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(j,F),r=(r=Math.imul(j,H))+Math.imul(q,F)|0,s=Math.imul(q,H),i=i+Math.imul(N,W)|0,r=(r=r+Math.imul(N,$)|0)+Math.imul(P,W)|0,s=s+Math.imul(P,$)|0,i=i+Math.imul(O,V)|0,r=(r=r+Math.imul(O,K)|0)+Math.imul(L,V)|0,s=s+Math.imul(L,K)|0,i=i+Math.imul(B,Z)|0,r=(r=r+Math.imul(B,Q)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,Q)|0,i=i+Math.imul(M,X)|0,r=(r=r+Math.imul(M,ee)|0)+Math.imul(I,X)|0,s=s+Math.imul(I,ee)|0,i=i+Math.imul(k,ne)|0,r=(r=r+Math.imul(k,ie)|0)+Math.imul(E,ne)|0,s=s+Math.imul(E,ie)|0,i=i+Math.imul(b,se)|0,r=(r=r+Math.imul(b,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,i=i+Math.imul(_,ce)|0,r=(r=r+Math.imul(_,he)|0)+Math.imul(v,ce)|0,s=s+Math.imul(v,he)|0,i=i+Math.imul(p,de)|0,r=(r=r+Math.imul(p,ue)|0)+Math.imul(m,de)|0,s=s+Math.imul(m,ue)|0;var Se=(h+(i=i+Math.imul(d,pe)|0)|0)+((8191&(r=(r=r+Math.imul(d,me)|0)+Math.imul(u,pe)|0))<<13)|0;h=((s=s+Math.imul(u,me)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(j,W),r=(r=Math.imul(j,$))+Math.imul(q,W)|0,s=Math.imul(q,$),i=i+Math.imul(N,V)|0,r=(r=r+Math.imul(N,K)|0)+Math.imul(P,V)|0,s=s+Math.imul(P,K)|0,i=i+Math.imul(O,Z)|0,r=(r=r+Math.imul(O,Q)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,Q)|0,i=i+Math.imul(B,X)|0,r=(r=r+Math.imul(B,ee)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(M,ne)|0,r=(r=r+Math.imul(M,ie)|0)+Math.imul(I,ne)|0,s=s+Math.imul(I,ie)|0,i=i+Math.imul(k,se)|0,r=(r=r+Math.imul(k,oe)|0)+Math.imul(E,se)|0,s=s+Math.imul(E,oe)|0,i=i+Math.imul(b,ce)|0,r=(r=r+Math.imul(b,he)|0)+Math.imul(w,ce)|0,s=s+Math.imul(w,he)|0,i=i+Math.imul(_,de)|0,r=(r=r+Math.imul(_,ue)|0)+Math.imul(v,de)|0,s=s+Math.imul(v,ue)|0;var Me=(h+(i=i+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;h=((s=s+Math.imul(m,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(j,V),r=(r=Math.imul(j,K))+Math.imul(q,V)|0,s=Math.imul(q,K),i=i+Math.imul(N,Z)|0,r=(r=r+Math.imul(N,Q)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,Q)|0,i=i+Math.imul(O,X)|0,r=(r=r+Math.imul(O,ee)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(B,ne)|0,r=(r=r+Math.imul(B,ie)|0)+Math.imul(T,ne)|0,s=s+Math.imul(T,ie)|0,i=i+Math.imul(M,se)|0,r=(r=r+Math.imul(M,oe)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,i=i+Math.imul(k,ce)|0,r=(r=r+Math.imul(k,he)|0)+Math.imul(E,ce)|0,s=s+Math.imul(E,he)|0,i=i+Math.imul(b,de)|0,r=(r=r+Math.imul(b,ue)|0)+Math.imul(w,de)|0,s=s+Math.imul(w,ue)|0;var Ie=(h+(i=i+Math.imul(_,pe)|0)|0)+((8191&(r=(r=r+Math.imul(_,me)|0)+Math.imul(v,pe)|0))<<13)|0;h=((s=s+Math.imul(v,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(j,Z),r=(r=Math.imul(j,Q))+Math.imul(q,Z)|0,s=Math.imul(q,Q),i=i+Math.imul(N,X)|0,r=(r=r+Math.imul(N,ee)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,ee)|0,i=i+Math.imul(O,ne)|0,r=(r=r+Math.imul(O,ie)|0)+Math.imul(L,ne)|0,s=s+Math.imul(L,ie)|0,i=i+Math.imul(B,se)|0,r=(r=r+Math.imul(B,oe)|0)+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,i=i+Math.imul(M,ce)|0,r=(r=r+Math.imul(M,he)|0)+Math.imul(I,ce)|0,s=s+Math.imul(I,he)|0,i=i+Math.imul(k,de)|0,r=(r=r+Math.imul(k,ue)|0)+Math.imul(E,de)|0,s=s+Math.imul(E,ue)|0;var Ce=(h+(i=i+Math.imul(b,pe)|0)|0)+((8191&(r=(r=r+Math.imul(b,me)|0)+Math.imul(w,pe)|0))<<13)|0;h=((s=s+Math.imul(w,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(j,X),r=(r=Math.imul(j,ee))+Math.imul(q,X)|0,s=Math.imul(q,ee),i=i+Math.imul(N,ne)|0,r=(r=r+Math.imul(N,ie)|0)+Math.imul(P,ne)|0,s=s+Math.imul(P,ie)|0,i=i+Math.imul(O,se)|0,r=(r=r+Math.imul(O,oe)|0)+Math.imul(L,se)|0,s=s+Math.imul(L,oe)|0,i=i+Math.imul(B,ce)|0,r=(r=r+Math.imul(B,he)|0)+Math.imul(T,ce)|0,s=s+Math.imul(T,he)|0,i=i+Math.imul(M,de)|0,r=(r=r+Math.imul(M,ue)|0)+Math.imul(I,de)|0,s=s+Math.imul(I,ue)|0;var Be=(h+(i=i+Math.imul(k,pe)|0)|0)+((8191&(r=(r=r+Math.imul(k,me)|0)+Math.imul(E,pe)|0))<<13)|0;h=((s=s+Math.imul(E,me)|0)+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(j,ne),r=(r=Math.imul(j,ie))+Math.imul(q,ne)|0,s=Math.imul(q,ie),i=i+Math.imul(N,se)|0,r=(r=r+Math.imul(N,oe)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,i=i+Math.imul(O,ce)|0,r=(r=r+Math.imul(O,he)|0)+Math.imul(L,ce)|0,s=s+Math.imul(L,he)|0,i=i+Math.imul(B,de)|0,r=(r=r+Math.imul(B,ue)|0)+Math.imul(T,de)|0,s=s+Math.imul(T,ue)|0;var Te=(h+(i=i+Math.imul(M,pe)|0)|0)+((8191&(r=(r=r+Math.imul(M,me)|0)+Math.imul(I,pe)|0))<<13)|0;h=((s=s+Math.imul(I,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(j,se),r=(r=Math.imul(j,oe))+Math.imul(q,se)|0,s=Math.imul(q,oe),i=i+Math.imul(N,ce)|0,r=(r=r+Math.imul(N,he)|0)+Math.imul(P,ce)|0,s=s+Math.imul(P,he)|0,i=i+Math.imul(O,de)|0,r=(r=r+Math.imul(O,ue)|0)+Math.imul(L,de)|0,s=s+Math.imul(L,ue)|0;var Ae=(h+(i=i+Math.imul(B,pe)|0)|0)+((8191&(r=(r=r+Math.imul(B,me)|0)+Math.imul(T,pe)|0))<<13)|0;h=((s=s+Math.imul(T,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(j,ce),r=(r=Math.imul(j,he))+Math.imul(q,ce)|0,s=Math.imul(q,he),i=i+Math.imul(N,de)|0,r=(r=r+Math.imul(N,ue)|0)+Math.imul(P,de)|0,s=s+Math.imul(P,ue)|0;var Oe=(h+(i=i+Math.imul(O,pe)|0)|0)+((8191&(r=(r=r+Math.imul(O,me)|0)+Math.imul(L,pe)|0))<<13)|0;h=((s=s+Math.imul(L,me)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(j,de),r=(r=Math.imul(j,ue))+Math.imul(q,de)|0,s=Math.imul(q,ue);var Le=(h+(i=i+Math.imul(N,pe)|0)|0)+((8191&(r=(r=r+Math.imul(N,me)|0)+Math.imul(P,pe)|0))<<13)|0;h=((s=s+Math.imul(P,me)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863;var Re=(h+(i=Math.imul(j,pe))|0)+((8191&(r=(r=Math.imul(j,me))+Math.imul(q,pe)|0))<<13)|0;return h=((s=Math.imul(q,me))+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,c[0]=ge,c[1]=_e,c[2]=ve,c[3]=ye,c[4]=be,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Ee,c[9]=Se,c[10]=Me,c[11]=Ie,c[12]=Ce,c[13]=Be,c[14]=Te,c[15]=Ae,c[16]=Oe,c[17]=Le,c[18]=Re,0!==h&&(c[19]=h,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,s=0;s<n.length-1;s++){var o=r;r=0;for(var a=67108863&i,c=Math.min(s,t.length-1),h=Math.max(0,s-e.length+1);h<=c;h++){var l=s-h,d=(0|e.words[l])*(0|t.words[h]),u=67108863&d;a=67108863&(u=u+a|0),r+=(o=(o=o+(d/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}n.words[s]=a,i=o,o=r}return 0!==i?n.words[s]=i:n.length--,n._strip()}function _(e,t,n){return g(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?p(this,e,t):n<1024?g(this,e,t):_(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},v.prototype.permute=function(e,t,n,i,r,s){for(var o=0;o<s;o++)i[o]=t[e[o]],r[o]=n[e[o]]},v.prototype.transform=function(e,t,n,i,r,s){this.permute(s,e,t,n,i,r);for(var o=1;o<r;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<r;l+=a)for(var d=c,u=h,f=0;f<o;f++){var p=n[l+f],m=i[l+f],g=n[l+f+o],_=i[l+f+o],v=d*g-u*_;_=d*_+u*g,g=v,n[l+f]=p+g,i[l+f]=m+_,n[l+f+o]=p-g,i[l+f+o]=m-_,f!==a&&(v=c*d-h*u,u=c*u+h*d,d=v)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},v.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},v.prototype.convert13b=function(e,t,n,r){for(var s=0,o=0;o<t;o++)s+=0|e[o],n[2*o]=8191&s,s>>>=13,n[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<r;++o)n[o]=0;i(0===s),i(0==(-8192&s))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),c=new Array(i),h=new Array(i),l=new Array(i),d=new Array(i),u=n.words;u.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,h,i),this.transform(o,s,a,c,i,r),this.transform(h,s,l,d,i,r);for(var f=0;f<i;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,i),this.transform(a,c,u,s,i,r),this.conjugate(u,s,i),this.normalize13b(u,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),_(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var n=0,r=0;r<this.length;r++){var s=(0|this.words[r])*e,o=(67108863&s)+(67108863&n);n>>=26,n+=s/67108864|0,n+=o>>>26,this.words[r]=67108863&o}return 0!==n&&(this.words[r]=n,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=e.words[i]>>>r&1}return t}(e);if(0===t.length)return new s(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var r;i("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=n;if(r-=o,r=Math.max(0,r),c){for(var h=0;h<o;h++)c.words[h]=this.words[h];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=r);h--){var d=0|this.words[h];this.words[h]=l<<26-s|d>>>s,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;return!(this.length<=n)&&!!(this.words[n]&r)},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var r,s,o=e.length+n;this._expand(o);var a=0;for(r=0;r<e.length;r++){s=(0|this.words[r+n])+a;var c=(0|e.words[r])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[r+n]=67108863&s}for(;r<this.length-n;r++)a=(s=(0|this.words[r+n])+a)>>26,this.words[r+n]=67108863&s;if(0===a)return this._strip();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(s=-(0|this.words[r])+a)>>26,this.words[r]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),r=e,o=0|r.words[r.length-1];0!==(n=26-this._countBits(o))&&(r=r.ushln(n),i.iushln(n),o=0|r.words[r.length-1]);var a,c=i.length-r.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=i.clone()._ishlnsubmul(r,1,c);0===l.negative&&(i=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var u=67108864*(0|i.words[r.length+d])+(0|i.words[r.length+d-1]);for(u=Math.min(u/o|0,67108863),i._ishlnsubmul(r,u,d);0!==i.negative;)u--,i.negative=0,i._ishlnsubmul(r,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=u)}return a&&a._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:a||null,mod:i}},s.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:r,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),s=n.cmp(i);return s<0||1===r&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=(1<<26)%e,r=0,s=this.length-1;s>=0;s--)r=(n*r+(0|this.words[s]))%e;return t?-r:r},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=0,r=this.length-1;r>=0;r--){var s=(0|this.words[r])+67108864*n;this.words[r]=s/e|0,n=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new s(1),o=new s(0),a=new s(0),c=new s(1),h=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var u=0,f=1;0==(t.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(l),o.isub(d)),r.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a),o.isub(c)):(n.isub(t),a.isub(r),c.isub(o))}return{a:a,b:c,gcd:n.iushln(h)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,o=new s(1),a=new s(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(t.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(t.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,u=1;0==(n.words[0]&u)&&d<26;++d,u<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(r=0===t.cmpn(1)?o:a).cmpn(0)<0&&r.iadd(e),r},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var s=t;t=n,n=s}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var s=r,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new S(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n._strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(w,b),w.prototype.split=function(e,t){for(var n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=4194303&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|r>>>22,r=s}r>>>=22,e.words[i-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(x,b),r(k,b),r(E,b),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new x;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return y[e]=t,t},S.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(h(e,e.umod(this.m)._forceRed(this)),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),o=0;!r.isZero()&&0===r.andln(1);)o++,r.iushrn(1);i(!r.isZero());var a=new s(1).toRed(this),c=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,h).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,r),u=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<p);var _=this.pow(d,new s(1).iushln(p-g-1));u=u.redMul(_),d=_.redSqr(),f=f.redMul(d),p=g}return u},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new s(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var r=n[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var h=t.words[i],l=c-1;l>=0;l--){var d=h>>l&1;r!==n[0]&&(r=this.sqr(r)),0!==d||0!==o?(o<<=1,o|=d,(4===++a||0===i&&0===l)&&(r=this.mul(r,n[o]),a=0,o=0)):a=0}c=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new M(e)},r(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(65)(e))},function(e,t,n){const i=n(1)("bittorrent-tracker:websocket-tracker"),r=n(31),s=n(8),o=n(133),a=n(24),c=n(36),h={};class l extends c{constructor(e,t,n){super(e,t),i("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(e)});const t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),"stopped"===e.event||"completed"===e.event)this._send(t);else{const n=Math.min(e.numwant,10);this._generateOffers(n,e=>{t.numwant=n,t.offers=e,this._send(t)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(e)});const t={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(e=>e.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(t)}destroy(e=d){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const e in this.peers){const t=this.peers[e];clearTimeout(t.trackerTimeout),t.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,h[this.announceUrl]&&(h[this.announceUrl].consumers-=1),h[this.announceUrl].consumers>0)return e();let t=h[this.announceUrl];if(delete h[this.announceUrl],t.on("error",d),t.once("close",e),!this.expectingResponse)return i();var n=setTimeout(i,a.DESTROY_TIMEOUT);function i(){n&&(clearTimeout(n),n=null),t.removeListener("data",i),t.destroy(),t=null}t.once("data",i)}_openSocket(){this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=h[this.announceUrl],this.socket?(h[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=h[this.announceUrl]=new o(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?this._onAnnounceResponse(e):"scrape"===e.action?this._onScrapeResponse(e):this._onSocketError(new Error("invalid action in WS response: "+e.action))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary)return void i("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,a.binaryToHex(e.info_hash),this.client.infoHash);if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;i("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);const t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));const n=e["warning message"];n&&this.client.emit("warning",new Error(n));const r=e.interval||e["min interval"];r&&this.setInterval(1e3*r);const s=e["tracker id"];if(s&&(this._trackerId=s),null!=e.complete){const t=Object.assign({},e,{announce:this.announceUrl,infoHash:a.binaryToHex(e.info_hash)});this.client.emit("update",t)}let o;if(e.offer&&e.peer_id&&(i("creating peer (from remote offer)"),o=this._createPeer(),o.id=a.binaryToHex(e.peer_id),o.once("signal",t=>{const n={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:t,offer_id:e.offer_id};this._trackerId&&(n.trackerid=this._trackerId),this._send(n)}),o.signal(e.offer),this.client.emit("peer",o)),e.answer&&e.peer_id){const t=a.binaryToHex(e.offer_id);o=this.peers[t],o?(o.id=a.binaryToHex(e.peer_id),o.signal(e.answer),this.client.emit("peer",o),clearTimeout(o.trackerTimeout),o.trackerTimeout=null,delete this.peers[t]):i("got unexpected answer: "+JSON.stringify(e.answer))}}_onScrapeResponse(e){e=e.files||{};const t=Object.keys(e);0!==t.length?t.forEach(t=>{const n=Object.assign(e[t],{announce:this.announceUrl,infoHash:a.binaryToHex(t)});this.client.emit("scrape",n)}):this.client.emit("warning",new Error("invalid scrape response"))}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){const e=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),i("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;const t=JSON.stringify(e);i("send %s",t),this.socket.send(t)}_generateOffers(e,t){const n=this,r=[];i("generating %s offers",e);for(let t=0;t<e;++t)o();function o(){const e=s(20).toString("hex");i("creating peer (from _generateOffers)");const t=n.peers[e]=n._createPeer({initiator:!0});t.once("signal",t=>{r.push({offer:t,offer_id:a.hexToBinary(e)}),c()}),t.trackerTimeout=setTimeout(()=>{i("tracker timeout: destroying peer"),t.trackerTimeout=null,delete n.peers[e],t.destroy()},5e4),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function c(){r.length===e&&(i("generated %s offers",e),t(r))}c()}_createPeer(e){const t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);const n=new r(e);return n.once("error",i),n.once("connect",(function e(){n.removeListener("error",i),n.removeListener("connect",e)})),n;function i(e){t.client.emit("warning",new Error("Connection error: "+e.message)),n.destroy()}}}function d(){}l.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,l._socketPool=h,e.exports=l},function(e,t,n){const i=n(1)("simple-websocket"),r=n(8),s=n(4),o=n(32),a=n(134),c="function"!=typeof a?WebSocket:a;class h extends s.Duplex{constructor(e={}){if("string"==typeof e&&(e={url:e}),super(e=Object.assign({allowHalfOpen:!1},e)),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=r(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===c.OPEN;else{this.url=e.url;try{this._ws="function"==typeof a?new c(e.url,e):new c(e.url)}catch(e){return void o(()=>this.destroy(e))}}this._ws.binaryType="arraybuffer",this._ws.onopen=()=>{this._onOpen()},this._ws.onmessage=e=>{this._onMessage(e)},this._ws.onclose=()=>{this._onClose()},this._ws.onerror=()=>{this.destroy(new Error("connection error to "+this.url))},this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){const t=this._ws,n=()=>{t.onclose=null};if(t.readyState===c.CLOSED)n();else try{t.onclose=n,t.close()}catch(e){n()}t.onopen=null,t.onmessage=null,t.onerror=()=>{}}if(this._ws=null,e){if("undefined"!=typeof DOMException&&e instanceof DOMException){const t=e.code;(e=new Error(e.message)).code=t}this.emit("error",e)}this.emit("close"),t()}}_read(){}_write(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this.destroy(e)}"function"!=typeof a&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=Buffer.from(t)),this.push(t)}_onOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(e)}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"function"!=typeof a&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onClose(){this.destroyed||(this._debug("on close"),this.destroy())}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}h.WEBSOCKET_SUPPORT=!!c,e.exports=h},function(e,t,n){"use strict";const i=n(66);i.createWebSocketStream=n(142),i.Server=n(143),i.Receiver=n(68),i.Sender=n(70),e.exports=i},function(e,t){e.exports=require("tls")},function(e,t,n){"use strict";(function(t){try{e.exports=n(67)(t)}catch(t){e.exports=n(137)}}).call(this,"/")},function(e,t,n){"use strict";e.exports={mask:(e,t,n,i,r)=>{for(var s=0;s<r;s++)n[i+s]=e[s]^t[3&s]},unmask:(e,t)=>{const n=e.length;for(var i=0;i<n;i++)e[i]^=t[3&i]}}},function(e,t,n){"use strict";const i=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[i]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[i])}}}},function(e,t,n){"use strict";(function(t){try{e.exports=n(67)(t)}catch(t){e.exports=n(140)}}).call(this,"/")},function(e,t,n){"use strict";e.exports=e=>{for(var t=e.length,n=0;n<t;)if(e[n]<128)n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},function(e,t,n){"use strict";class i{constructor(e,t){this.target=t,this.type=e}}class r extends i{constructor(e,t){super("message",t),this.data=e}}class s extends i{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class o extends i{constructor(e){super("open",e)}}class a extends i{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const c={addEventListener(e,t){function n(e){t.call(this,new r(e,this))}function i(e,n){t.call(this,new s(e,n,this))}function c(e){t.call(this,new a(e,this))}function h(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(i._listener=t,this.on(e,i)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(h._listener=t,this.on(e,h)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(let i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=c},function(e,t,n){"use strict";const{Duplex:i}=n(12);function r(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;function a(){n&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(n=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||c.destroy(e)})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(r,c);let i=!1;e.once("error",(function(e){i=!0,n(e)})),e.once("close",(function(){i||n(t),process.nextTick(r,c)})),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(c._readableState.endEmitted&&c.destroy(),t()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN||n||(n=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,n,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){c._write(t,n,i)}))},c.on("end",s),c.on("error",o),c}},function(e,t,n){"use strict";const i=n(0),{createHash:r}=n(18),{createServer:s,STATUS_CODES:o}=n(22),a=n(25),c=n(66),{format:h,parse:l}=n(71),{GUID:d}=n(17),u=/^[+/0-9A-Za-z]{22}==$/,f=Symbol("kUsedByWebSocketServer");function p(e){e.emit("close")}function m(){this.destroy()}function g(e,t,n,i){e.writable&&(n=n||o[t],i={Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n),...i},e.write(`HTTP/1.1 ${t} ${o[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",m),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port)this._server=s((e,t)=>{const n=o[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t);else if(e.server){if(e.server[f])throw new Error("The HTTP/S server is already being used by another WebSocket server");e.server[f]=!0,this._server=e.server}this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t){if(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)return void t.close(()=>this.emit("close"));delete t[f]}process.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",m);const r=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),s=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!r||!u.test(r)||8!==s&&13!==s||!this.shouldHandle(e))return g(t,400);if(this.options.perMessageDeflate){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=l(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(n.accept(t[a.extensionName]),o[a.extensionName]=n)}catch(e){return g(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[""+(8===s?"sec-websocket-origin":"origin")],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(s,a,c,h)=>{if(!s)return g(t,a||401,c,h);this.completeUpgrade(r,o,e,t,n,i)});if(!this.options.verifyClient(a))return g(t,401)}this.completeUpgrade(r,o,e,t,n,i)}completeUpgrade(e,t,n,i,s,o){if(!i.readable||!i.writable)return i.destroy();const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+r("sha1").update(e+d).digest("base64")],u=new c(null);let f=n.headers["sec-websocket-protocol"];if(f&&(f=f.trim().split(/ *, */),f=this.options.handleProtocols?this.options.handleProtocols(f,n):f[0],f&&(l.push("Sec-WebSocket-Protocol: "+f),u.protocol=f)),t[a.extensionName]){const e=t[a.extensionName].params,n=h({[a.extensionName]:[e]});l.push("Sec-WebSocket-Extensions: "+n),u._extensions=t}this.emit("headers",l,n),i.write(l.concat("\r\n").join("\r\n")),i.removeListener("error",m),u.setSocket(i,s,this.options.maxPayload),this.clients&&(this.clients.add(u),u.on("close",()=>this.clients.delete(u))),o(u)}}},function(e,t,n){e.exports=u;var i,r=n(3),s=n(19),o=n(14),a=n(2),c=n(145),h=n(8),l=n(149),d=n(156);try{i=r.statSync("/tmp")&&"/tmp"}catch(e){i=s.tmpdir()}function u(e,t){var n=this;if(!(n instanceof u))return new u(e,t);if(t||(t={}),n.chunkLength=Number(e),!n.chunkLength)throw new Error("First argument must be a chunk length");if(t.files){if(!Array.isArray(t.files))throw new Error("`files` option must be an array");if(n.files=t.files.slice(0).map((function(e,t,n){if(null==e.path)throw new Error("File is missing `path` property");if(null==e.length)throw new Error("File is missing `length` property");if(null==e.offset)if(0===t)e.offset=0;else{var i=n[t-1];e.offset=i.offset+i.length}return e})),n.length=n.files.reduce((function(e,t){return e+t.length}),0),null!=t.length&&t.length!==n.length)throw new Error("total `files` length is not equal to explicit `length` option")}else{var s=Number(t.length)||1/0;n.files=[{offset:0,path:a.resolve(t.path||a.join(i,"fs-chunk-store",h(20).toString("hex"))),length:s}],n.length=s}n.chunkMap=[],n.closed=!1,n.files.forEach((function(e){e.open=d((function(t){if(n.closed)return t(new Error("Storage is closed"));r.mkdir(a.dirname(e.path),{recursive:!0},(function(i){return i?t(i):n.closed?t(new Error("Storage is closed")):void t(null,c(e.path))}))}))})),n.length!==1/0&&(n.lastChunkLength=n.length%n.chunkLength||n.chunkLength,n.lastChunkIndex=Math.ceil(n.length/n.chunkLength)-1,n.files.forEach((function(e){for(var t=e.offset,i=e.offset+e.length,r=Math.floor(t/n.chunkLength),s=Math.floor((i-1)/n.chunkLength),o=r;o<=s;++o){var a=o*n.chunkLength,c=t<a?0:t-a,h=i>a+n.chunkLength?n.chunkLength:i-a,l=t>a?0:a-t;n.chunkMap[o]||(n.chunkMap[o]=[]),n.chunkMap[o].push({from:c,to:h,offset:l,file:e})}})))}function f(e,t,n){process.nextTick((function(){e&&e(t,n)}))}function p(){}u.prototype.put=function(e,t,n){var i=this;if("function"!=typeof n&&(n=p),i.closed)return f(n,new Error("Storage is closed"));var r=e===i.lastChunkIndex;if(r&&t.length!==i.lastChunkLength)return f(n,new Error("Last chunk length must be "+i.lastChunkLength));if(!r&&t.length!==i.chunkLength)return f(n,new Error("Chunk length must be "+i.chunkLength));if(i.length===1/0)i.files[0].open((function(r,s){if(r)return n(r);s.write(e*i.chunkLength,t,n)}));else{var s=i.chunkMap[e];if(!s)return f(n,new Error("no files matching the request range"));var a=s.map((function(e){return function(n){e.file.open((function(i,r){if(i)return n(i);r.write(e.offset,t.slice(e.from,e.to),n)}))}}));o(a,n)}},u.prototype.get=function(e,t,n){var i=this;if("function"==typeof t)return i.get(e,null,t);if(i.closed)return f(n,new Error("Storage is closed"));var r=e===i.lastChunkIndex?i.lastChunkLength:i.chunkLength,s=t&&t.offset||0,a=t&&t.length?s+t.length:r;if(s<0||s<0||a>r)return f(n,new Error("Invalid offset and/or length"));if(i.length===1/0){if(s===a)return f(n,null,Buffer.from(0));i.files[0].open((function(t,r){if(t)return n(t);var o=e*i.chunkLength+s;r.read(o,a-s,n)}))}else{var c=i.chunkMap[e];if(!c)return f(n,new Error("no files matching the request range"));if(t&&0===(c=c.filter((function(e){return e.to>s&&e.from<a}))).length)return f(n,new Error("no files matching the requested range"));if(s===a)return f(n,null,Buffer.from(0));var h=c.map((function(e){return function(n){var i=e.from,r=e.to,o=e.offset;t&&(r>a&&(r=a),i<s&&(o+=s-i,i=s)),e.file.open((function(e,t){if(e)return n(e);t.read(o,r-i,n)}))}}));o(h,(function(e,t){if(e)return n(e);n(null,Buffer.concat(t))}))}},u.prototype.close=function(e){if(this.closed)return f(e,new Error("Storage is closed"));this.closed=!0;var t=this.files.map((function(e){return function(t){e.open((function(e,n){if(e)return t(null);n.close(t)}))}}));o(t,e)},u.prototype.destroy=function(e){var t=this;t.close((function(){var n=t.files.map((function(e){return function(t){l(e.path,{maxBusyTries:10},t)}}));o(n,e)}))}},function(e,t,n){var i=n(5).inherits,r=n(146),s=n(3),o=n(147),a=n(2),c=s.constants||n(148),h=c.O_RDONLY,l=c.O_RDWR|c.O_CREAT;function d(e,t){if(!(this instanceof d))return new d(e,t);r.call(this),t||(t={}),t.directory&&(e=a.join(t.directory,a.resolve("/",e).replace(/^\w+:\\/,""))),this.directory=t.directory||null,this.filename=e,this.fd=0,(t.writable||t.truncate)&&(this.preferReadonly=!1),this._size=t.size||t.length||0,this._truncate=!!t.truncate||this._size>0,this._rmdir=!!t.rmdir,this._lock=t.lock||p}function u(e,t,n){function i(i,o){return i?n.callback(i):(e.fd=o,e._lock(e.fd)?e._truncate&&t!==h?void s.ftruncate(e.fd,e._size,r):n.callback(null):n.callback(function(e){var t=new Error("ELOCKED: File is locked");return t.code="ELOCKED",t.path=e,t}(e.filename)))}function r(e){if(e)return o(e);n.callback(null)}function o(t){s.close(e.fd,(function(){e.fd=0,n.callback(t)}))}e.fd?s.close(e.fd,(function(n){if(n)return o(n);e.fd=0,s.open(e.filename,t,i)})):s.open(e.filename,t,i)}function f(e){e.callback(null,Buffer.alloc(0))}function p(e){return!0}e.exports=d,i(d,r),d.prototype._open=function(e){var t=this;o(a.dirname(this.filename),(function(n){if(n)return e.callback(n);u(t,l,e)}))},d.prototype._openReadonly=function(e){u(this,h,e)},d.prototype._write=function(e){var t=e.data,n=this.fd;s.write(n,t,0,e.size,e.offset,(function i(r,o){if(r)return e.callback(r);if(e.size-=o,e.offset+=o,!e.size)return e.callback(null);s.write(n,t,t.length-e.size,e.size,e.offset,i)}))},d.prototype._read=function(e){var t=e.data||Buffer.allocUnsafe(e.size),n=this.fd;if(!e.size)return process.nextTick(f,e);s.read(n,t,0,e.size,e.offset,(function i(r,o){if(r)return e.callback(r);if(!o)return e.callback(new Error("Could not satisfy length"));if(e.size-=o,e.offset+=o,!e.size)return e.callback(null,t);s.read(n,t,t.length-e.size,e.size,e.offset,i)}))},d.prototype._del=function(e){var t=this.fd;function n(t){e.callback(t)}s.fstat(t,(function(i,r){if(i)return e.callback(i);if(e.offset+e.size<r.size)return e.callback(null);s.ftruncate(t,e.offset,n)}))},d.prototype._stat=function(e){s.fstat(this.fd,(function(t,n){e.callback(t,n)}))},d.prototype._close=function(e){var t=this;s.close(this.fd,(function(n){if(n)return e.callback(n);t.fd=0,e.callback(null)}))},d.prototype._destroy=function(e){var t=this,n=this.directory&&a.resolve(a.join(this.directory,".")),i=a.resolve(a.dirname(this.filename));function r(t){if(i=a.join(i,".."),t||i===n)return e.callback(null);s.rmdir(i,r)}s.unlink(this.filename,(function(o){if(!t._rmdir||!n||i===n)return e.callback(o);s.rmdir(i,r)}))}},function(e,t,n){var i=n(0),r=n(6),s=m(new Error("Not readable")),o=m(new Error("Not writable")),a=m(new Error("Not deletable")),c=m(new Error("Not statable")),h=m(new Error("No readonly open"));function l(e){if(!(this instanceof l))return new l(e);i.EventEmitter.call(this),this._queued=[],this._pending=0,this._needsOpen=!0,this.opened=!1,this.closed=!1,this.destroyed=!1,e&&(e.openReadonly&&(this._openReadonly=e.openReadonly),e.open&&(this._open=e.open),e.read&&(this._read=e.read),e.write&&(this._write=e.write),e.del&&(this._del=e.del),e.stat&&(this._stat=e.stat),e.close&&(this._close=e.close),e.destroy&&(this._destroy=e.destroy)),this.preferReadonly=this._openReadonly!==h,this.readable=this._read!==s,this.writable=this._write!==o,this.deletable=this._del!==a,this.statable=this._stat!==c}function d(){}function u(e,t,n,i,r,s){this.type=t,this.offset=n,this.data=r,this.size=i,this.storage=e,this._sync=!1,this._callback=s,this._openError=null}function f(e,t){e._queued.push(t),e._pending||t._run()}function p(e){e.preferReadonly&&(e._needsOpen=!0,e.preferReadonly=!1)}function m(e){return function(t){g(t,e)}}function g(e,t,n){process.nextTick(_,e,t,n)}function _(e,t,n){e.callback(t,n)}e.exports=l,r(l,i.EventEmitter),l.prototype.read=function(e,t,n){this.run(new u(this,0,e,t,null,n))},l.prototype._read=s,l.prototype.write=function(e,t,n){n||(n=d),p(this),this.run(new u(this,1,e,t.length,t,n))},l.prototype._write=o,l.prototype.del=function(e,t,n){n||(n=d),p(this),this.run(new u(this,2,e,t,null,n))},l.prototype._del=a,l.prototype.stat=function(e){this.run(new u(this,3,0,0,null,e))},l.prototype._stat=c,l.prototype.open=function(e){if(e||(e=d),this.opened&&!this._needsOpen)return process.nextTick(e,null);f(this,new u(this,4,0,0,null,e))},l.prototype._open=m(null),l.prototype._openReadonly=h,l.prototype.close=function(e){if(e||(e=d),this.closed)return process.nextTick(e,null);f(this,new u(this,5,0,0,null,e))},l.prototype._close=m(null),l.prototype.destroy=function(e){e||(e=d),this.closed||this.close(d),f(this,new u(this,6,0,0,null,e))},l.prototype._destroy=m(null),l.prototype.run=function(e){this._needsOpen&&this.open(d),this._queued.length?this._queued.push(e):e._run()},u.prototype._maybeOpenError=function(e){if(4===this.type)for(var t=this.storage._queued,n=0;n<t.length;n++)t[n]._openError=e},u.prototype._unqueue=function(e){var t=this.storage,n=t._queued;if(e)this._maybeOpenError(e);else switch(this.type){case 4:t.opened||(t.opened=!0,t.emit("open"));break;case 5:t.closed||(t.closed=!0,t.emit("close"));break;case 6:t.destroyed||(t.destroyed=!0,t.emit("destroy"))}n.length&&n[0]===this&&n.shift(),--t._pending||function(e){var t=e._queued;for(;t.length>0;){var n=t[0].type>3;if(n&&e._pending||t[0]._run(),n)return;t.shift()}}(t)},u.prototype.callback=function(e,t){if(this._sync)return g(this,e,t);this._unqueue(e),this._callback(e,t)},u.prototype._openAndNotClosed=function(){var e=this.storage;return!(!e.opened||e.closed)||(e.opened?e.closed&&g(this,new Error("Closed")):g(this,this._openError||new Error("Not opened")),!1)},u.prototype._open=function(){var e=this.storage;return e.opened&&!e._needsOpen?g(this,null):e.closed?g(this,new Error("Closed")):(e._needsOpen=!1,void(e.preferReadonly?e._openReadonly(this):e._open(this)))},u.prototype._run=function(){var e=this.storage;switch(e._pending++,this._sync=!0,this.type){case 0:this._openAndNotClosed()&&e._read(this);break;case 1:this._openAndNotClosed()&&e._write(this);break;case 2:this._openAndNotClosed()&&e._del(this);break;case 3:this._openAndNotClosed()&&e._stat(this);break;case 4:this._open();break;case 5:e.closed||!e.opened?g(this,null):e._close(this);break;case 6:e.destroyed?g(this,null):e._destroy(this)}this._sync=!1}},function(e,t,n){var i=n(2),r=n(3),s=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,h=t.fs||r;void 0===c&&(c=s&~process.umask()),a||(a=null);var l=n||function(){};e=i.resolve(e),h.mkdir(e,c,(function(n){if(!n)return l(null,a=a||e);switch(n.code){case"ENOENT":o(i.dirname(e),t,(function(n,i){n?l(n,i):o(e,t,l,i)}));break;default:h.stat(e,(function(e,t){e||!t.isDirectory()?l(n,a):l(null,a)}))}}))}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||r;void 0===a&&(a=s&~process.umask()),o||(o=null),t=i.resolve(t);try{c.mkdirSync(t,a),o=o||t}catch(r){switch(r.code){case"ENOENT":o=e(i.dirname(t),n,o),e(t,n,o);break;default:var h;try{h=c.statSync(t)}catch(e){throw r}if(!h.isDirectory())throw r}}return o}},function(e,t){e.exports=require("constants")},function(e,t,n){const i=n(37),r=n(2),s=n(3);let o=void 0;try{o=n(72)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const h="win32"===process.platform,l=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===o)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof n,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),l(t);let r=0,s=null,a=0;const h=(e,i)=>e?n(e):(a=i.length,0===a?n():void i.forEach(e=>{const i=o=>{if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries)return r++,setTimeout(()=>u(e,t,i),100*r);if("EMFILE"===o.code&&c<t.emfileWait)return setTimeout(()=>u(e,t,i),c++);"ENOENT"===o.code&&(o=null)}c=0,(e=>{s=s||e,0==--a&&n(s)})(o)};u(e,t,i)}));if(t.disableGlob||!o.hasMagic(e))return h(null,[e]);t.lstat(e,(n,i)=>{if(!n)return h(null,[e]);o(e,t.glob,h)})},u=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.lstat(e,(i,r)=>i&&"ENOENT"===i.code?n(null):(i&&"EPERM"===i.code&&h&&f(e,t,i,n),r&&r.isDirectory()?m(e,t,i,n):void t.unlink(e,i=>{if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return h?f(e,t,i,n):m(e,t,i,n);if("EISDIR"===i.code)return m(e,t,i,n)}return n(i)})))},f=(e,t,n,r)=>{i(e),i(t),i("function"==typeof r),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,s)=>{i?r("ENOENT"===i.code?null:n):s.isDirectory()?m(e,t,n,r):t.unlink(e,r)})})},p=(e,t,n)=>{i(e),i(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}let r;try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?v(e,t,n):t.unlinkSync(e)},m=(e,t,n,r)=>{i(e),i(t),i("function"==typeof r),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):g(e,t,r)})},g=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.readdir(e,(i,s)=>{if(i)return n(i);let o,a=s.length;if(0===a)return t.rmdir(e,n);s.forEach(i=>{d(r.join(e,i),t,i=>{if(!o)return i?n(o=i):void(0==--a&&t.rmdir(e,n))})})})},_=(e,t)=>{let n;if(l(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!o.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(i){n=o.sync(e,t.glob)}if(n.length)for(let e=0;e<n.length;e++){const i=n[e];let r;try{r=t.lstatSync(i)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&h&&p(i,t,e)}try{r&&r.isDirectory()?v(i,t,null):t.unlinkSync(i)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return h?p(i,t,e):v(i,t,e);if("EISDIR"!==e.code)throw e;v(i,t,e)}}},v=(e,t,n)=>{i(e),i(t);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw n;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||y(e,t)}},y=(e,t)=>{i(e),i(t),t.readdirSync(e).forEach(n=>_(r.join(e,n),t));const n=h?100:1;let s=0;for(;;){let i=!0;try{const r=t.rmdirSync(e,t);return i=!1,r}finally{if(++s<n&&i)continue}}};e.exports=d,d.sync=_},function(e,t,n){var i=n(2),r="win32"===process.platform,s=n(3),o=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(o){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}i.normalize;if(r)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(r)var h=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else h=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,o,a,l,d=e,u={},f={};function p(){var t=h.exec(e);n=t[0].length,o=t[0],a=t[0],l="",r&&!f[a]&&(s.lstatSync(a),f[a]=!0)}for(p();n<e.length;){c.lastIndex=n;var m=c.exec(e);if(l=o,o+=m[0],a=l+m[1],n=c.lastIndex,!(f[a]||t&&t[a]===a)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,a))g=t[a];else{var _=s.lstatSync(a);if(!_.isSymbolicLink()){f[a]=!0,t&&(t[a]=a);continue}var v=null;if(!r){var y=_.dev.toString(32)+":"+_.ino.toString(32);u.hasOwnProperty(y)&&(v=u[y])}null===v&&(s.statSync(a),v=s.readlinkSync(a)),g=i.resolve(l,v),t&&(t[a]=g),r||(u[y]=v)}e=i.resolve(g,e.slice(n)),p()}}return t&&(t[d]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var o,l,d,u,f=e,p={},m={};function g(){var t=h.exec(e);o=t[0].length,l=t[0],d=t[0],u="",r&&!m[d]?s.lstat(d,(function(e){if(e)return n(e);m[d]=!0,_()})):process.nextTick(_)}function _(){if(o>=e.length)return t&&(t[f]=e),n(null,e);c.lastIndex=o;var i=c.exec(e);return u=l,l+=i[0],d=u+i[1],o=c.lastIndex,m[d]||t&&t[d]===d?process.nextTick(_):t&&Object.prototype.hasOwnProperty.call(t,d)?b(t[d]):s.lstat(d,v)}function v(e,i){if(e)return n(e);if(!i.isSymbolicLink())return m[d]=!0,t&&(t[d]=d),process.nextTick(_);if(!r){var o=i.dev.toString(32)+":"+i.ino.toString(32);if(p.hasOwnProperty(o))return y(null,p[o],d)}s.stat(d,(function(e){if(e)return n(e);s.readlink(d,(function(e,t){r||(p[o]=t),y(e,t)}))}))}function y(e,r,s){if(e)return n(e);var o=i.resolve(u,r);t&&(t[s]=o),b(o)}function b(t){e=i.resolve(t,e.slice(o)),g()}g()}},function(e,t,n){var i=n(152),r=n(153);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var s=[],o=r("{","}",t);if(!o||/\$$/.test(o.pre))return[t];var c,h=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),g=h||d,_=o.body.indexOf(",")>=0;if(!g&&!_)return o.post.match(/,.*\}/)?(t=o.pre+"{"+o.body+a+o.post,e(t)):[t];if(g)c=o.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var n=[],i=r("{","}",t);if(!i)return t.split(",");var s=i.pre,o=i.body,a=i.post,c=s.split(",");c[c.length-1]+="{"+o+"}";var h=e(a);a.length&&(c[c.length-1]+=h.shift(),c.push.apply(c,h));return n.push.apply(n,c),n}(o.body)).length)if(1===(c=e(c[0],!1).map(u)).length)return(b=o.post.length?e(o.post,!1):[""]).map((function(e){return o.pre+c[0]+e}))}var v,y=o.pre,b=o.post.length?e(o.post,!1):[""];if(g){var w=l(c[0]),x=l(c[1]),k=Math.max(c[0].length,c[1].length),E=3==c.length?Math.abs(l(c[2])):1,S=p;x<w&&(E*=-1,S=m);var M=c.some(f);v=[];for(var I=w;S(I,x);I+=E){var C;if(d)"\\"===(C=String.fromCharCode(I))&&(C="");else if(C=String(I),M){var B=k-C.length;if(B>0){var T=new Array(B+1).join("0");C=I<0?"-"+T+C.slice(1):T+C}}v.push(C)}}else v=i(c,(function(t){return e(t,!1)}));for(var A=0;A<v.length;A++)for(var O=0;O<b.length;O++){var L=y+v[A]+b[O];(!n||g||L)&&s.push(L)}return s}(function(e){return e.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(c).split("\\.").join(h)}(e),!0).map(d)};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",h="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(s).join("\\").split(o).join("{").split(a).join("}").split(c).join(",").split(h).join(".")}function u(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],r=0;r<e.length;r++){var s=t(e[r],r);n(s)?i.push.apply(i,s):i.push(s)}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var i=s(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function r(e,t){var n=t.match(e);return n?n[0]:null}function s(e,t,n){var i,r,s,o,a,c=n.indexOf(e),h=n.indexOf(t,c+1),l=c;if(c>=0&&h>0){for(i=[],s=n.length;l>=0&&!a;)l==c?(i.push(l),c=n.indexOf(e,l+1)):1==i.length?a=[i.pop(),h]:((r=i.pop())<s&&(s=r,o=h),h=n.indexOf(t,l+1)),l=c<h&&c>=0?c:h;i.length&&(a=[s,o])}return a}e.exports=i,i.range=s},function(e,t,n){e.exports=p,p.GlobSync=m;var i=n(3),r=n(73),s=n(38),o=(s.Minimatch,n(72).Glob,n(5),n(2)),a=n(37),c=n(39),h=n(74),l=(h.alphasort,h.alphasorti,h.setopts),d=h.ownProp,u=h.childrenIgnored,f=h.isIgnored;function p(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach((function(t,n){var i=e.matches[n]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),i[r.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(s)]=!0}}))}h.finish(this)},m.prototype._process=function(e,t,n){a(this instanceof m);for(var i,r=0;"string"==typeof e[r];)r++;switch(r){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,r).join("/")}var o,h=e.slice(r);null===i?o=".":c(i)||c(e.join("/"))?(i&&c(i)||(i="/"+i),o=i):o=i;var l=this._makeAbs(o);u(this,o)||(h[0]===s.GLOBSTAR?this._processGlobStar(i,o,l,h,t,n):this._processReaddir(i,o,l,h,t,n))},m.prototype._processReaddir=function(e,t,n,i,r,s){var a=this._readdir(n,s);if(a){for(var c=i[0],h=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),u=[],f=0;f<a.length;f++){if("."!==(g=a[f]).charAt(0)||d)(h&&!e?!g.match(c):g.match(c))&&u.push(g)}var p=u.length;if(0!==p)if(1!==i.length||this.mark||this.stat){i.shift();for(f=0;f<p;f++){var m;g=u[f];m=e?[e,g]:[g],this._process(m.concat(i),r,s)}}else{this.matches[r]||(this.matches[r]=Object.create(null));for(var f=0;f<p;f++){var g=u[f];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=o.join(this.root,g)),this._emitMatch(r,g)}}}},m.prototype._emitMatch=function(e,t){if(!f(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=i.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[e]=r,r||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,i.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,n,i,r,s){var o=this._readdir(n,s);if(o){var a=i.slice(1),c=e?[e]:[],h=c.concat(a);this._process(h,r,!1);var l=o.length;if(!this.symlinks[n]||!s)for(var d=0;d<l;d++){if("."!==o[d].charAt(0)||this.dot){var u=c.concat(o[d],a);this._process(u,r,!0);var f=c.concat(o[d],i);this._process(f,r,!0)}}}},m.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=o.join(this.root,e):(e=o.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var r=this.cache[t];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var s=this.statCache[t];if(!s){var o;try{o=i.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{s=i.statSync(t)}catch(e){s=o}else s=o}this.statCache[t]=s;r=!0;return s&&(r=s.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||r,(!n||"FILE"!==r)&&r},m.prototype._mark=function(e){return h.mark(this,e)},m.prototype._makeAbs=function(e){return h.makeAbs(this,e)}},function(e,t,n){var i=n(51),r=Object.create(null),s=n(7);function o(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i]=e[i];return n}e.exports=i((function(e,t){return r[e]?(r[e].push(t),null):(r[e]=[t],function(e){return s((function t(){var n=r[e],i=n.length,s=o(arguments);try{for(var a=0;a<i;a++)n[a].apply(null,s)}finally{n.length>i?(n.splice(0,i),process.nextTick((function(){t.apply(null,s)}))):delete r[e]}}))}(e))}))},function(e,t,n){"use strict";var i=function(e,t,n){process.nextTick((function(){e(t,n)}))};function r(e){return"[object Error]"===Object.prototype.toString.call(e)}function s(){}function o(e,t){e.apply(null,t)}process.nextTick((function(e){42===e&&(i=process.nextTick)}),42),e.exports=function(e){var t=function n(s){var a=[s];function c(e){var s=arguments;for(t=r(e)?n:c;a.length;)c(a.shift());function c(e){i(o,e,s)}}t=function(e){a.push(e)},e(c)};return function(e){t(e||s)}}},function(e,t,n){const i=n(32);e.exports=class{constructor(e){if(this.store=e,this.chunkLength=e.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(e,t,n){this.mem[e]=t,this.store.put(e,t,t=>{this.mem[e]=null,n&&n(t)})}get(e,t,n){if("function"==typeof t)return this.get(e,null,t);let r=this.mem[e];if(!r)return this.store.get(e,t,n);if(t){const e=t.offset||0,n=t.length?e+t.length:r.length;r=r.slice(e,n)}i(()=>{n&&n(null,r)})}close(e){this.store.close(e)}destroy(e){this.store.destroy(e)}}},function(e,t){e.exports=function(e,t,n){if("number"!=typeof t)throw new Error("second argument must be a Number");var i,r,s,o,a,c=!0;Array.isArray(e)?(i=[],s=r=e.length):(o=Object.keys(e),i={},s=r=o.length);function h(e){function t(){n&&n(e,i),n=null}c?process.nextTick(t):t()}function l(t,n,c){if(i[t]=c,n&&(a=!0),0==--s||n)h(n);else if(!a&&d<r){var u;o?(u=o[d],d+=1,e[u]((function(e,t){l(u,e,t)}))):(u=d,d+=1,e[u]((function(e,t){l(u,e,t)})))}}var d=t;s?o?o.some((function(n,i){if(e[n]((function(e,t){l(n,e,t)})),i===t-1)return!0})):e.some((function(e,n){if(e((function(e,t){l(n,e,t)})),n===t-1)return!0})):h(null);c=!1}},function(e,t){class n{constructor(e){this.length=e,this.missing=e,this.sources=null,this._chunks=Math.ceil(e/16384),this._remainder=e%16384||16384,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(e){return e===this._chunks-1?this._remainder:16384}chunkLengthRemaining(e){return this.length-16384*e}chunkOffset(e){return 16384*e}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._reservations<this._chunks){const e=this._reservations;return this._reservations=this._chunks,e}return-1}cancel(e){this.init()&&this._cancellations.push(e)}cancelRemaining(e){this.init()&&(this._reservations=e)}get(e){return this.init()?this._buffer[e]:null}set(e,t,n){if(!this.init())return!1;const i=t.length,r=Math.ceil(i/16384);for(let i=0;i<r;i++)if(!this._buffer[e+i]){const r=16384*i,s=t.slice(r,r+16384);this._buffered++,this._buffer[e+i]=s,this.missing-=s.length,this.sources.includes(n)||this.sources.push(n)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const e=Buffer.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,e}init(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}Object.defineProperty(n,"BLOCK_LENGTH",{value:16384}),e.exports=n},function(e,t,n){var i=n(7),r=function(){},s=function(e,t,n){if("function"==typeof t)return s(e,null,t);t||(t={}),n=i(n||r);var o=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,h=t.writable||!1!==t.writable&&e.writable,l=!1,d=function(){e.writable||u()},u=function(){h=!1,c||n.call(e)},f=function(){c=!1,h||n.call(e)},p=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){n.call(e,t)},g=function(){process.nextTick(_)},_=function(){if(!l)return(!c||a&&a.ended&&!a.destroyed)&&(!h||o&&o.ended&&!o.destroyed)?void 0:n.call(e,new Error("premature close"))},v=function(){e.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?h&&!o&&(e.on("end",d),e.on("close",d)):(e.on("complete",u),e.on("abort",g),e.req?v():e.on("request",v)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",f),e.on("finish",u),!1!==t.error&&e.on("error",m),e.on("close",g),function(){l=!0,e.removeListener("complete",u),e.removeListener("abort",g),e.removeListener("request",v),e.req&&e.req.removeListener("finish",u),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",u),e.removeListener("exit",p),e.removeListener("end",f),e.removeListener("error",m),e.removeListener("close",g)}};e.exports=s},function(e,t){e.exports=function(e){var t=0;return function(){if(t===e.length)return null;var n=e.length-t,i=Math.random()*n|0,r=e[t+i],s=e[t];return e[t]=r,e[t+i]=s,t++,r}}},function(e,t,n){const{EventEmitter:i}=n(0),r=n(9),s=n(23),o=n(1)("ut_metadata"),a=n(15);e.exports=e=>{class t extends i{constructor(t){super(),this._wire=t,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new s(0,{grow:1e3}),Buffer.isBuffer(e)&&this.setMetadata(e)}onHandshake(e,t,n){this._infoHash=e}onExtendedHandshake(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||1e7<e.metadata_size||e.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=e.metadata_size,this._numPieces=Math.ceil(this._metadataSize/16384),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(e){let t,n;try{const i=e.toString(),s=i.indexOf("ee")+2;t=r.decode(i.substring(0,s)),n=e.slice(s)}catch(e){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,n,t.total_size);break;case 2:this._onReject(t.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}setMetadata(e){if(this._metadataComplete)return!0;o("set metadata");try{const t=r.decode(e).info;t&&(e=r.encode(t))}catch(e){}return(!this._infoHash||this._infoHash===a.sync(e))&&(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",r.encode({info:r.decode(this.metadata)})),!0)}_send(e,t){let n=r.encode(e);Buffer.isBuffer(t)&&(n=Buffer.concat([n,t])),this._wire.extended("ut_metadata",n)}_request(e){this._send({msg_type:0,piece:e})}_data(e,t,n){const i={msg_type:1,piece:e};"number"==typeof n&&(i.total_size=n),this._send(i,t)}_reject(e){this._send({msg_type:2,piece:e})}_onRequest(e){if(!this._metadataComplete)return void this._reject(e);const t=16384*e;let n=t+16384;n>this._metadataSize&&(n=this._metadataSize);const i=this.metadata.slice(t,n);this._data(e,i,this._metadataSize)}_onData(e,t,n){t.length>16384||!this._fetching||(t.copy(this.metadata,16384*e),this._bitfield.set(e),this._checkDone())}_onReject(e){this._remainingRejects>0&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=Buffer.alloc(this._metadataSize);for(let e=0;e<this._numPieces;e++)this._request(e)}}_checkDone(){let e=!0;for(let t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}if(!e)return;this.setMetadata(this.metadata)||this._failedMetadata()}_failedMetadata(){this._bitfield=new s(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return t.prototype.name="ut_metadata",t}},function(e,t,n){var i=n(0).EventEmitter,r=n(35),s=n(164),o=n(9);e.exports=()=>{class e extends i{constructor(e){super(),this._wire=e,this._intervalId=null,this.reset()}start(){clearInterval(this._intervalId),this._intervalId=setInterval(()=>this._sendMessage(),65e3),this._intervalId.unref&&this._intervalId.unref()}stop(){clearInterval(this._intervalId),this._intervalId=null}reset(){this._remoteAddedPeers={},this._remoteDroppedPeers={},this._localAddedPeers={},this._localDroppedPeers={},this.stop()}addPeer(e){e.indexOf(":")<0||e in this._remoteAddedPeers||(e in this._localDroppedPeers&&delete this._localDroppedPeers[e],this._localAddedPeers[e]=!0)}dropPeer(e){e.indexOf(":")<0||e in this._remoteDroppedPeers||(e in this._localAddedPeers&&delete this._localAddedPeers[e],this._localDroppedPeers[e]=!0)}onExtendedHandshake(e){if(!e.m||!e.m.ut_pex)return this.emit("warning",new Error("Peer does not support ut_pex"))}onMessage(e){var t;try{t=o.decode(e)}catch(e){return}t.added&&r.multi(t.added).forEach(e=>{delete this._remoteDroppedPeers[e],e in this._remoteAddedPeers||(this._remoteAddedPeers[e]=!0,this.emit("peer",e))}),t.dropped&&r.multi(t.dropped).forEach(e=>{delete this._remoteAddedPeers[e],e in this._remoteDroppedPeers||(this._remoteDroppedPeers[e]=!0,this.emit("dropped",e))})}_sendMessage(){var e=Object.keys(this._localAddedPeers).slice(0,50),t=Object.keys(this._localDroppedPeers).slice(0,50),n=Buffer.concat(e.map(s)),i=Buffer.concat(t.map(s)),r=Buffer.concat(e.map(()=>Buffer.from([0])));e.forEach(e=>delete this._localAddedPeers[e]),t.forEach(e=>delete this._localDroppedPeers[e]),this._wire.extended("ut_pex",{added:n,"added.f":r,dropped:i,added6:Buffer.alloc(0),"added6.f":Buffer.alloc(0),dropped6:Buffer.alloc(0)})}}return e.prototype.name="ut_pex",e}},function(e,t,n){const i=n(63),r=n(64);e.exports=e=>("string"==typeof e&&(e=[e]),Buffer.concat(e.map(e=>{const t=i(e);if(2!==t.length)throw new Error("invalid address format, expecting: 10.10.10.5:128");const n=r.parse(t[0]),s=Buffer.from(n.toByteArray()),o=t[1],a=Buffer.allocUnsafe(2);return a.writeUInt16BE(o,0),Buffer.concat([s,a])}))),e.exports.multi=e.exports,e.exports.multi6=e.exports},function(e,t){e.exports.parse=function(e){var t=e.split(",").map((function(e){return function(e){if(/^-?\d+$/.test(e))return parseInt(e,10);var t;if(t=e.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){var n=t[1],i=t[2],r=t[3];if(n&&r){var s=[],o=(n=parseInt(n))<(r=parseInt(r))?1:-1;"-"!=i&&".."!=i&&"‥"!=i||(r+=o);for(var a=n;a!=r;a+=o)s.push(a);return s}}return[]}(e)}));return 0===t.length?[]:1===t.length?Array.isArray(t[0])?t[0]:t:t.reduce((function(e,t){return Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.concat(t)}))}},function(e,t,n){const{EventEmitter:i}=n(0),{PassThrough:r}=n(4),s=n(167),o=n(2),a=n(168),c=n(77),h=n(76),l=n(185),d=n(186);e.exports=class extends i{constructor(e,t){super(),this._torrent=e,this._destroyed=!1,this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.done=!1;const n=t.offset,i=n+t.length-1;this._startPiece=n/this._torrent.pieceLength|0,this._endPiece=i/this._torrent.pieceLength|0,0===this.length&&(this.done=!0,this.emit("done"))}get downloaded(){if(!this._torrent.bitfield)return 0;const{pieces:e,bitfield:t,pieceLength:n}=this._torrent,{_startPiece:i,_endPiece:r}=this,s=e[i],o=this.offset%n;let a=t.get(i)?n-o:Math.max(n-o-s.missing,0);for(let s=i+1;s<=r;++s)if(t.get(s))a+=n;else{a+=n-e[s].missing}return Math.min(a,this.length)}get progress(){return this.length?this.downloaded/this.length:0}select(e){0!==this.length&&this._torrent.select(this._startPiece,this._endPiece,e)}deselect(){0!==this.length&&this._torrent.deselect(this._startPiece,this._endPiece,!1)}createReadStream(e){if(0===this.length){const e=new r;return process.nextTick(()=>{e.end()}),e}const t=new d(this,e);return this._torrent.select(t._startPiece,t._endPiece,!0,()=>{t._notify()}),s(t,()=>{this._destroyed||this._torrent.destroyed||this._torrent.deselect(t._startPiece,t._endPiece,!0)}),t}getBuffer(e){l(this.createReadStream(),this.length,e)}getBlob(e){if("undefined"==typeof window)throw new Error("browser-only method");c(this.createReadStream(),this._getMimeType()).then(t=>e(null,t),t=>e(t))}getBlobURL(e){if("undefined"==typeof window)throw new Error("browser-only method");h(this.createReadStream(),this._getMimeType()).then(t=>e(null,t),t=>e(t))}appendTo(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");a.append(this,e,t,n)}renderTo(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");a.render(this,e,t,n)}_getMimeType(){return a.mime[o.extname(this.name).toLowerCase()]}_destroy(){this._destroyed=!0,this._torrent=null}}},function(e,t,n){var i=n(7),r=function(){},s=function(e,t,n){if("function"==typeof t)return s(e,null,t);t||(t={}),n=i(n||r);var o=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,h=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||d()},d=function(){h=!1,c||n.call(e)},u=function(){c=!1,h||n.call(e)},f=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},p=function(t){n.call(e,t)},m=function(){return(!c||a&&a.ended)&&(!h||o&&o.ended)?void 0:n.call(e,new Error("premature close"))},g=function(){e.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?h&&!o&&(e.on("end",l),e.on("close",l)):(e.on("complete",d),e.on("abort",m),e.req?g():e.on("request",g)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",f),e.on("end",u),e.on("finish",d),!1!==t.error&&e.on("error",p),e.on("close",m),function(){e.removeListener("complete",d),e.removeListener("abort",m),e.removeListener("request",g),e.req&&e.req.removeListener("finish",d),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("exit",f),e.removeListener("end",u),e.removeListener("error",p),e.removeListener("close",m)}};e.exports=s},function(e,t,n){t.render=function(e,t,n,i){"function"==typeof n&&(i=n,n={});n||(n={});i||(i=function(){});y(e),b(n),"string"==typeof t&&(t=document.querySelector(t));_(e,(function(i){if(t.nodeName!==i.toUpperCase()){var r=o.extname(e.name).toLowerCase();throw new Error('Cannot render "'+r+'" inside a "'+t.nodeName.toLowerCase()+'" element, expected "'+i+'"')}return"video"!==i&&"audio"!==i||w(t,n),t}),n,i)},t.append=function(e,t,n,i){"function"==typeof n&&(i=n,n={});n||(n={});i||(i=function(){});y(e),b(n),"string"==typeof t&&(t=document.querySelector(t));if(t&&("VIDEO"===t.nodeName||"AUDIO"===t.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");function r(e){var n=document.createElement(e);return t.appendChild(n),n}_(e,(function(e){return"video"===e||"audio"===e?function(e){var i=r(e);return w(i,n),t.appendChild(i),i}(e):r(e)}),n,(function(e,t){e&&t&&t.remove(),i(e,t)}))},t.mime=n(169);var i=n(1)("render-media"),r=n(170),s=n(75),o=n(2),a=n(76),c=n(172),h=[".m4a",".m4b",".m4p",".m4v",".mp4"],l=[".m4v",".mkv",".mp4",".webm"],d=[].concat(l,[".m4a",".m4b",".m4p",".mp3"]),u=[".mov",".ogv"],f=[".aac",".oga",".ogg",".wav",".flac"],p=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],m=[".css",".html",".js",".md",".pdf",".txt"],g="undefined"!=typeof window&&window.MediaSource;function _(e,t,n,a){var _,y=o.extname(e.name).toLowerCase(),b=0;function w(){return!("number"==typeof e.length&&e.length>n.maxBlobLength)||(i("File length too large for Blob URL approach: %d (max: %d)",e.length,n.maxBlobLength),M(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+n.maxBlobLength+")")),!1)}function x(n){w()&&(_=t(n),v(e,(function(e,t){if(e)return M(e);_.addEventListener("error",M),_.addEventListener("loadstart",k),_.addEventListener("canplay",E),_.src=t})))}function k(){_.removeEventListener("loadstart",k),n.autoplay&&_.play()}function E(){_.removeEventListener("canplay",E),a(null,_)}function S(){v(e,(function(e,n){if(e)return M(e);".pdf"!==y?((_=t("iframe")).sandbox="allow-forms allow-scripts",_.src=n):((_=t("object")).setAttribute("typemustmatch",!0),_.setAttribute("type","application/pdf"),_.setAttribute("data",n)),a(null,_)}))}function M(t){t.message='Error rendering file "'+e.name+'": '+t.message,i(t.message),a(t)}d.indexOf(y)>=0?function(){var n=l.indexOf(y)>=0?"video":"audio";g?h.indexOf(y)>=0?(i("Use `videostream` package for "+e.name),f(),_.addEventListener("error",d),_.addEventListener("loadstart",k),_.addEventListener("canplay",E),c(e,_)):r():a();function r(){i("Use MediaSource API for "+e.name),f(),_.addEventListener("error",u),_.addEventListener("loadstart",k),_.addEventListener("canplay",E);var t,n=new s(_).createWriteStream((t=e.name,{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4b":'audio/mp4; codecs="mp4a.40.5"',".m4p":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[o.extname(t).toLowerCase()]));e.createReadStream().pipe(n),b&&(_.currentTime=b)}function a(){i("Use Blob URL for "+e.name),f(),_.addEventListener("error",M),_.addEventListener("loadstart",k),_.addEventListener("canplay",E),v(e,(function(e,t){if(e)return M(e);_.src=t,b&&(_.currentTime=b)}))}function d(e){i("videostream error: fallback to MediaSource API: %o",e.message||e),_.removeEventListener("error",d),_.removeEventListener("canplay",E),r()}function u(e){i("MediaSource API error: fallback to Blob URL: %o",e.message||e),w()&&(_.removeEventListener("error",u),_.removeEventListener("canplay",E),a())}function f(){_||(_=t(n)).addEventListener("progress",(function(){b=_.currentTime}))}}():u.indexOf(y)>=0?x("video"):f.indexOf(y)>=0?x("audio"):p.indexOf(y)>=0?(_=t("img"),v(e,(function(t,n){if(t)return M(t);_.src=n,_.alt=e.name,a(null,_)}))):m.indexOf(y)>=0?S():function(){i('Unknown file extension "%s" - will attempt to render into iframe',y);var t="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",(function(e){t+=e})).on("end",(function(){r(t)?(i('File extension "%s" appears ascii, so will render.',y),S()):(i('File extension "%s" appears non-ascii, will not render.',y),a(new Error('Unsupported file type "'+y+'": Cannot append to DOM')))})).on("error",a)}()}function v(e,n){var i=o.extname(e.name).toLowerCase();a(e.createReadStream(),t.mime[i]).then(e=>n(null,e),e=>n(e))}function y(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function b(e){null==e.autoplay&&(e.autoplay=!1),null==e.muted&&(e.muted=!1),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=2e8)}function w(e,t){e.autoplay=!!t.autoplay,e.muted=!!t.muted,e.controls=!!t.controls}},function(e){e.exports=JSON.parse('{".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}')},function(e,t){e.exports=function(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)>127)return!1;return!0}},function(e,t,n){var i=n(10).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,r=0;r<n;r++)t[r]=e[r];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t,n){const i=n(75),r=n(40),s=n(173);function o(e,t,n={}){if(!(this instanceof o))return console.warn("don't invoked VideoStream without 'new'"),new o(e,t,n);this.detailedError=null,this._elem=t,this._elemWrapper=new i(t),this._waitingFired=!1,this._trackMeta=null,this._file=e,this._tracks=null,"none"!==this._elem.preload&&this._createMuxer(),this._onError=()=>{this.detailedError=this._elemWrapper.detailedError,this.destroy()},this._onWaiting=()=>{this._waitingFired=!0,this._muxer?this._tracks&&this._pump():this._createMuxer()},t.autoplay&&(t.preload="auto"),t.addEventListener("waiting",this._onWaiting),t.addEventListener("error",this._onError)}o.prototype={_createMuxer(){this._muxer=new s(this._file),this._muxer.on("ready",e=>{this._tracks=e.map(e=>{const t=this._elemWrapper.createWriteStream(e.mime);t.on("error",e=>{this._elemWrapper.error(e)});const n={muxed:null,mediaSource:t,initFlushed:!1,onInitFlushed:null};return t.write(e.init,e=>{n.initFlushed=!0,n.onInitFlushed&&n.onInitFlushed(e)}),n}),(this._waitingFired||"auto"===this._elem.preload)&&this._pump()}),this._muxer.on("error",e=>{this._elemWrapper.error(e)})},_pump(){const e=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((t,n)=>{const i=()=>{t.muxed&&(t.muxed.destroy(),t.mediaSource=this._elemWrapper.createWriteStream(t.mediaSource),t.mediaSource.on("error",e=>{this._elemWrapper.error(e)})),t.muxed=e[n],r(t.muxed,t.mediaSource)};t.initFlushed?i():t.onInitFlushed=e=>{e?this._elemWrapper.error(e):i()}})},destroy(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach(e=>{e.muxed&&e.muxed.destroy()}),this._elem.src="")}},e.exports=o},function(e,t,n){const i=n(174),r=n(0),s=n(175),o=n(27),a=n(184);class c{constructor(e,t){this._entries=e,this._countName=t||"count",this._index=0,this._offset=0,this.value=this._entries[0]}inc(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}const h=1;e.exports=class extends r{constructor(e){super(),this._tracks=[],this._file=e,this._decoder=null,this._findMoov(0)}_findMoov(e){this._decoder&&this._decoder.destroy();let t=0;this._decoder=s.decode();const n=this._file.createReadStream({start:e});n.pipe(this._decoder);const i=r=>{"moov"===r.type?(this._decoder.removeListener("box",i),this._decoder.decode(e=>{n.destroy();try{this._processMoov(e)}catch(e){e.message="Cannot parse mp4 file: "+e.message,this.emit("error",e)}})):r.length<4096?(t+=r.length,this._decoder.ignore()):(this._decoder.removeListener("box",i),t+=r.length,n.destroy(),this._decoder.destroy(),this._findMoov(e+t))};this._decoder.on("box",i)}_processMoov(e){const t=e.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(let i=0;i<t.length;i++){const r=t[i],s=r.mdia.minf.stbl,o=s.stsd.entries[0],a=r.mdia.hdlr.handlerType;let h,l;if("vide"===a&&"avc1"===o.type){if(this._hasVideo)continue;this._hasVideo=!0,h="avc1",o.avcC&&(h+="."+o.avcC.mimeCodec),l=`video/mp4; codecs="${h}"`}else{if("soun"!==a||"mp4a"!==o.type)continue;if(this._hasAudio)continue;this._hasAudio=!0,h="mp4a",o.esds&&o.esds.mimeCodec&&(h+="."+o.esds.mimeCodec),l=`audio/mp4; codecs="${h}"`}const d=[];let u=0,f=0,p=0,m=0,g=0,_=0;const v=new c(s.stts.entries);let y=null;s.ctts&&(y=new c(s.ctts.entries));let b=0;for(;;){var n=s.stsc.entries[g];const e=s.stsz.entries[u],t=v.value.duration,i=y?y.value.compositionOffset:0;let r=!0;s.stss&&(r=s.stss.entries[b]===u+1);const o=s.stco||s.co64;if(d.push({size:e,duration:t,dts:_,presentationOffset:i,sync:r,offset:m+o.entries[p]}),u++,u>=s.stsz.entries.length)break;if(f++,m+=e,f>=n.samplesPerChunk){f=0,m=0,p++;const e=s.stsc.entries[g+1];e&&p+1>=e.firstChunk&&g++}_+=t,v.inc(),y&&y.inc(),r&&b++}r.mdia.mdhd.duration=0,r.tkhd.duration=0;const w=n.sampleDescriptionId,x={type:"moov",mvhd:e.mvhd,traks:[{tkhd:r.tkhd,mdia:{mdhd:r.mdia.mdhd,hdlr:r.mdia.hdlr,elng:r.mdia.elng,minf:{vmhd:r.mdia.minf.vmhd,smhd:r.mdia.minf.smhd,dinf:r.mdia.minf.dinf,stbl:{stsd:s.stsd,stts:{version:0,flags:0,entries:[]},ctts:{version:0,flags:0,entries:[]},stsc:{version:0,flags:0,entries:[]},stsz:{version:0,flags:0,entries:[]},stco:{version:0,flags:0,entries:[]},stss:{version:0,flags:0,entries:[]}}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:r.tkhd.trackId,defaultSampleDescriptionIndex:w,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};this._tracks.push({fragmentSequence:1,trackId:r.tkhd.trackId,timeScale:r.mdia.mdhd.timeScale,samples:d,currSample:null,currTime:null,moov:x,mime:l})}if(0===this._tracks.length)return void this.emit("error",new Error("no playable tracks"));e.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};const i=o.encode(this._ftyp),r=this._tracks.map(e=>{const t=o.encode(e.moov);return{mime:e.mime,init:Buffer.concat([i,t])}});this.emit("ready",r)}seek(e){if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);let t=-1;if(this._tracks.map((n,i)=>{n.outStream&&n.outStream.destroy(),n.inStream&&(n.inStream.destroy(),n.inStream=null);const r=n.outStream=s.encode(),o=this._generateFragment(i,e);if(!o)return r.finalize();(-1===t||o.ranges[0].start<t)&&(t=o.ranges[0].start);const a=e=>{r.destroyed||r.box(e.moof,t=>{if(t)return this.emit("error",t);if(r.destroyed)return;n.inStream.slice(e.ranges).pipe(r.mediaData(e.length,e=>{if(e)return this.emit("error",e);if(r.destroyed)return;const t=this._generateFragment(i);if(!t)return r.finalize();a(t)}))})};a(o)}),t>=0){const e=this._fileStream=this._file.createReadStream({start:t});this._tracks.forEach(n=>{n.inStream=new a(t,{highWaterMark:1e7}),e.pipe(n.inStream)})}return this._tracks.map(e=>e.outStream)}_findSampleBefore(e,t){const n=this._tracks[e],r=Math.floor(n.timeScale*t);let s=i(n.samples,r,(e,t)=>e.dts+e.presentationOffset-t);for(-1===s?s=0:s<0&&(s=-s-2);!n.samples[s].sync;)s--;return s}_generateFragment(e,t){const n=this._tracks[e];let i;if(i=void 0!==t?this._findSampleBefore(e,t):n.currSample,i>=n.samples.length)return null;const r=n.samples[i].dts;let s=0;const o=[];for(var a=i;a<n.samples.length;a++){const e=n.samples[a];if(e.sync&&e.dts-r>=n.timeScale*h)break;s+=e.size;const t=o.length-1;t<0||o[t].end!==e.offset?o.push({start:e.offset,end:e.offset+e.size}):o[t].end+=e.size}return n.currSample=a,{moof:this._generateMoof(e,i,a),ranges:o,length:s}}_generateMoof(e,t,n){const i=this._tracks[e],r=[];let s=0;for(let e=t;e<n;e++){const t=i.samples[e];t.presentationOffset<0&&(s=1),r.push({sampleDuration:t.duration,sampleSize:t.size,sampleFlags:t.sync?33554432:16842752,sampleCompositionTimeOffset:t.presentationOffset})}const a={type:"moof",mfhd:{sequenceNumber:i.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:i.trackId},tfdt:{baseMediaDecodeTime:i.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:r,version:s}}]};return a.trafs[0].trun.dataOffset+=o.encodingLength(a),a}}},function(e,t){e.exports=function(e,t,n,i,r){var s,o;if(void 0===i)i=0;else if((i|=0)<0||i>=e.length)throw new RangeError("invalid lower bound");if(void 0===r)r=e.length-1;else if((r|=0)<i||r>=e.length)throw new RangeError("invalid upper bound");for(;i<=r;)if((o=+n(e[s=i+(r-i>>>1)],t,s,e))<0)i=s+1;else{if(!(o>0))return s;r=s-1}return~i}},function(e,t,n){const i=n(176),r=n(183);t.decode=e=>new i(e),t.encode=e=>new r(e)},function(e,t,n){var i=n(4),r=n(177),s=n(27),o=Buffer.alloc(0);class a extends i.Writable{constructor(e){super(e),this.destroyed=!1,this._pending=0,this._missing=0,this._ignoreEmpty=!1,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}_write(e,t,n){if(!this.destroyed){for(var i=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty)return this._writeBuffer=e,void(this._writeCb=n);var r=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(i=this._str.write(r===e.length?e:e.slice(0,r))),this._missing-=r,!this._missing){var s=this._buf,a=this._cb,c=this._str;this._buf=this._cb=this._str=this._ondrain=null,i=!0,this._ignoreEmpty=!1,c&&c.end(),a&&a(s)}e=r===e.length?o:e.slice(r)}if(this._pending&&!this._missing)return this._writeBuffer=e,void(this._writeCb=n);i?n():this._ondrain(n)}}_buffer(e,t){this._missing=e,this._buf=Buffer.alloc(e),this._cb=t}_stream(e,t){return this._missing=e,this._str=new c(this),this._ondrain=r(this._str,"drain"),this._pending++,this._str.on("end",()=>{this._pending--,this._kick()}),this._cb=t,this._str}_readBox(){const e=(t,n)=>{this._buffer(t,t=>{n=n?Buffer.concat([n,t]):t;var i=s.readHeaders(n);"number"==typeof i?e(i-n.length,n):(this._pending++,this._headers=i,this.emit("box",i))})};e(8)}stream(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var e=this._headers;return this._headers=null,this._stream(e.contentLen,null)}decode(e){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;this._headers=null,this._buffer(t.contentLen,n=>{var i=s.decodeWithoutHeaders(t,n);e(i),this._pending--,this._kick()})}ignore(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var e=this._headers;this._headers=null,this._missing=e.contentLen,0===this._missing&&(this._ignoreEmpty=!0),this._cb=()=>{this._pending--,this._kick()}}_kick(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}}}class c extends i.PassThrough{constructor(e){super(),this._parent=e,this.destroyed=!1}destroy(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}e.exports=a},function(e,t){e.exports=function(e,t){var n=null;return e.on(t,(function(e){if(n){var t=n;n=null,t(e)}})),function(e){n=e}}},function(e,t,n){var i=n(179),r=n(180);e.exports=function(e,t,n){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(e,t,n);var s=r(e);return 0===e?s:void 0===t?i(s,0):("string"!=typeof n&&(n=void 0),i(s,t,n))}},function(e,t){var n=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(e){return!1}}();function i(e,t,n,i){if(n<0||i>e.length)throw new RangeError("Out of range index");return n>>>=0,(i=void 0===i?e.length:i>>>0)>n&&e.fill(t,n,i),e}e.exports=function(e,t,r,s,o){if(n)return e.fill(t,r,s,o);if("number"==typeof t)return i(e,t,r,s);if("string"==typeof t){if("string"==typeof r?(o=r,r=0,s=e.length):"string"==typeof s&&(o=s,s=e.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("latin1"===o&&(o="binary"),"string"==typeof o&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(""===t)return i(e,0,r,s);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(t))return i(e,t.charCodeAt(0),r,s);t=new Buffer(t,o)}return Buffer.isBuffer(t)?function(e,t,n,i){if(n<0||i>e.length)throw new RangeError("Out of range index");if(i<=n)return e;n>>>=0,i=void 0===i?e.length:i>>>0;for(var r=n,s=t.length;r<=i-s;)t.copy(e,r),r+=s;return r!==i&&t.copy(e,r,0,i-r),e}(e,t,r,s):i(e,0,r,s)}},function(e,t){e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}},function(e,t,n){var i=n(27),r=n(182),s=n(78);t.fullBoxes={};function o(e,t,n){for(var i=t;i<n;i++)e[i]=0}function a(e,t,n){t.writeUInt32BE(Math.floor((e.getTime()+20828448e5)/1e3),n)}function c(e,t,n){t.writeUIntBE(Math.floor((e.getTime()+20828448e5)/1e3),n,6)}function h(e,t,n){t.writeUInt16BE(Math.floor(e)%65536,n),t.writeUInt16BE(Math.floor(256*e*256)%65536,n+2)}function l(e,t,n){e||(e=[0,0,0,0,0,0,0,0,0]);for(var i=0;i<e.length;i++)h(e[i],t,n+4*i)}function d(e){for(var t=new Array(e.length/4),n=0;n<t.length;n++)t[n]=p(e,4*n);return t}function u(e,t){return new Date(1e3*e.readUIntBE(t,6)-20828448e5)}function f(e,t){return new Date(1e3*e.readUInt32BE(t)-20828448e5)}function p(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function m(e,t){return e[t]+e[t+1]/256}function g(e,t,n){var i;for(i=0;i<n&&0!==e[t+i];i++);return e.toString("utf8",t,t+i)}["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach((function(e){t.fullBoxes[e]=!0})),t.ftyp={},t.ftyp.encode=function(e,n,i){n=n?n.slice(i):Buffer.alloc(t.ftyp.encodingLength(e));var r=e.compatibleBrands||[];n.write(e.brand,0,4,"ascii"),n.writeUInt32BE(e.brandVersion,4);for(var s=0;s<r.length;s++)n.write(r[s],8+4*s,4,"ascii");return t.ftyp.encode.bytes=8+4*r.length,n},t.ftyp.decode=function(e,t){for(var n=(e=e.slice(t)).toString("ascii",0,4),i=e.readUInt32BE(4),r=[],s=8;s<e.length;s+=4)r.push(e.toString("ascii",s,s+4));return{brand:n,brandVersion:i,compatibleBrands:r}},t.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},t.mvhd={},t.mvhd.encode=function(e,n,i){return n=n?n.slice(i):Buffer.alloc(96),a(e.ctime||new Date,n,0),a(e.mtime||new Date,n,4),n.writeUInt32BE(e.timeScale||0,8),n.writeUInt32BE(e.duration||0,12),h(e.preferredRate||0,n,16),function(e,t,n){t[n]=Math.floor(e)%256,t[n+1]=Math.floor(256*e)%256}(e.preferredVolume||0,n,20),o(n,22,32),l(e.matrix,n,32),n.writeUInt32BE(e.previewTime||0,68),n.writeUInt32BE(e.previewDuration||0,72),n.writeUInt32BE(e.posterTime||0,76),n.writeUInt32BE(e.selectionTime||0,80),n.writeUInt32BE(e.selectionDuration||0,84),n.writeUInt32BE(e.currentTime||0,88),n.writeUInt32BE(e.nextTrackId||0,92),t.mvhd.encode.bytes=96,n},t.mvhd.decode=function(e,t){return{ctime:f(e=e.slice(t),0),mtime:f(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:p(e,16),preferredVolume:m(e,20),matrix:d(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},t.mvhd.encodingLength=function(e){return 96},t.tkhd={},t.tkhd.encode=function(e,n,i){return n=n?n.slice(i):Buffer.alloc(80),a(e.ctime||new Date,n,0),a(e.mtime||new Date,n,4),n.writeUInt32BE(e.trackId||0,8),o(n,12,16),n.writeUInt32BE(e.duration||0,16),o(n,20,28),n.writeUInt16BE(e.layer||0,28),n.writeUInt16BE(e.alternateGroup||0,30),n.writeUInt16BE(e.volume||0,32),l(e.matrix,n,36),n.writeUInt32BE(e.trackWidth||0,72),n.writeUInt32BE(e.trackHeight||0,76),t.tkhd.encode.bytes=80,n},t.tkhd.decode=function(e,t){return{ctime:f(e=e.slice(t),0),mtime:f(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:d(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},t.tkhd.encodingLength=function(e){return 80},t.mdhd={},t.mdhd.encode=function(e,n,i){return 1===e.version?(n=n?n.slice(i):Buffer.alloc(32),c(e.ctime||new Date,n,0),c(e.mtime||new Date,n,8),n.writeUInt32BE(e.timeScale||0,16),n.writeUIntBE(e.duration||0,20,6),n.writeUInt16BE(e.language||0,28),n.writeUInt16BE(e.quality||0,30),t.mdhd.encode.bytes=32,n):(n=n?n.slice(i):Buffer.alloc(20),a(e.ctime||new Date,n,0),a(e.mtime||new Date,n,4),n.writeUInt32BE(e.timeScale||0,8),n.writeUInt32BE(e.duration||0,12),n.writeUInt16BE(e.language||0,16),n.writeUInt16BE(e.quality||0,18),t.mdhd.encode.bytes=20,n)},t.mdhd.decode=function(e,t,n){return e=e.slice(t),n-t!=20?{ctime:u(e,0),mtime:u(e,8),timeScale:e.readUInt32BE(16),duration:e.readUIntBE(20,6),language:e.readUInt16BE(28),quality:e.readUInt16BE(30)}:{ctime:f(e,0),mtime:f(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},t.mdhd.encodingLength=function(e){return 1===e.version?32:20},t.vmhd={},t.vmhd.encode=function(e,n,i){(n=n?n.slice(i):Buffer.alloc(8)).writeUInt16BE(e.graphicsMode||0,0);var r=e.opcolor||[0,0,0];return n.writeUInt16BE(r[0],2),n.writeUInt16BE(r[1],4),n.writeUInt16BE(r[2],6),t.vmhd.encode.bytes=8,n},t.vmhd.decode=function(e,t){return{graphicsMode:(e=e.slice(t)).readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},t.vmhd.encodingLength=function(e){return 8},t.smhd={},t.smhd.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(4)).writeUInt16BE(e.balance||0,0),o(n,2,4),t.smhd.encode.bytes=4,n},t.smhd.decode=function(e,t){return{balance:(e=e.slice(t)).readUInt16BE(0)}},t.smhd.encodingLength=function(e){return 4},t.stsd={},t.stsd.encode=function(e,n,r){n=n?n.slice(r):Buffer.alloc(t.stsd.encodingLength(e));var s=e.entries||[];n.writeUInt32BE(s.length,0);for(var o=4,a=0;a<s.length;a++){var c=s[a];i.encode(c,n,o),o+=i.encode.bytes}return t.stsd.encode.bytes=o,n},t.stsd.decode=function(e,t,n){for(var r=(e=e.slice(t)).readUInt32BE(0),s=new Array(r),o=4,a=0;a<r;a++){var c=i.decode(e,o,n);s[a]=c,o+=c.length}return{entries:s}},t.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++)t+=i.encodingLength(e.entries[n]);return t},t.avc1=t.VisualSampleEntry={},t.VisualSampleEntry.encode=function(e,n,r){o(n=n?n.slice(r):Buffer.alloc(t.VisualSampleEntry.encodingLength(e)),0,6),n.writeUInt16BE(e.dataReferenceIndex||0,6),o(n,8,24),n.writeUInt16BE(e.width||0,24),n.writeUInt16BE(e.height||0,26),n.writeUInt32BE(e.hResolution||4718592,28),n.writeUInt32BE(e.vResolution||4718592,32),o(n,36,40),n.writeUInt16BE(e.frameCount||1,40);var s=e.compressorName||"",a=Math.min(s.length,31);n.writeUInt8(a,42),n.write(s,43,a,"utf8"),n.writeUInt16BE(e.depth||24,74),n.writeInt16BE(-1,76);var c=78;(e.children||[]).forEach((function(e){i.encode(e,n,c),c+=i.encode.bytes})),t.VisualSampleEntry.encode.bytes=c},t.VisualSampleEntry.decode=function(e,t,n){e=e.slice(t);for(var r=n-t,s=Math.min(e.readUInt8(42),31),o={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+s),depth:e.readUInt16BE(74),children:[]},a=78;r-a>=8;){var c=i.decode(e,a,r);o.children.push(c),o[c.type]=c,a+=c.length}return o},t.VisualSampleEntry.encodingLength=function(e){var t=78;return(e.children||[]).forEach((function(e){t+=i.encodingLength(e)})),t},t.avcC={},t.avcC.encode=function(e,n,i){n=n?n.slice(i):Buffer.alloc(e.buffer.length),e.buffer.copy(n),t.avcC.encode.bytes=e.buffer.length},t.avcC.decode=function(e,t,n){return{mimeCodec:(e=e.slice(t,n)).toString("hex",1,4),buffer:Buffer.from(e)}},t.avcC.encodingLength=function(e){return e.buffer.length},t.mp4a=t.AudioSampleEntry={},t.AudioSampleEntry.encode=function(e,n,r){o(n=n?n.slice(r):Buffer.alloc(t.AudioSampleEntry.encodingLength(e)),0,6),n.writeUInt16BE(e.dataReferenceIndex||0,6),o(n,8,16),n.writeUInt16BE(e.channelCount||2,16),n.writeUInt16BE(e.sampleSize||16,18),o(n,20,24),n.writeUInt32BE(e.sampleRate||0,24);var s=28;(e.children||[]).forEach((function(e){i.encode(e,n,s),s+=i.encode.bytes})),t.AudioSampleEntry.encode.bytes=s},t.AudioSampleEntry.decode=function(e,t,n){for(var r=n-t,s={dataReferenceIndex:(e=e.slice(t,n)).readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},o=28;r-o>=8;){var a=i.decode(e,o,r);s.children.push(a),s[a.type]=a,o+=a.length}return s},t.AudioSampleEntry.encodingLength=function(e){var t=28;return(e.children||[]).forEach((function(e){t+=i.encodingLength(e)})),t},t.esds={},t.esds.encode=function(e,n,i){n=n?n.slice(i):Buffer.alloc(e.buffer.length),e.buffer.copy(n,0),t.esds.encode.bytes=e.buffer.length},t.esds.decode=function(e,t,n){e=e.slice(t,n);var i=r.Descriptor.decode(e,0,e.length),s=("ESDescriptor"===i.tagName?i:{}).DecoderConfigDescriptor||{},o=s.oti||0,a=s.DecoderSpecificInfo,c=a?(248&a.buffer.readUInt8(0))>>3:0,h=null;return o&&(h=o.toString(16),c&&(h+="."+c)),{mimeCodec:h,buffer:Buffer.from(e.slice(0))}},t.esds.encodingLength=function(e){return e.buffer.length},t.stsz={},t.stsz.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.stsz.encodingLength(e))).writeUInt32BE(0,0),n.writeUInt32BE(r.length,4);for(var s=0;s<r.length;s++)n.writeUInt32BE(r[s],4*s+8);return t.stsz.encode.bytes=8+4*r.length,n},t.stsz.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=e.readUInt32BE(4),r=new Array(i),s=0;s<i;s++)r[s]=0===n?e.readUInt32BE(4*s+8):n;return{entries:r}},t.stsz.encodingLength=function(e){return 8+4*e.entries.length},t.stss=t.stco={},t.stco.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.stco.encodingLength(e))).writeUInt32BE(r.length,0);for(var s=0;s<r.length;s++)n.writeUInt32BE(r[s],4*s+4);return t.stco.encode.bytes=4+4*r.length,n},t.stco.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++)i[r]=e.readUInt32BE(4*r+4);return{entries:i}},t.stco.encodingLength=function(e){return 4+4*e.entries.length},t.co64={},t.co64.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.co64.encodingLength(e))).writeUInt32BE(r.length,0);for(var o=0;o<r.length;o++)s.encode(r[o],n,8*o+4);return t.co64.encode.bytes=4+8*r.length,n},t.co64.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++)i[r]=s.decode(e,8*r+4);return{entries:i}},t.co64.encodingLength=function(e){return 4+8*e.entries.length},t.stts={},t.stts.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.stts.encodingLength(e))).writeUInt32BE(r.length,0);for(var s=0;s<r.length;s++){var o=8*s+4;n.writeUInt32BE(r[s].count||0,o),n.writeUInt32BE(r[s].duration||0,o+4)}return t.stts.encode.bytes=4+8*e.entries.length,n},t.stts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++){var s=8*r+4;i[r]={count:e.readUInt32BE(s),duration:e.readUInt32BE(s+4)}}return{entries:i}},t.stts.encodingLength=function(e){return 4+8*e.entries.length},t.ctts={},t.ctts.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.ctts.encodingLength(e))).writeUInt32BE(r.length,0);for(var s=0;s<r.length;s++){var o=8*s+4;n.writeUInt32BE(r[s].count||0,o),n.writeUInt32BE(r[s].compositionOffset||0,o+4)}return t.ctts.encode.bytes=4+8*r.length,n},t.ctts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++){var s=8*r+4;i[r]={count:e.readUInt32BE(s),compositionOffset:e.readInt32BE(s+4)}}return{entries:i}},t.ctts.encodingLength=function(e){return 4+8*e.entries.length},t.stsc={},t.stsc.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.stsc.encodingLength(e))).writeUInt32BE(r.length,0);for(var s=0;s<r.length;s++){var o=12*s+4;n.writeUInt32BE(r[s].firstChunk||0,o),n.writeUInt32BE(r[s].samplesPerChunk||0,o+4),n.writeUInt32BE(r[s].sampleDescriptionId||0,o+8)}return t.stsc.encode.bytes=4+12*r.length,n},t.stsc.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++){var s=12*r+4;i[r]={firstChunk:e.readUInt32BE(s),samplesPerChunk:e.readUInt32BE(s+4),sampleDescriptionId:e.readUInt32BE(s+8)}}return{entries:i}},t.stsc.encodingLength=function(e){return 4+12*e.entries.length},t.dref={},t.dref.encode=function(e,n,i){n=n?n.slice(i):Buffer.alloc(t.dref.encodingLength(e));var r=e.entries||[];n.writeUInt32BE(r.length,0);for(var s=4,o=0;o<r.length;o++){var a=r[o],c=(a.buf?a.buf.length:0)+4+4;n.writeUInt32BE(c,s),s+=4,n.write(a.type,s,4,"ascii"),s+=4,a.buf&&(a.buf.copy(n,s),s+=a.buf.length)}return t.dref.encode.bytes=s,n},t.dref.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=4,s=0;s<n;s++){var o=e.readUInt32BE(r),a=e.toString("ascii",r+4,r+8),c=e.slice(r+8,r+o);r+=o,i[s]={type:a,buf:c}}return{entries:i}},t.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++){var i=e.entries[n].buf;t+=(i?i.length:0)+4+4}return t},t.elst={},t.elst.encode=function(e,n,i){var r=e.entries||[];(n=n?n.slice(i):Buffer.alloc(t.elst.encodingLength(e))).writeUInt32BE(r.length,0);for(var s=0;s<r.length;s++){var o=12*s+4;n.writeUInt32BE(r[s].trackDuration||0,o),n.writeUInt32BE(r[s].mediaTime||0,o+4),h(r[s].mediaRate||0,n,o+8)}return t.elst.encode.bytes=4+12*r.length,n},t.elst.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),i=new Array(n),r=0;r<n;r++){var s=12*r+4;i[r]={trackDuration:e.readUInt32BE(s),mediaTime:e.readInt32BE(s+4),mediaRate:p(e,s+8)}}return{entries:i}},t.elst.encodingLength=function(e){return 4+12*e.entries.length},t.hdlr={},t.hdlr.encode=function(e,n,i){n=n?n.slice(i):Buffer.alloc(t.hdlr.encodingLength(e));var r=21+(e.name||"").length;return n.fill(0,0,r),n.write(e.handlerType||"",4,4,"ascii"),function(e,t,n){var i=Buffer.from(e,"utf8");i.copy(t,n),t[n+i.length]=0}(e.name||"",n,20),t.hdlr.encode.bytes=r,n},t.hdlr.decode=function(e,t,n){return{handlerType:(e=e.slice(t)).toString("ascii",4,8),name:g(e,20,n)}},t.hdlr.encodingLength=function(e){return 21+(e.name||"").length},t.mehd={},t.mehd.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(4)).writeUInt32BE(e.fragmentDuration||0,0),t.mehd.encode.bytes=4,n},t.mehd.decode=function(e,t){return{fragmentDuration:(e=e.slice(t)).readUInt32BE(0)}},t.mehd.encodingLength=function(e){return 4},t.trex={},t.trex.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(20)).writeUInt32BE(e.trackId||0,0),n.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4),n.writeUInt32BE(e.defaultSampleDuration||0,8),n.writeUInt32BE(e.defaultSampleSize||0,12),n.writeUInt32BE(e.defaultSampleFlags||0,16),t.trex.encode.bytes=20,n},t.trex.decode=function(e,t){return{trackId:(e=e.slice(t)).readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},t.trex.encodingLength=function(e){return 20},t.mfhd={},t.mfhd.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(4)).writeUInt32BE(e.sequenceNumber||0,0),t.mfhd.encode.bytes=4,n},t.mfhd.decode=function(e,t){return{sequenceNumber:e.readUInt32BE(0)}},t.mfhd.encodingLength=function(e){return 4},t.tfhd={},t.tfhd.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(4)).writeUInt32BE(e.trackId,0),t.tfhd.encode.bytes=4,n},t.tfhd.decode=function(e,t){},t.tfhd.encodingLength=function(e){return 4},t.tfdt={},t.tfdt.encode=function(e,n,i){return(n=n?n.slice(i):Buffer.alloc(4)).writeUInt32BE(e.baseMediaDecodeTime||0,0),t.tfdt.encode.bytes=4,n},t.tfdt.decode=function(e,t){},t.tfdt.encodingLength=function(e){return 4},t.trun={},t.trun.encode=function(e,n,i){(n=n?n.slice(i):Buffer.alloc(8+16*e.entries.length)).writeUInt32BE(e.entries.length,0),n.writeInt32BE(e.dataOffset,4);for(var r=8,s=0;s<e.entries.length;s++){var o=e.entries[s];n.writeUInt32BE(o.sampleDuration,r),r+=4,n.writeUInt32BE(o.sampleSize,r),r+=4,n.writeUInt32BE(o.sampleFlags,r),r+=4,0===(e.version||0)?n.writeUInt32BE(o.sampleCompositionTimeOffset,r):n.writeInt32BE(o.sampleCompositionTimeOffset,r),r+=4}t.trun.encode.bytes=r},t.trun.decode=function(e,t){},t.trun.encodingLength=function(e){return 8+16*e.entries.length},t.mdat={},t.mdat.encode=function(e,n,i){e.buffer?(e.buffer.copy(n,i),t.mdat.encode.bytes=e.buffer.length):t.mdat.encode.bytes=t.mdat.encodingLength(e)},t.mdat.decode=function(e,t,n){return{buffer:Buffer.from(e.slice(t,n))}},t.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}},function(e,t){var n={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};t.Descriptor={},t.Descriptor.decode=function(e,i,r){var s,o,a=e.readUInt8(i),c=i+1,h=0;do{h=h<<7|127&(s=e.readUInt8(c++))}while(128&s);var l=n[a];return(o=t[l]?t[l].decode(e,c,r):{buffer:Buffer.from(e.slice(c,c+h))}).tag=a,o.tagName=l,o.length=c-i+h,o.contentsLen=h,o},t.DescriptorArray={},t.DescriptorArray.decode=function(e,i,r){for(var s=i,o={};s+2<=r;){var a=t.Descriptor.decode(e,s,r);s+=a.length,o[n[a.tag]||"Descriptor"+a.tag]=a}return o},t.ESDescriptor={},t.ESDescriptor.decode=function(e,n,i){var r=e.readUInt8(n+2),s=n+3;(128&r&&(s+=2),64&r)&&(s+=e.readUInt8(s)+1);return 32&r&&(s+=2),t.DescriptorArray.decode(e,s,i)},t.DecoderConfigDescriptor={},t.DecoderConfigDescriptor.decode=function(e,n,i){var r=e.readUInt8(n),s=t.DescriptorArray.decode(e,n+13,i);return s.oti=r,s}},function(e,t,n){var i=n(4),r=n(27);function s(){}class o extends i.Readable{constructor(e){super(e),this.destroyed=!1,this._finalized=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=()=>{this._want&&(this._want=!1,this._read())},this._onend=()=>{this._stream=null}}mdat(e,t){this.mediaData(e,t)}mediaData(e,t){var n=new a(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:n},t),n}box(e,t){if(t||(t=s),this.destroyed)return t(new Error("Encoder is destroyed"));var n;if(e.encodeBufferLen&&(n=Buffer.alloc(e.encodeBufferLen)),e.stream)e.buffer=null,n=r.encode(e,n),this.push(n),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",t),this._forward();else{if(n=r.encode(e,n),this.push(n))return process.nextTick(t);this._drain=t}}destroy(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}}finalize(){this._finalized=!0,this._stream||this._drain||this.push(null)}_forward(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}}_read(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1,this._finalized&&this.push(null)}}}class a extends i.PassThrough{constructor(e){super(),this._parent=e,this.destroyed=!1}destroy(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}e.exports=o},function(e,t,n){const{Writable:i,PassThrough:r}=n(4);e.exports=class extends i{constructor(e,t={}){super(t),this.destroyed=!1,this._queue=[],this._position=e||0,this._cb=null,this._buffer=null,this._out=null}_write(e,t,n){let i=!0;for(;;){if(this.destroyed)return;if(0===this._queue.length)return this._buffer=e,void(this._cb=n);this._buffer=null;var r=this._queue[0];const t=Math.max(r.start-this._position,0),s=r.end-this._position;if(t>=e.length)return this._position+=e.length,n(null);let o;if(s>e.length){this._position+=e.length,o=0===t?e:e.slice(t),i=r.stream.write(o)&&i;break}this._position+=s,o=0===t&&s===e.length?e:e.slice(t,s),i=r.stream.write(o)&&i,r.last&&r.stream.end(),e=e.slice(s),this._queue.shift()}i?n(null):r.stream.once("drain",n.bind(null,null))}slice(e){if(this.destroyed)return null;Array.isArray(e)||(e=[e]);const t=new r;return e.forEach((n,i)=>{this._queue.push({start:n.start,end:n.end,stream:t,last:i===e.length-1})}),this._buffer&&this._write(this._buffer,null,this._cb),t}destroy(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e))}}},function(e,t,n){var i=n(7);e.exports=function(e,t,n){n=i(n);var r=Buffer.alloc(t),s=0;e.on("data",(function(e){e.copy(r,s),s+=e.length})).on("end",(function(){n(null,r)})).on("error",n)}},function(e,t,n){const i=n(1)("webtorrent:file-stream"),r=n(4);class s extends r.Readable{constructor(e,t){super(t),this.destroyed=!1,this._torrent=e._torrent;const n=t&&t.start||0,i=t&&t.end&&t.end<e.length?t.end:e.length-1,r=e._torrent.pieceLength;this._startPiece=(n+e.offset)/r|0,this._endPiece=(i+e.offset)/r|0,this._piece=this._startPiece,this._offset=n+e.offset-this._startPiece*r,this._missing=i-n+1,this._reading=!1,this._notifying=!1,this._criticalLength=Math.min(1048576/r|0,2)}_read(){this._reading||(this._reading=!0,this._notify())}_notify(){if(!this._reading||0===this._missing)return;if(!this._torrent.bitfield.get(this._piece))return this._torrent.critical(this._piece,this._piece+this._criticalLength);if(this._notifying)return;if(this._notifying=!0,this._torrent.destroyed)return this._destroy(new Error("Torrent removed"));const e=this._piece;this._torrent.store.get(e,(t,n)=>{if(this._notifying=!1,!this.destroyed){if(i("read %s (length %s) (err %s)",e,n.length,t&&t.message),t)return this._destroy(t);this._offset&&(n=n.slice(this._offset),this._offset=0),this._missing<n.length&&(n=n.slice(0,this._missing)),this._missing-=n.length,i("pushing buffer of length %s",n.length),this._reading=!1,this.push(n),0===this._missing&&this.push(null)}}),this._piece+=1}destroy(e){this._destroy(null,e)}_destroy(e,t){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}}e.exports=s},function(e,t){e.exports=class{constructor(e){this._torrent=e,this._numPieces=e.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=e=>{this.recalculate(),this._initWire(e)},this._onWireHave=e=>{this._pieces[e]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(e=>{this._initWire(e)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(e){let t=[],n=1/0;for(let i=0;i<this._numPieces;++i){if(e&&!e(i))continue;const r=this._pieces[i];r===n?t.push(i):r<n&&(t=[i],n=r)}return t.length?t[Math.random()*t.length|0]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(e=>{this._cleanupWireEvents(e)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(e){e._onClose=()=>{this._cleanupWireEvents(e);for(let t=0;t<this._numPieces;++t)this._pieces[t]-=e.peerPieces.get(t)},e.on("have",this._onWireHave),e.on("bitfield",this._onWireBitfield),e.once("close",e._onClose)}recalculate(){this._pieces.fill(0);for(const e of this._torrent.wires)for(let t=0;t<this._numPieces;++t)this._pieces[t]+=e.peerPieces.get(t)}_cleanupWireEvents(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}}},function(e,t,n){const i=n(16),r=n(189),s=n(22),o=n(190),a=n(40),c=n(194);function h(e,t){return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="utf-8">\n        <title>${e}</title>\n      </head>\n      <body>\n        ${t}\n      </body>\n    </html>\n  `}e.exports=function(e,t={}){const n=s.createServer();t.origin||(t.origin="*");const l=[],d=[];let u=!1;const f=n.listen,p=n.close;function m(e){return!1!==t.origin&&(null!=e.headers.origin&&("*"===t.origin||e.headers.origin===t.origin))}function g(e){e.setTimeout(36e6),l.push(e),e.once("close",()=>{i(l,l.indexOf(e))})}function _(s,l){if(t.hostname&&s.headers.host!==`${t.hostname}:${n.address().port}`)return s.destroy();const u=new URL(s.url,"http://example.com").pathname;if(m(s)&&l.setHeader("Access-Control-Allow-Origin",s.headers.origin),l.setHeader("X-Content-Type-Options","nosniff"),l.setHeader("Content-Security-Policy","base-uri 'none'; default-src 'none'; frame-ancestors 'none'; form-action 'none';"),"/favicon.ico"===u)return g();if("OPTIONS"===s.method)return m(s)?function(){l.statusCode=204,l.setHeader("Access-Control-Max-Age","600"),l.setHeader("Access-Control-Allow-Methods","GET,HEAD"),s.headers["access-control-request-headers"]&&l.setHeader("Access-Control-Allow-Headers",s.headers["access-control-request-headers"]);l.end()}():_();if("GET"!==s.method&&"HEAD"!==s.method)return _();function f(){i(d,d.indexOf(f)),p()}function p(){if("/"===u)return function(){l.statusCode=200,l.setHeader("Content-Type","text/html");const t=e.files.map((e,t)=>`<li>\n            <a\n              download="${r(e.name)}"\n              href="${r(t)}/${r(e.name)}"\n            >\n              ${r(e.path)}\n            </a>\n            (${r(e.length)} bytes)\n          </li>`).join("<br>"),n=h(r(e.name)+" - WebTorrent",`\n          <h1>${r(e.name)}</h1>\n          <ol>${t}</ol>\n        `);l.end(n)}();const t=Number(u.split("/")[1]);if(Number.isNaN(t)||t>=e.files.length)return g();!function(e){l.statusCode=200,l.setHeader("Content-Type",o.getType(e.name)||"application/octet-stream"),l.setHeader("Accept-Ranges","bytes"),l.setHeader("Content-Disposition","inline; filename*=UTF-8''"+(t=e.name,encodeURIComponent(t).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape))),l.setHeader("transferMode.dlna.org","Streaming"),l.setHeader("contentFeatures.dlna.org","DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000");var t;let n=c(e.length,s.headers.range||"");Array.isArray(n)?(l.statusCode=206,n=n[0],l.setHeader("Content-Range",`bytes ${n.start}-${n.end}/${e.length}`),l.setHeader("Content-Length",n.end-n.start+1)):(n=null,l.setHeader("Content-Length",e.length));if("HEAD"===s.method)return l.end();a(e.createReadStream(n),l)}(e.files[t])}function g(){l.statusCode=404,l.setHeader("Content-Type","text/html");const e=h("404 - Not Found","<h1>404 - Not Found</h1>");l.end(e)}function _(){l.statusCode=405,l.setHeader("Content-Type","text/html");const e=h("405 - Method Not Allowed","<h1>405 - Method Not Allowed</h1>");l.end(e)}e.ready?p():(d.push(f),e.once("ready",f))}return n.listen=(...e)=>(u=!1,n.on("connection",g),n.on("request",_),f.apply(n,e)),n.close=t=>{for(u=!0,n.removeListener("connection",g),n.removeListener("request",_);d.length;){const t=d.pop();e.removeListener("ready",t)}p.call(n,t)},n.destroy=t=>{l.forEach(e=>{e.destroy()}),t||(t=()=>{}),u?process.nextTick(t):n.close(t),e=null},n}},function(e,t,n){"use strict";var i=/["'&<>]/;e.exports=function(e){var t,n=""+e,r=i.exec(n);if(!r)return n;var s="",o=0,a=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==o&&(s+=n.substring(a,o)),a=o+1,s+=t}return a!==o?s+n.substring(a,o):s}},function(e,t,n){"use strict";var i=n(191);e.exports=new i(n(192),n(193))},function(e,t,n){"use strict";function i(){this._types=Object.create(null),this._extensions=Object.create(null);for(var e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}i.prototype.define=function(e,t){for(var n in e){var i=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(var r=0;r<i.length;r++){if("*"!=(s=i[r])[0]){if(!t&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+n+'".');this._types[s]=n}}if(t||!this._extensions[n]){var s=i[0];this._extensions[n]="*"!=s[0]?s:s.substr(1)}}},i.prototype.getType=function(e){var t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),i=t.length<e.length;return(n.length<t.length-1||!i)&&this._types[n]||null},i.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=i},function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},function(e,t){e.exports={"application/prs.cww":["cww"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["keynote"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},function(e,t,n){"use strict";function i(e,t){return{start:e.start,end:e.end,index:t}}function r(e){return{start:e.start,end:e.end}}function s(e,t){return e.index-t.index}function o(e,t){return e.start-t.start}e.exports=function(e,t,n){if("string"!=typeof t)throw new TypeError("argument str must be a string");var a=t.indexOf("=");if(-1===a)return-2;var c=t.slice(a+1).split(","),h=[];h.type=t.slice(0,a);for(var l=0;l<c.length;l++){var d=c[l].split("-"),u=parseInt(d[0],10),f=parseInt(d[1],10);isNaN(u)?(u=e-f,f=e-1):isNaN(f)&&(f=e-1),f>e-1&&(f=e-1),isNaN(u)||isNaN(f)||u>f||u<0||h.push({start:u,end:f})}if(h.length<1)return-1;return n&&n.combine?function(e){for(var t=e.map(i).sort(o),n=0,a=1;a<t.length;a++){var c=t[a],h=t[n];c.start>h.end+1?t[++n]=c:c.end>h.end&&(h.end=c.end,h.index=Math.min(h.index,c.index))}t.length=n+1;var l=t.sort(s).map(r);return l.type=e.type,l}(h):h}}]);
//# sourceMappingURL=webtorrent.min.js.map